Processando o modelo gpt4o...
Limpando o diret√≥rio de destino para testes combinados...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4o/run01/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4o/run02/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4o/run03/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Executando Maven para o modelo gpt4o...
[[1;34mINFO[m] Scanning for projects...
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m---------------------< [0;36mnet.lukyanets:market-rest[0;1m >----------------------[m
[[1;34mINFO[m] [1mBuilding market-rest 0.1.2[m
[[1;34mINFO[m] [1m--------------------------------[ jar ]---------------------------------[m
[[1;33mWARNING[m] The POM for com.sun.xml.bind:jaxb-osgi:jar:2.2.10 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-clean-plugin:2.5:clean[m [1m(default-clean)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Deleting /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:prepare-agent[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] argLine set to -javaagent:/home/rincon/.m2/repository/org/jacoco/org.jacoco.agent/0.8.7/org.jacoco.agent-0.8.7-runtime.jar=destfile=/media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.4.3:build-info[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:compile[m [1m(default-compile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;34mINFO[m] Compiling 11 source files to /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/classes
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:prepare-agent[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] argLine set to -javaagent:/home/rincon/.m2/repository/org/jacoco/org.jacoco.agent/0.8.7/org.jacoco.agent-0.8.7-runtime.jar=destfile=/media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.4.3:build-info[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:compile[m [1m(default-compile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] skip non existing resourceDirectory /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:testCompile[m [1m(default-testCompile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;34mINFO[m] Compiling 21 source files to /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/test-classes
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:prepare-agent[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] argLine set to -javaagent:/home/rincon/.m2/repository/org/jacoco/org.jacoco.agent/0.8.7/org.jacoco.agent-0.8.7-runtime.jar=destfile=/media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.4.3:build-info[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:compile[m [1m(default-compile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] skip non existing resourceDirectory /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:testCompile[m [1m(default-testCompile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-surefire-plugin:2.22.0:test[m [1m(default-test)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] -------------------------------------------------------
[[1;34mINFO[m]  T E S T S
[[1;34mINFO[m] -------------------------------------------------------
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:48:36,473 INFO  [background-preinit] o.h.v.i.u.Version - HV000001: Hibernate Validator 6.1.7.Final
2024-12-08 14:48:36,604 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:48:36,612 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:48:37,294 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:48:37,294 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:48:38,944 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:48:39,097 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 142 ms. Found 8 JPA repository interfaces.
2024-12-08 14:48:39,684 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:39,879 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@22acafbc' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:39,889 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:40,430 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:48:40,470 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:48:40,471 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:48:40,472 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:48:40,628 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:48:40,628 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3330 ms
2024-12-08 14:48:40,825 INFO  [main] c.z.h.HikariDataSource - HikariPool-1 - Starting...
2024-12-08 14:48:41,323 INFO  [main] c.z.h.HikariDataSource - HikariPool-1 - Start completed.
2024-12-08 14:48:41,621 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:48:41,720 INFO  [main] o.h.Version - HHH000412: Hibernate ORM core version 5.4.28.Final
2024-12-08 14:48:41,958 INFO  [main] o.h.a.c.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-12-08 14:48:42,321 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:48:42,683 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:42,687 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:43,712 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:48:43,729 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:48:44,909 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:48:45,979 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3780f7f1, org.springframework.security.web.context.SecurityContextPersistenceFilter@631518ad, org.springframework.security.web.header.HeaderWriterFilter@590ce837, org.springframework.security.web.authentication.logout.LogoutFilter@343c4727, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@640a1c7a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3fe3197a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1369280e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ee50a7c, org.springframework.security.web.session.SessionManagementFilter@7538a3b4, org.springframework.security.web.access.ExceptionTranslationFilter@4d25d31d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6d54f674]
2024-12-08 14:48:46,167 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:48:46,625 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:48:46,661 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 45465 (http) with context path ''
2024-12-08 14:48:47,264 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 11.629 seconds (JVM running for 13.988)
2024-12-08 14:48:49,205 INFO  [http-nio-auto-1-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:48:49,205 INFO  [http-nio-auto-1-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:48:49,207 INFO  [http-nio-auto-1-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:48:49,355 WARN  [http-nio-auto-1-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:48:50,973 WARN  [http-nio-auto-1-exec-4] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
Request method:	POST
Request URI:	http://localhost:45465/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{invalidJson}

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:51 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:48:50.985+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/products"
}
2024-12-08 14:48:51,418 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:48:51,419 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:48:51,420 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:48:51,424 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:48:51,427 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-1"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m1[m, Errors: 0, Skipped: 0, Time elapsed: 16.994 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_ProductsRestControllerTest[m
[[1;31mERROR[m] testInternalServerErrorSimulation  Time elapsed: 0.155 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <405>.

	at market.v3_gpt4o_run02_ProductsRestControllerTest.testInternalServerErrorSimulation(v3_gpt4o_run02_ProductsRestControllerTest.java:109)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:48:51,490 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:48:51,491 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:48:51,496 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:48:51,496 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:48:51,881 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:48:51,921 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 8 JPA repository interfaces.
2024-12-08 14:48:51,988 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:52,017 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2314cd21' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:52,021 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:52,098 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:48:52,100 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:48:52,100 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:48:52,100 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:48:52,118 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:48:52,119 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 622 ms
2024-12-08 14:48:52,165 INFO  [main] c.z.h.HikariDataSource - HikariPool-2 - Starting...
2024-12-08 14:48:52,167 INFO  [main] c.z.h.HikariDataSource - HikariPool-2 - Start completed.
2024-12-08 14:48:52,214 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:48:52,249 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:48:52,274 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:52,277 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:52,459 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:48:52,460 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:48:52,741 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:48:52,958 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@18afbe36, org.springframework.security.web.context.SecurityContextPersistenceFilter@6d569a60, org.springframework.security.web.header.HeaderWriterFilter@44e5b824, org.springframework.security.web.authentication.logout.LogoutFilter@46b5bab4, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@aa6289e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@625255fd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b9ff50b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@e226320, org.springframework.security.web.session.SessionManagementFilter@1b21f86b, org.springframework.security.web.access.ExceptionTranslationFilter@a40b97e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7bfe7c21]
2024-12-08 14:48:52,998 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:48:53,131 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:48:53,134 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 44011 (http) with context path ''
2024-12-08 14:48:53,389 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.954 seconds (JVM running for 20.113)
2024-12-08 14:48:53,489 INFO  [http-nio-auto-2-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:48:53,489 INFO  [http-nio-auto-2-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:48:53,491 INFO  [http-nio-auto-2-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:48:53,502 WARN  [http-nio-auto-2-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:44011/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "username": "admin",
    "password": "password"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:53 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:48:53.637+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
Request method:	POST
Request URI:	http://localhost:44011/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "username": "admin",
    "password": "password"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:53 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:48:53.683+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:48:53,712 WARN  [http-nio-auto-2-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:44011/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "username": "admin",
    "password": "password"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:53 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:48:53.735+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:48:53,752 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:48:53,752 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:48:53,753 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:48:53,755 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:48:53,759 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-2"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m3[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 2.265 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_OrdersRestControllerTest[m
[[1;31mERROR[m] testGetOrder  Time elapsed: 0.2 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run03_OrdersRestControllerTest.getAccessToken(v3_gpt4o_run03_OrdersRestControllerTest.java:110)
	at market.v3_gpt4o_run03_OrdersRestControllerTest.testGetOrder(v3_gpt4o_run03_OrdersRestControllerTest.java:84)

[[1;31mERROR[m] testInternalServerError  Time elapsed: 0.04 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run03_OrdersRestControllerTest.getAccessToken(v3_gpt4o_run03_OrdersRestControllerTest.java:110)
	at market.v3_gpt4o_run03_OrdersRestControllerTest.testInternalServerError(v3_gpt4o_run03_OrdersRestControllerTest.java:99)

[[1;31mERROR[m] testGetOrders  Time elapsed: 0.054 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run03_OrdersRestControllerTest.getAccessToken(v3_gpt4o_run03_OrdersRestControllerTest.java:110)
	at market.v3_gpt4o_run03_OrdersRestControllerTest.testGetOrders(v3_gpt4o_run03_OrdersRestControllerTest.java:69)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:48:53,811 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:48:53,812 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:48:53,813 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:48:53,813 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:48:54,135 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:48:54,173 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 8 JPA repository interfaces.
2024-12-08 14:48:54,236 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:54,258 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5ad2dba0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:54,261 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:54,314 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:48:54,316 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:48:54,316 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:48:54,317 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:48:54,334 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:48:54,334 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 520 ms
2024-12-08 14:48:54,376 INFO  [main] c.z.h.HikariDataSource - HikariPool-3 - Starting...
2024-12-08 14:48:54,378 INFO  [main] c.z.h.HikariDataSource - HikariPool-3 - Start completed.
2024-12-08 14:48:54,421 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:48:54,451 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:48:54,474 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:54,478 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:54,656 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:48:54,657 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:48:54,869 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:48:55,073 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@13aaba3b, org.springframework.security.web.context.SecurityContextPersistenceFilter@1a97f077, org.springframework.security.web.header.HeaderWriterFilter@6c058d4e, org.springframework.security.web.authentication.logout.LogoutFilter@4a209fda, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@319cc958, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@79430155, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@396c9cce, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@695abc0a, org.springframework.security.web.session.SessionManagementFilter@b5bbe0a, org.springframework.security.web.access.ExceptionTranslationFilter@34dafda5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@594f8f65]
2024-12-08 14:48:55,113 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:48:55,235 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:48:55,237 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 46571 (http) with context path ''
2024-12-08 14:48:55,411 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.647 seconds (JVM running for 22.136)
2024-12-08 14:48:55,502 INFO  [http-nio-auto-3-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:48:55,503 INFO  [http-nio-auto-3-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:48:55,504 INFO  [http-nio-auto-3-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:48:55,509 WARN  [http-nio-auto-3-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:46571/customer/cart/delivery?included=true
Proxy:			<none>
Request params:	<none>
Query params:	included=true
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart/delivery",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:55,548 WARN  [http-nio-auto-3-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:48:55,704 WARN  [http-nio-auto-3-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:48:55,767 WARN  [http-nio-auto-3-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='cartItemDTO', description='uri=/customer/cart', fieldErrors=[{field='quantity', message='Value shall be a positive number'}]}
Request method:	PUT
Request URI:	http://localhost:46571/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": -1
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart",
    "entityName": "cartItemDTO",
    "fieldErrors": [
        {
            "field": "quantity",
            "message": "Value shall be a positive number"
        }
    ]
}
2024-12-08 14:48:55,854 WARN  [http-nio-auto-3-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:46571/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:55,898 WARN  [http-nio-auto-3-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	DELETE
Request URI:	http://localhost:46571/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:55,927 WARN  [http-nio-auto-3-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:46571/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:55,964 WARN  [http-nio-auto-3-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:46571/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:55,994 WARN  [http-nio-auto-3-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:46571/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": 2
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:56,021 WARN  [http-nio-auto-3-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:48:56,058 WARN  [http-nio-auto-3-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:46571/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 999,
    "quantity": 2
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:56,096 WARN  [http-nio-auto-3-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
2024-12-08 14:48:56,124 WARN  [http-nio-auto-3-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:48:56,138 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:48:56,138 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:48:56,139 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:48:56,143 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:48:56,148 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-3"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m13[m, [1;31mFailures: [0;1;31m8[m, Errors: 0, Skipped: 0, Time elapsed: 2.356 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_CartRestControllerTest[m
[[1;31mERROR[m] testSetDelivery  Time elapsed: 0.058 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testSetDelivery(v3_gpt4o_run03_CartRestControllerTest.java:106)

[[1;31mERROR[m] testAddItemToCartInvalidQuantity  Time elapsed: 0.065 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <406>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidQuantity(v3_gpt4o_run03_CartRestControllerTest.java:233)

[[1;31mERROR[m] testPayByCard  Time elapsed: 0.093 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testPayByCard(v3_gpt4o_run03_CartRestControllerTest.java:123)

[[1;31mERROR[m] testClearCart  Time elapsed: 0.037 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testClearCart(v3_gpt4o_run03_CartRestControllerTest.java:94)

[[1;31mERROR[m] testGetCart  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testGetCart(v3_gpt4o_run03_CartRestControllerTest.java:65)

[[1;31mERROR[m] testPayByCardEmptyCart  Time elapsed: 0.036 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testPayByCardEmptyCart(v3_gpt4o_run03_CartRestControllerTest.java:216)

[[1;31mERROR[m] testAddItemToCart  Time elapsed: 0.031 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testAddItemToCart(v3_gpt4o_run03_CartRestControllerTest.java:83)

[[1;31mERROR[m] testAddItemToCartInvalidProduct  Time elapsed: 0.038 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidProduct(v3_gpt4o_run03_CartRestControllerTest.java:200)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:48:56,191 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:48:56,192 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:48:56,194 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:48:56,194 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:48:56,466 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:48:56,499 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 8 JPA repository interfaces.
2024-12-08 14:48:56,555 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:56,579 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7745d513' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:56,609 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:56,659 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:48:56,660 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:48:56,660 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:48:56,661 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:48:56,678 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:48:56,678 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 484 ms
2024-12-08 14:48:56,712 INFO  [main] c.z.h.HikariDataSource - HikariPool-4 - Starting...
2024-12-08 14:48:56,714 INFO  [main] c.z.h.HikariDataSource - HikariPool-4 - Start completed.
2024-12-08 14:48:56,740 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:48:56,764 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:48:56,780 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:56,782 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:56,933 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:48:56,933 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:48:57,144 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:48:57,336 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23080a42, org.springframework.security.web.context.SecurityContextPersistenceFilter@393e9503, org.springframework.security.web.header.HeaderWriterFilter@4c863c99, org.springframework.security.web.authentication.logout.LogoutFilter@2f401848, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@56612f2d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e0fbdcf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@53103e63, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21e44227, org.springframework.security.web.session.SessionManagementFilter@762985, org.springframework.security.web.access.ExceptionTranslationFilter@7b6d9962, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3bb3ee98]
2024-12-08 14:48:57,372 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:48:57,489 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:48:57,492 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37555 (http) with context path ''
2024-12-08 14:48:57,656 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.5 seconds (JVM running for 24.381)
2024-12-08 14:48:57,739 INFO  [http-nio-auto-4-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:48:57,739 INFO  [http-nio-auto-4-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:48:57,741 INFO  [http-nio-auto-4-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	GET
Request URI:	http://localhost:37555/customer
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:48:58.046+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:48:58,120 WARN  [http-nio-auto-4-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:37555/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
Request method:	GET
Request URI:	http://localhost:37555/trigger-internal-server-error
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:48:58.146+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/trigger-internal-server-error"
}
Request method:	GET
Request URI:	http://localhost:37555/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

[
    {
        "productId": 1,
        "distillery": "Ardbeg",
        "name": "Ten",
        "price": 4420.0,
        "age": 10,
        "volume": 700,
        "alcohol": 46.0,
        "description": "Ten Years Old is the basis of the Ardbeg range. After 10 years of maturation in ex-bourbon casks, the whiskey bottled at 46% ABV without cold filtering. The characteristic peat, although clearly present but in perfect balance with the natural sweetness and not predominant in the taste.",
        "available": false,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/1"
            }
        ]
    },
    {
        "productId": 2,
        "distillery": "Ardbeg",
        "name": "Uigeadail",
        "price": 7020.0,
        "age": 0,
        "volume": 700,
        "alcohol": 54.2,
        "description": "Ardbeg Uigedael is named after Loch Uigedael, the lake in the grounds of the distillery Ardbeg which are the water is an important factor in the distilling process. The Uigedael a vatted malt, bottled at 54.2% ABV without cold filtering. Ardbeg Uigedael has no age indication for the expression consists of various malts of different ages. Malts are used partly matured in ex-bourbon and partly on ex-sherry casks.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/2"
            }
        ]
    },
    {
        "productId": 3,
        "distillery": "Balvenie",
        "name": "12 y.o. Doublewood",
        "price": 5403.0,
        "age": 12,
        "volume": 700,
        "alcohol": 40.0,
        "description": "Has clear influences from both bourbon and sherry wood. This malt has only 12 years aged in bourbon casks and then 3 months in young Oloroso casks. The peppery character from the bourbon barrels, penetrates, as it were by the rich and full aroma of Oloroso casks it. The Balvenie Double Wood is therefore a very complex malt.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/3"
            }
        ]
    },
    {
        "productId": 4,
        "distillery": "Caol Ila",
        "name": "12 y.o.",
        "price": 4913.0,
        "age": 12,
        "volume": 700,
        "alcohol": 43.0,
        "description": "Smoked ham comes across delicately with citrus and cigar leaves. Fresh and smoky, probably the best part of this whisky. With an almost full body, oil and tar meet subtle smoke. Hints of sweet tastes like honey. Some spices like pepper combined with little sweetness.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/4"
            }
        ]
    },
    {
        "productId": 5,
        "distillery": "Dalwhinnie",
        "name": "15 y.o.",
        "price": 6517.0,
        "age": 15,
        "volume": 750,
        "alcohol": 43.0,
        "description": "A good introduction to the delights of single malt whisky ‚Äì elegant, smooth and medium-bodied, with a light, fruity palate and a whiff of heather on the finish. Part of Diageo's Classic Malt range. ",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/5"
            }
        ]
    },
    {
        "productId": 6,
        "distillery": "Lagavulin",
        "name": "16 y.o.",
        "price": 6620.0,
        "age": 16,
        "volume": 750,
        "alcohol": 43.0,
        "description": "The Islay representative in the 'Classic Malts' series is a deep, dry and exceptionally peaty bruiser. Probably the most pungent of all Islay malts, Lagavulin is not for the faint-hearted but inspires fanatical devotion in its many followers.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/6"
            }
        ]
    },
    {
        "productId": 7,
        "distillery": "Laphroaig",
        "name": "Quarter Cask",
        "price": 5100.0,
        "age": 0,
        "volume": 700,
        "alcohol": 48.0,
        "description": "A vibrant young Laphroaig whose maturation has been accelerated by ageing in quarter casks. This shows soft sweetness and a velvety feel when first tasted, then the intense peatiness so unique to Laphroaig comes bursting through. A terrific whisky and great value.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/7"
            }
        ]
    },
    {
        "productId": 8,
        "distillery": "Springbank",
        "name": "12 y.o. Cask Strength Batch 6",
        "price": 8127.0,
        "age": 12,
        "volume": 700,
        "alcohol": 53.1,
        "description": "Like a storm gathering of the Kintyre coast, dark and ominous, yet tastes so good. The richness comes from the high percentage of sherry casks used in maturation. This is a truly classic Springbank, best enjoyed after dinner, or with your favourite cigar.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/8"
            }
        ]
    },
    {
        "productId": 9,
        "distillery": "Springbank",
        "name": "18 y.o.",
        "price": 14490.0,
        "age": 18,
        "volume": 700,
        "alcohol": 46.0,
        "description": "This heavily sherried 18-year-old Springbank has been bottled by Mark Reynier as part of his Renegade series. Distilled in 1995, this sherry hogshead was aged for 10 years in Campbeltown and then moved to Bruichladdich for a further eight years.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/9"
            }
        ]
    },
    {
        "productId": 10,
        "distillery": "Talisker",
        "name": "10 y.o.",
        "price": 4683.0,
        "age": 10,
        "volume": 750,
        "alcohol": 45.8,
        "description": "Powerful peat smoke with the salinity of sea water and the moisture of fresh oysters. Full sweetness of dried fruit with smoke and strong aromas of malted barley, warm and intense. Peppery in the mouth. Big, long, warming and peppery on the finish with an attractive sweetness.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/10"
            }
        ]
    },
    {
        "productId": 11,
        "distillery": "Glenkinchie",
        "name": "12 y.o.",
        "price": 4547.0,
        "age": 12,
        "volume": 700,
        "alcohol": 43.0,
        "description": "A light, delicate whiskey; sweet and creamy with a subtle floral aroma. This subtle, refined Lowland is ideal as an aperitif; try it straight from the fridge or freezer.",
        "available": false,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:37555/products/11"
            }
        ]
    }
]
2024-12-08 14:48:58,249 WARN  [http-nio-auto-4-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:48:58,273 WARN  [http-nio-auto-4-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:48:58,294 WARN  [http-nio-auto-4-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:48:58,316 WARN  [http-nio-auto-4-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/9999', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:37555/customer/orders/9999
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	orderId=9999
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/orders/9999",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:48:58,353 WARN  [http-nio-auto-4-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:48:58,382 WARN  [http-nio-auto-4-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:48:58,443 WARN  [http-nio-auto-4-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='name', message='Only letters, whitespace, hyphen and apostrophe are allowed'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='password', message='Length shall be between 6 and 50 characters'}, {field='address', message='Special characters are not allowed'}, {field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:48:58,486 WARN  [http-nio-auto-4-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='address', message='Pattern.contactsDTO.address'}]}
2024-12-08 14:48:58,522 WARN  [http-nio-auto-4-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}]}
Request method:	POST
Request URI:	http://localhost:37555/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "1234-5678-9876-5432"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:48:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart/pay",
    "entityName": "creditCardDTO",
    "fieldErrors": [
        {
            "field": "ccNumber",
            "message": "Not a valid credit card number"
        }
    ]
}
2024-12-08 14:48:58,537 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:48:58,537 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:48:58,538 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:48:58,541 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:48:58,547 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-4"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m14[m, [1;31mFailures: [0;1;31m6[m, Errors: 0, Skipped: 0, Time elapsed: 2.374 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_RestExceptionHandlerTest[m
[[1;31mERROR[m] testGetCustomerNotFound  Time elapsed: 0.334 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetCustomerNotFound(v3_gpt4o_run02_RestExceptionHandlerTest.java:65)

[[1;31mERROR[m] testGetContactsNotFound  Time elapsed: 0.027 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetContactsNotFound(v3_gpt4o_run02_RestExceptionHandlerTest.java:125)

[[1;31mERROR[m] testInternalServerError  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <404>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testInternalServerError(v3_gpt4o_run02_RestExceptionHandlerTest.java:195)

[[1;31mERROR[m] testGetProductsUnauthorized  Time elapsed: 0.094 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <401> but was <200>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetProductsUnauthorized(v3_gpt4o_run02_RestExceptionHandlerTest.java:165)

[[1;31mERROR[m] testGetOrderNotFound  Time elapsed: 0.023 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetOrderNotFound(v3_gpt4o_run02_RestExceptionHandlerTest.java:156)

[[1;31mERROR[m] testPayByCardWithoutAuth  Time elapsed: 0.038 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <401> but was <406>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testPayByCardWithoutAuth(v3_gpt4o_run02_RestExceptionHandlerTest.java:115)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:48:58,590 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:48:58,591 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:48:58,592 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:48:58,592 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:48:58,862 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:48:58,896 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 8 JPA repository interfaces.
2024-12-08 14:48:58,954 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:58,974 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@337a7e9c' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:58,976 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:48:59,021 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:48:59,022 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:48:59,022 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:48:59,023 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:48:59,038 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:48:59,038 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 446 ms
2024-12-08 14:48:59,082 INFO  [main] c.z.h.HikariDataSource - HikariPool-5 - Starting...
2024-12-08 14:48:59,084 INFO  [main] c.z.h.HikariDataSource - HikariPool-5 - Start completed.
2024-12-08 14:48:59,114 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:48:59,158 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:48:59,172 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:59,174 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:48:59,360 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:48:59,360 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:48:59,607 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:48:59,803 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b2680d2, org.springframework.security.web.context.SecurityContextPersistenceFilter@599b93e, org.springframework.security.web.header.HeaderWriterFilter@66ceca24, org.springframework.security.web.authentication.logout.LogoutFilter@1a6fde89, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@ae52844, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45c11aeb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@55ce679d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35d10062, org.springframework.security.web.session.SessionManagementFilter@75ce5e1a, org.springframework.security.web.access.ExceptionTranslationFilter@5282434d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7969b9e5]
2024-12-08 14:48:59,833 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:48:59,945 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:48:59,948 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42935 (http) with context path ''
2024-12-08 14:49:00,099 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.548 seconds (JVM running for 26.824)
2024-12-08 14:49:00,150 INFO  [http-nio-auto-5-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:00,150 INFO  [http-nio-auto-5-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:00,152 INFO  [http-nio-auto-5-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:00,217 WARN  [http-nio-auto-5-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:42935/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:00 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:49:00,247 WARN  [http-nio-auto-5-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}, {field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:49:00,271 WARN  [http-nio-auto-5-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:42935/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:00 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:49:00,295 WARN  [http-nio-auto-5-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:42935/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:00 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:49:00,324 WARN  [http-nio-auto-5-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:42935/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:00 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:49:00,337 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:49:00,338 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:00,339 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:00,343 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:49:00,347 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-5"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m4[m, Errors: 0, Skipped: 0, Time elapsed: 1.778 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_CustomerRestControllerTest[m
[[1;31mERROR[m] testSchemaValidation  Time elapsed: 0.062 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testSchemaValidation(v3_gpt4o_run02_CustomerRestControllerTest.java:158)

[[1;31mERROR[m] testCreateCustomerEmailExists  Time elapsed: 0.026 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomerEmailExists(v3_gpt4o_run02_CustomerRestControllerTest.java:85)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomer(v3_gpt4o_run02_CustomerRestControllerTest.java:69)

[[1;31mERROR[m] testGetCustomer  Time elapsed: 0.028 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testGetCustomer(v3_gpt4o_run02_CustomerRestControllerTest.java:107)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:00,402 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:00,403 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:00,405 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:00,405 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:00,661 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:00,693 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:00,741 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:00,763 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4445fbfe' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:00,765 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:00,814 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:00,815 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:49:00,816 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:00,816 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:00,832 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:00,832 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 427 ms
2024-12-08 14:49:00,868 INFO  [main] c.z.h.HikariDataSource - HikariPool-6 - Starting...
2024-12-08 14:49:00,870 INFO  [main] c.z.h.HikariDataSource - HikariPool-6 - Start completed.
2024-12-08 14:49:00,889 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:00,908 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:00,926 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:00,928 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:01,048 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:01,048 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:01,265 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:01,440 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52887b72, org.springframework.security.web.context.SecurityContextPersistenceFilter@393dcfd7, org.springframework.security.web.header.HeaderWriterFilter@1aa25817, org.springframework.security.web.authentication.logout.LogoutFilter@3105fa73, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@53effb95, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2dbcbee7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25d639a7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6ed531f1, org.springframework.security.web.session.SessionManagementFilter@1d1bc3e7, org.springframework.security.web.access.ExceptionTranslationFilter@468a43f4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1b28d673]
2024-12-08 14:49:01,472 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:01,608 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:49:01,611 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 44419 (http) with context path ''
2024-12-08 14:49:01,747 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.396 seconds (JVM running for 28.472)
2024-12-08 14:49:01,798 INFO  [http-nio-auto-6-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:01,798 INFO  [http-nio-auto-6-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:01,800 INFO  [http-nio-auto-6-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:01,837 WARN  [http-nio-auto-6-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:49:02,191 ERROR [http-nio-auto-6-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='JSON parse error: Unexpected character ('i' (code 105)): was expecting double-quote to start field name; nested exception is com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name
 at [Source: (PushbackInputStream); line: 1, column: 3]', entityName='null', description='uri=/register', fieldErrors=[]}
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unexpected character ('i' (code 105)): was expecting double-quote to start field name; nested exception is com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name
 at [Source: (PushbackInputStream); line: 1, column: 3]
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:387)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:342)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:186)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:158)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:131)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name
 at [Source: (PushbackInputStream); line: 1, column: 3]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1851)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:707)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:632)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleOddName(UTF8StreamJsonParser.java:2049)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._parseName(UTF8StreamJsonParser.java:1700)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:761)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:160)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4526)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3521)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:376)
	... 89 more
2024-12-08 14:49:02,232 WARN  [http-nio-auto-6-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:44419/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "phone": "+7 123 456 78 90",
    "name": "Ivan Petrov",
    "address": "Riesstrasse 18",
    "password": "petrov"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:01 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:02,269 WARN  [http-nio-auto-6-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:44419/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "phone": "+7 123 456 78 90",
    "name": "Ivan Petrov",
    "address": "Riesstrasse 18",
    "password": "petrov"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:01 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:02,302 WARN  [http-nio-auto-6-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:44419/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "phone": "+7 123 456 78 90",
    "name": "Ivan Petrov",
    "address": "Riesstrasse 18",
    "password": "petrov"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:01 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:02,315 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:49:02,315 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:02,316 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:02,318 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:49:02,322 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-6"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m7[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.954 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_CustomerRestControllerTest[m
[[1;31mERROR[m] testCreateCustomerEmailExists  Time elapsed: 0.023 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomerEmailExists(v3_gpt4o_run03_CustomerRestControllerTest.java:111)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.036 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomer(v3_gpt4o_run03_CustomerRestControllerTest.java:87)

[[1;31mERROR[m] testGetCustomerAfterRegistration  Time elapsed: 0.034 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_CustomerRestControllerTest.testGetCustomerAfterRegistration(v3_gpt4o_run03_CustomerRestControllerTest.java:159)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:02,372 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:02,373 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:02,374 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:02,374 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:02,658 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:02,696 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:02,753 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:02,780 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@68b8d969' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:02,782 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:02,842 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:02,843 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:49:02,844 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:02,844 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:02,860 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:02,860 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 485 ms
2024-12-08 14:49:02,897 INFO  [main] c.z.h.HikariDataSource - HikariPool-7 - Starting...
2024-12-08 14:49:02,898 INFO  [main] c.z.h.HikariDataSource - HikariPool-7 - Start completed.
2024-12-08 14:49:02,920 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:02,949 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:02,973 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:02,977 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:03,092 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:03,092 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:03,296 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:03,465 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@59a73e0d, org.springframework.security.web.context.SecurityContextPersistenceFilter@e2d5322, org.springframework.security.web.header.HeaderWriterFilter@41699c49, org.springframework.security.web.authentication.logout.LogoutFilter@9efd55, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3af68ad5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5d1ea437, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5018e009, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39ca5f3b, org.springframework.security.web.session.SessionManagementFilter@ed746a9, org.springframework.security.web.access.ExceptionTranslationFilter@42d23656, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5ceadd83]
2024-12-08 14:49:03,494 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:03,603 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:49:03,606 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42729 (http) with context path ''
2024-12-08 14:49:03,744 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.417 seconds (JVM running for 30.469)
2024-12-08 14:49:03,788 INFO  [http-nio-auto-7-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:03,788 INFO  [http-nio-auto-7-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:03,790 INFO  [http-nio-auto-7-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:03,907 WARN  [http-nio-auto-7-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:04,180 WARN  [http-nio-auto-7-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/-1', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:04,194 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:49:04,194 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:04,195 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:04,198 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:49:04,201 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-7"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m7[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.872 s - in market.[1mv3_gpt4o_run01_ProductsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:04,230 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:04,231 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:04,232 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:04,232 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:04,518 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:04,546 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:04,595 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:04,617 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@322a7f20' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:04,619 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:04,662 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:04,663 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:49:04,664 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:04,664 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:04,679 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:04,679 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 446 ms
2024-12-08 14:49:04,712 INFO  [main] c.z.h.HikariDataSource - HikariPool-8 - Starting...
2024-12-08 14:49:04,713 INFO  [main] c.z.h.HikariDataSource - HikariPool-8 - Start completed.
2024-12-08 14:49:04,729 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:04,747 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:04,762 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:04,764 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:04,901 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:04,901 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:05,086 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:05,241 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@434c72ab, org.springframework.security.web.context.SecurityContextPersistenceFilter@236b1989, org.springframework.security.web.header.HeaderWriterFilter@57ca9cef, org.springframework.security.web.authentication.logout.LogoutFilter@509a3bf3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@25ab9ff8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@37be7e23, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3410a1df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74773bd4, org.springframework.security.web.session.SessionManagementFilter@58f8f638, org.springframework.security.web.access.ExceptionTranslationFilter@4121a75, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3963ec41]
2024-12-08 14:49:05,266 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:05,374 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:49:05,376 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 38003 (http) with context path ''
2024-12-08 14:49:05,536 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.332 seconds (JVM running for 32.261)
2024-12-08 14:49:05,613 INFO  [http-nio-auto-8-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:05,613 INFO  [http-nio-auto-8-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:05,615 INFO  [http-nio-auto-8-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:05,664 WARN  [http-nio-auto-8-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/99999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:05,715 WARN  [http-nio-auto-8-exec-3] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
Request method:	POST
Request URI:	http://localhost:38003/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "volume": 750,
    "name": "New Product",
    "description": "A new product",
    "available": true,
    "price": 19.99,
    "alcohol": 40
}

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:05 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:05.717+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/products"
}
2024-12-08 14:49:05,807 WARN  [http-nio-auto-8-exec-5] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
Request method:	POST
Request URI:	http://localhost:38003/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "alcohol": 0,
    "price": -1,
    "volume": 0,
    "name": "",
    "available": true
}

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:05 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:05.808+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/products"
}
2024-12-08 14:49:05,941 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:49:05,941 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:05,942 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:05,944 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:49:05,947 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-8"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m8[m, [1;31mFailures: [0;1;31m2[m, [1;31mErrors: [0;1;31m2[m, Skipped: 0, Time elapsed: 1.741 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_ProductsRestControllerTest[m
[[1;31mERROR[m] testSchemaValidationGetSingleProduct  Time elapsed: 0.052 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetSingleProduct(v3_gpt4o_run03_ProductsRestControllerTest.java:172)

[[1;31mERROR[m] testCreateProduct  Time elapsed: 0.027 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <405>.

	at market.v3_gpt4o_run03_ProductsRestControllerTest.testCreateProduct(v3_gpt4o_run03_ProductsRestControllerTest.java:120)

[[1;31mERROR[m] testCreateProductWithInvalidData  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <405>.

	at market.v3_gpt4o_run03_ProductsRestControllerTest.testCreateProductWithInvalidData(v3_gpt4o_run03_ProductsRestControllerTest.java:142)

[[1;31mERROR[m] testSchemaValidationGetProducts  Time elapsed: 0.039 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetProducts(v3_gpt4o_run03_ProductsRestControllerTest.java:159)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:05,991 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:05,991 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:05,993 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:05,993 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:06,223 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:06,252 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:06,306 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:06,329 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@64419fd0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:06,331 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:06,385 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:06,386 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:49:06,387 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:06,387 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:06,402 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:06,402 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 409 ms
2024-12-08 14:49:06,437 INFO  [main] c.z.h.HikariDataSource - HikariPool-9 - Starting...
2024-12-08 14:49:06,439 INFO  [main] c.z.h.HikariDataSource - HikariPool-9 - Start completed.
2024-12-08 14:49:06,455 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:06,481 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:06,504 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:06,506 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:06,645 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:06,646 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:06,827 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:06,997 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2959e51c, org.springframework.security.web.context.SecurityContextPersistenceFilter@443c9820, org.springframework.security.web.header.HeaderWriterFilter@4013c194, org.springframework.security.web.authentication.logout.LogoutFilter@13efae93, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@26f0d841, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5dd5d00a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@314b545, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b5d1093, org.springframework.security.web.session.SessionManagementFilter@22e24e94, org.springframework.security.web.access.ExceptionTranslationFilter@3fb4d89d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@dd912d7]
2024-12-08 14:49:07,030 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:07,176 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:49:07,179 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 39251 (http) with context path ''
2024-12-08 14:49:07,293 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.343 seconds (JVM running for 34.018)
2024-12-08 14:49:07,336 INFO  [http-nio-auto-9-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:07,336 INFO  [http-nio-auto-9-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:07,338 INFO  [http-nio-auto-9-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:07,354 WARN  [http-nio-auto-9-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:39251/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "phone": "+7 987 654 32 10",
    "address": "New Address"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:07 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:07,374 WARN  [http-nio-auto-9-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:39251/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:07 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:07,393 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:49:07,393 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:07,394 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:07,396 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:49:07,400 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-9"]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:07,442 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:07,443 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:07,444 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:07,444 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:07,694 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:07,746 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:07,816 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:07,841 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@17cbfeaa' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:07,844 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:07,907 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:07,909 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:49:07,909 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:07,910 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:07,929 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:07,930 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 486 ms
2024-12-08 14:49:08,017 INFO  [main] c.z.h.HikariDataSource - HikariPool-10 - Starting...
2024-12-08 14:49:08,018 INFO  [main] c.z.h.HikariDataSource - HikariPool-10 - Start completed.
2024-12-08 14:49:08,039 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:08,063 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:08,082 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:08,084 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:08,206 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:08,206 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:08,377 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:08,526 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67e54576, org.springframework.security.web.context.SecurityContextPersistenceFilter@3b9edfd5, org.springframework.security.web.header.HeaderWriterFilter@5c7a1cfe, org.springframework.security.web.authentication.logout.LogoutFilter@2287bf7d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@136459a6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29083f8a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25995bb9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@66a42b98, org.springframework.security.web.session.SessionManagementFilter@6ea49ba3, org.springframework.security.web.access.ExceptionTranslationFilter@66de8b5f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@ea3403]
2024-12-08 14:49:08,554 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:08,654 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:49:08,657 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 40249 (http) with context path ''
2024-12-08 14:49:08,801 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.39 seconds (JVM running for 35.526)
2024-12-08 14:49:08,831 INFO  [http-nio-auto-10-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:08,831 INFO  [http-nio-auto-10-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:08,833 INFO  [http-nio-auto-10-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:08,837 WARN  [http-nio-auto-10-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:40249/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:08 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:08,882 WARN  [http-nio-auto-10-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:40249/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "phone": "+7 987 654 32 10",
    "address": "New Address"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:08 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:08,905 WARN  [http-nio-auto-10-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:08,936 WARN  [http-nio-auto-10-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='address', message='Pattern.contactsDTO.address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
Request method:	PUT
Request URI:	http://localhost:40249/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "phone": "Invalid Phone",
    "address": "Invalid Address #$%^"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:08 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/contacts",
    "entityName": "contactsDTO",
    "fieldErrors": [
        {
            "field": "address",
            "message": "Pattern.contactsDTO.address"
        },
        {
            "field": "phone",
            "message": "Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)"
        }
    ]
}
2024-12-08 14:49:08,962 WARN  [http-nio-auto-10-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:08,976 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:49:08,977 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:08,977 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:08,980 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:49:08,983 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-10"]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:09,030 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:09,031 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:09,032 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:09,032 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:09,330 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:09,368 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:09,430 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:09,486 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@76f141f1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:09,488 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:09,554 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:09,556 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:49:09,556 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:09,557 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:09,577 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:09,577 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 545 ms
2024-12-08 14:49:09,626 INFO  [main] c.z.h.HikariDataSource - HikariPool-11 - Starting...
2024-12-08 14:49:09,628 INFO  [main] c.z.h.HikariDataSource - HikariPool-11 - Start completed.
2024-12-08 14:49:09,649 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:09,673 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:09,694 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:09,697 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:09,848 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:09,848 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:10,058 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:10,212 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@19df678f, org.springframework.security.web.context.SecurityContextPersistenceFilter@2b020e6, org.springframework.security.web.header.HeaderWriterFilter@4975c137, org.springframework.security.web.authentication.logout.LogoutFilter@506a09aa, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5410b366, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e60c202, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@397bcc80, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b7a1bd8, org.springframework.security.web.session.SessionManagementFilter@1d4ef028, org.springframework.security.web.access.ExceptionTranslationFilter@8fa8edc, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4944fa20]
2024-12-08 14:49:10,239 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:10,333 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:49:10,335 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 41223 (http) with context path ''
2024-12-08 14:49:10,443 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.443 seconds (JVM running for 37.168)
2024-12-08 14:49:10,459 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:49:10,459 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:10,461 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:49:10,464 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-11"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m9[m, [1;31mFailures: [0;1;31m5[m, Errors: 0, Skipped: 0, Time elapsed: 4.485 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_ContactsRestControllerTest[m
[[1;31mERROR[m] testUpdateContactsSuccess  Time elapsed: 0.046 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSuccess(v3_gpt4o_run01_ContactsRestControllerTest.java:90)

[[1;31mERROR[m] testGetContactsSuccess  Time elapsed: 0.016 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testGetContactsSuccess(v3_gpt4o_run01_ContactsRestControllerTest.java:65)

[[1;31mERROR[m] testSchemaValidation  Time elapsed: 0.032 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testSchemaValidation(v3_gpt4o_run01_ContactsRestControllerTest.java:168)

[[1;31mERROR[m] testUpdateContactsSchemaValidation  Time elapsed: 0.041 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSchemaValidation(v3_gpt4o_run01_ContactsRestControllerTest.java:185)

[[1;31mERROR[m] testUpdateContactsInvalidInput  Time elapsed: 0.035 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <406>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsInvalidInput(v3_gpt4o_run01_ContactsRestControllerTest.java:122)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:10,493 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:10,493 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:10,494 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:10,494 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:10,833 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:10,865 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:10,933 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:10,961 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@44dc66f0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:10,963 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:11,016 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:11,017 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:49:11,018 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:11,018 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:11,033 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:11,033 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 538 ms
2024-12-08 14:49:11,063 INFO  [main] c.z.h.HikariDataSource - HikariPool-12 - Starting...
2024-12-08 14:49:11,065 INFO  [main] c.z.h.HikariDataSource - HikariPool-12 - Start completed.
2024-12-08 14:49:11,098 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:11,131 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:11,149 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:11,151 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:11,273 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:11,273 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:11,451 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:11,629 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@248b78bb, org.springframework.security.web.context.SecurityContextPersistenceFilter@6d1ffab7, org.springframework.security.web.header.HeaderWriterFilter@74bab1f6, org.springframework.security.web.authentication.logout.LogoutFilter@d02745, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@17759e9b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e21221f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f35192c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7eefe85a, org.springframework.security.web.session.SessionManagementFilter@368f7ff4, org.springframework.security.web.access.ExceptionTranslationFilter@402a60f3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@56466ad5]
2024-12-08 14:49:11,673 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:11,817 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:49:11,821 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37143 (http) with context path ''
2024-12-08 14:49:11,985 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.517 seconds (JVM running for 38.71)
2024-12-08 14:49:12,047 INFO  [http-nio-auto-12-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:12,047 INFO  [http-nio-auto-12-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:12,049 INFO  [http-nio-auto-12-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	GET
Request URI:	http://localhost:37143/customer?name=NonExistentUser
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:12 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:12.238+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:49:12,269 WARN  [http-nio-auto-12-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:37143/customer/cart?name=ivan.petrov@yandex.ru
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 9999,
    "quantity": 1
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:12 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:12,288 WARN  [http-nio-auto-12-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:49:12,304 ERROR [http-nio-auto-12-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalidBoolean]', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalidBoolean]
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalArgumentException: Invalid boolean value [invalidBoolean]
	at org.springframework.beans.propertyeditors.CustomBooleanEditor.setAsText(CustomBooleanEditor.java:154)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:49:12,347 WARN  [http-nio-auto-12-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:49:12,401 WARN  [http-nio-auto-12-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:37143/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:12 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
Request method:	GET
Request URI:	http://localhost:37143/products/1
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:12 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "productId": 1,
    "distillery": "Ardbeg",
    "name": "Ten",
    "price": 4420.0,
    "age": 10,
    "volume": 700,
    "alcohol": 46.0,
    "description": "Ten Years Old is the basis of the Ardbeg range. After 10 years of maturation in ex-bourbon casks, the whiskey bottled at 46% ABV without cold filtering. The characteristic peat, although clearly present but in perfect balance with the natural sweetness and not predominant in the taste.",
    "available": false,
    "_links": {
        "All products": {
            "href": "http://localhost:37143/products"
        }
    }
}
2024-12-08 14:49:12,468 WARN  [http-nio-auto-12-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:12,490 WARN  [http-nio-auto-12-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}, {field='ccNumber', message='Card number shall consist of 13-16 digits'}]}
2024-12-08 14:49:12,503 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:49:12,503 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:12,504 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:12,507 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:49:12,510 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-12"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m10[m, [1;31mFailures: [0;1;31m4[m, Errors: 0, Skipped: 0, Time elapsed: 2.036 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_RestExceptionHandlerTest[m
[[1;31mERROR[m] testGetCustomer_NotFound  Time elapsed: 0.222 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testGetCustomer_NotFound(v3_gpt4o_run01_RestExceptionHandlerTest.java:70)

[[1;31mERROR[m] testAddItemToCart_InvalidProduct  Time elapsed: 0.034 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testAddItemToCart_InvalidProduct(v3_gpt4o_run01_RestExceptionHandlerTest.java:94)

[[1;31mERROR[m] testCreateCustomer_Duplicate  Time elapsed: 0.038 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testCreateCustomer_Duplicate(v3_gpt4o_run01_RestExceptionHandlerTest.java:148)

[[1;31mERROR[m] testGetProduct_Unauthorized  Time elapsed: 0.045 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <401> but was <200>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testGetProduct_Unauthorized(v3_gpt4o_run01_RestExceptionHandlerTest.java:189)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:12,537 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:12,538 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:12,540 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:12,540 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:12,778 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:12,806 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:12,850 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:12,871 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3ccf4c69' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:12,873 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:12,923 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:12,924 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:49:12,925 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:12,925 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:12,942 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:12,942 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 402 ms
2024-12-08 14:49:12,978 INFO  [main] c.z.h.HikariDataSource - HikariPool-13 - Starting...
2024-12-08 14:49:12,979 INFO  [main] c.z.h.HikariDataSource - HikariPool-13 - Start completed.
2024-12-08 14:49:12,992 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:13,010 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:13,021 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:13,022 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:13,116 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:13,116 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:13,311 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:13,456 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2d56ef26, org.springframework.security.web.context.SecurityContextPersistenceFilter@183a4227, org.springframework.security.web.header.HeaderWriterFilter@39451e1a, org.springframework.security.web.authentication.logout.LogoutFilter@5cac4ecd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@67ade4cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@454db9da, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@54e9daa7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@e2f1d28, org.springframework.security.web.session.SessionManagementFilter@213c7b48, org.springframework.security.web.access.ExceptionTranslationFilter@53b0238, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2e9cee02]
2024-12-08 14:49:13,486 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:13,589 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:49:13,592 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 35761 (http) with context path ''
2024-12-08 14:49:13,700 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.186 seconds (JVM running for 40.424)
2024-12-08 14:49:13,748 INFO  [http-nio-auto-13-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:13,748 INFO  [http-nio-auto-13-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:13,750 INFO  [http-nio-auto-13-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:13,774 WARN  [http-nio-auto-13-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='address', message='Pattern.contactsDTO.address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:49:13,793 WARN  [http-nio-auto-13-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:13,821 WARN  [http-nio-auto-13-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:13,842 WARN  [http-nio-auto-13-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:13,864 WARN  [http-nio-auto-13-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:13,887 WARN  [http-nio-auto-13-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:13,903 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:49:13,904 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:13,904 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:13,906 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:49:13,909 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-13"]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:13,952 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:13,953 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:13,954 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:13,954 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:14,204 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:14,229 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:14,269 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:14,287 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1ba9f2b2' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:14,289 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:14,331 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:14,333 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:49:14,333 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:14,333 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:14,347 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:14,347 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 392 ms
2024-12-08 14:49:14,379 INFO  [main] c.z.h.HikariDataSource - HikariPool-14 - Starting...
2024-12-08 14:49:14,380 INFO  [main] c.z.h.HikariDataSource - HikariPool-14 - Start completed.
2024-12-08 14:49:14,393 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:14,411 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:14,423 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:14,424 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:14,523 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:14,523 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:14,700 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:14,832 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5e01ccc4, org.springframework.security.web.context.SecurityContextPersistenceFilter@1f2d7b5f, org.springframework.security.web.header.HeaderWriterFilter@5cc9179, org.springframework.security.web.authentication.logout.LogoutFilter@37d8bd16, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2f41f62c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1dc147d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7ce74a40, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@873b40b, org.springframework.security.web.session.SessionManagementFilter@79b8c77a, org.springframework.security.web.access.ExceptionTranslationFilter@1c23d9a3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@9ca99e4]
2024-12-08 14:49:14,857 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:14,947 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:49:14,949 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 39813 (http) with context path ''
2024-12-08 14:49:15,053 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.129 seconds (JVM running for 41.778)
2024-12-08 14:49:15,078 INFO  [http-nio-auto-14-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:15,078 INFO  [http-nio-auto-14-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:15,080 INFO  [http-nio-auto-14-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:15,099 WARN  [http-nio-auto-14-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:15,112 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:49:15,112 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:15,113 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:15,115 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:49:15,117 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-14"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m8[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.599 s - in market.[1mv3_gpt4o_run03_ContactsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:15,145 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:15,146 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:15,147 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:15,148 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:15,399 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:15,423 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:15,466 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:15,484 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3acf5f56' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:15,486 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:15,526 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:15,528 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:49:15,529 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:15,529 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:15,542 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:15,542 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 394 ms
2024-12-08 14:49:15,576 INFO  [main] c.z.h.HikariDataSource - HikariPool-15 - Starting...
2024-12-08 14:49:15,578 INFO  [main] c.z.h.HikariDataSource - HikariPool-15 - Start completed.
2024-12-08 14:49:15,589 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:15,606 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:15,616 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:15,618 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:15,713 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:15,714 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:15,869 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:16,055 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@adaf216, org.springframework.security.web.context.SecurityContextPersistenceFilter@58e5df7b, org.springframework.security.web.header.HeaderWriterFilter@6bdde988, org.springframework.security.web.authentication.logout.LogoutFilter@7a3b8669, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1d96b58, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@34944b11, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@300165a2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@346a49c0, org.springframework.security.web.session.SessionManagementFilter@2373e3ae, org.springframework.security.web.access.ExceptionTranslationFilter@198ea274, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@616f47ff]
2024-12-08 14:49:16,084 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:16,173 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:49:16,176 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 35203 (http) with context path ''
2024-12-08 14:49:16,276 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.155 seconds (JVM running for 43.001)
2024-12-08 14:49:16,314 INFO  [http-nio-auto-15-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:16,314 INFO  [http-nio-auto-15-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:16,317 INFO  [http-nio-auto-15-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 3 ms
2024-12-08 14:49:16,337 WARN  [http-nio-auto-15-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:49:16,358 WARN  [http-nio-auto-15-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:49:16,397 WARN  [http-nio-auto-15-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='address', message='Special characters are not allowed'}]}
2024-12-08 14:49:16,431 WARN  [http-nio-auto-15-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:35203/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:16 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:16,460 WARN  [http-nio-auto-15-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:35203/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:16 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:16,488 WARN  [http-nio-auto-15-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:35203/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:16 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:16,501 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:49:16,501 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:16,502 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:16,505 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:49:16,508 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-15"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m7[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.387 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_CustomerRestControllerTest[m
[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.037 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomer(v3_gpt4o_run01_CustomerRestControllerTest.java:66)

[[1;31mERROR[m] testCreateCustomerWithExistingEmail  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomerWithExistingEmail(v3_gpt4o_run01_CustomerRestControllerTest.java:81)

[[1;31mERROR[m] testGetCustomerWithValidSession  Time elapsed: 0.027 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_CustomerRestControllerTest.testGetCustomerWithValidSession(v3_gpt4o_run01_CustomerRestControllerTest.java:104)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:16,547 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:16,548 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:16,549 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:16,549 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:16,777 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:16,800 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:16,846 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:16,869 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5423e70c' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:16,871 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:16,921 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:16,922 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:49:16,923 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:16,923 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:16,939 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:16,940 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 390 ms
2024-12-08 14:49:16,982 INFO  [main] c.z.h.HikariDataSource - HikariPool-16 - Starting...
2024-12-08 14:49:16,984 INFO  [main] c.z.h.HikariDataSource - HikariPool-16 - Start completed.
2024-12-08 14:49:16,996 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:17,011 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:17,022 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:17,024 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:17,115 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:17,117 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:17,316 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:17,504 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@252f46b0, org.springframework.security.web.context.SecurityContextPersistenceFilter@797cfd59, org.springframework.security.web.header.HeaderWriterFilter@664e2260, org.springframework.security.web.authentication.logout.LogoutFilter@17797bd2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6af3cd71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@31cc8086, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2606f9fd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6a414f84, org.springframework.security.web.session.SessionManagementFilter@587ee4d1, org.springframework.security.web.access.ExceptionTranslationFilter@322f4aea, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@87d692c]
2024-12-08 14:49:17,532 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:17,642 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:49:17,645 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 38093 (http) with context path ''
2024-12-08 14:49:17,747 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.231 seconds (JVM running for 44.472)
2024-12-08 14:49:17,786 INFO  [http-nio-auto-16-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:17,786 INFO  [http-nio-auto-16-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:17,788 INFO  [http-nio-auto-16-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	POST
Request URI:	http://localhost:38093/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:17 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:17.794+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
Request method:	POST
Request URI:	http://localhost:38093/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:17 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:17.818+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:49:17,836 WARN  [http-nio-auto-16-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:38093/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:17 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:17.860+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:49:17,886 WARN  [http-nio-auto-16-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:17,915 WARN  [http-nio-auto-16-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:17,925 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:49:17,926 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:17,926 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:17,928 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:49:17,931 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-16"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.416 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_ContactsRestControllerTest[m
[[1;31mERROR[m] testUpdateContacts  Time elapsed: 0.031 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run02_ContactsRestControllerTest.getAuthToken(v3_gpt4o_run02_ContactsRestControllerTest.java:160)
	at market.v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContacts(v3_gpt4o_run02_ContactsRestControllerTest.java:104)

[[1;31mERROR[m] testGetContacts  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run02_ContactsRestControllerTest.getAuthToken(v3_gpt4o_run02_ContactsRestControllerTest.java:160)
	at market.v3_gpt4o_run02_ContactsRestControllerTest.testGetContacts(v3_gpt4o_run02_ContactsRestControllerTest.java:90)

[[1;31mERROR[m] testUpdateContactsInvalidPhone  Time elapsed: 0.021 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run02_ContactsRestControllerTest.getAuthToken(v3_gpt4o_run02_ContactsRestControllerTest.java:160)
	at market.v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContactsInvalidPhone(v3_gpt4o_run02_ContactsRestControllerTest.java:125)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:17,981 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:17,981 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:17,982 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:17,982 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:18,230 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:18,255 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:18,300 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:18,322 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@57828d98' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:18,324 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:18,369 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:18,370 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:49:18,370 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:18,371 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:18,385 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:18,385 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 402 ms
2024-12-08 14:49:18,418 INFO  [main] c.z.h.HikariDataSource - HikariPool-17 - Starting...
2024-12-08 14:49:18,419 INFO  [main] c.z.h.HikariDataSource - HikariPool-17 - Start completed.
2024-12-08 14:49:18,436 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:18,452 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:18,465 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:18,466 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:18,563 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:18,564 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:18,757 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:18,899 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7e7662db, org.springframework.security.web.context.SecurityContextPersistenceFilter@2d510a37, org.springframework.security.web.header.HeaderWriterFilter@41ce3f76, org.springframework.security.web.authentication.logout.LogoutFilter@5d61e435, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6e16405e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@165c3979, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@26d9914b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3e5a18ee, org.springframework.security.web.session.SessionManagementFilter@2ffe37b7, org.springframework.security.web.access.ExceptionTranslationFilter@16b5a064, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@48f90141]
2024-12-08 14:49:18,928 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:19,022 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:49:19,025 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 44197 (http) with context path ''
2024-12-08 14:49:19,121 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.185 seconds (JVM running for 45.846)
2024-12-08 14:49:19,164 INFO  [http-nio-auto-17-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:19,164 INFO  [http-nio-auto-17-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:19,165 INFO  [http-nio-auto-17-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:49:19,186 WARN  [http-nio-auto-17-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
Request method:	GET
Request URI:	http://localhost:44197/customer?name=Unknown
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:19 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:19.389+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:49:19,401 WARN  [http-nio-auto-17-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:19,420 WARN  [http-nio-auto-17-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:19,436 WARN  [http-nio-auto-17-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:19,453 WARN  [http-nio-auto-17-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
2024-12-08 14:49:19,472 WARN  [http-nio-auto-17-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:19,482 WARN  [http-nio-auto-17-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:19,499 WARN  [http-nio-auto-17-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:19,514 WARN  [http-nio-auto-17-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:19,543 WARN  [http-nio-auto-17-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:49:19,563 WARN  [http-nio-auto-17-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	GET
Request URI:	http://localhost:44197/customer?name=Ivan
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:19 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:19.671+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:49:19,742 WARN  [http-nio-auto-17-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:19,759 WARN  [http-nio-auto-17-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Card number shall consist of 13-16 digits'}, {field='ccNumber', message='Not a valid credit card number'}]}
2024-12-08 14:49:19,778 WARN  [http-nio-auto-17-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:49:19,794 WARN  [http-nio-auto-17-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:19,820 WARN  [http-nio-auto-17-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:49:19,830 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:49:19,830 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:19,830 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:19,833 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:49:19,836 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-17"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m17[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 1.894 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_RestErrorResponseTest[m
[[1;31mERROR[m] testGetCustomerNotFound  Time elapsed: 0.199 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerNotFound(v3_gpt4o_run03_RestErrorResponseTest.java:80)

[[1;31mERROR[m] testGetCustomerValid  Time elapsed: 0.108 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerValid(v3_gpt4o_run03_RestErrorResponseTest.java:67)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:19,860 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:19,861 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:19,862 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:19,862 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:20,048 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:20,068 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:20,101 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:20,120 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5f795a5b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:20,121 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:20,159 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:20,160 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:49:20,161 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:20,161 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:20,173 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:20,173 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 311 ms
2024-12-08 14:49:20,204 INFO  [main] c.z.h.HikariDataSource - HikariPool-18 - Starting...
2024-12-08 14:49:20,205 INFO  [main] c.z.h.HikariDataSource - HikariPool-18 - Start completed.
2024-12-08 14:49:20,217 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:20,233 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:20,250 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:20,251 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:20,350 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:20,351 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:20,523 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:20,655 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73b39136, org.springframework.security.web.context.SecurityContextPersistenceFilter@76c55263, org.springframework.security.web.header.HeaderWriterFilter@3fdaa3f8, org.springframework.security.web.authentication.logout.LogoutFilter@ce26fae, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3b54828c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1379c32c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@795677d8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7cd8faae, org.springframework.security.web.session.SessionManagementFilter@a24666e, org.springframework.security.web.access.ExceptionTranslationFilter@1f2f5ec1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@174af78d]
2024-12-08 14:49:20,677 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:20,763 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:49:20,765 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 40379 (http) with context path ''
2024-12-08 14:49:20,864 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.024 seconds (JVM running for 47.588)
2024-12-08 14:49:20,904 INFO  [http-nio-auto-18-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:20,904 INFO  [http-nio-auto-18-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:20,905 INFO  [http-nio-auto-18-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:49:21,263 WARN  [http-nio-auto-18-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/-1', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:21,367 WARN  [http-nio-auto-18-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:21,499 WARN  [http-nio-auto-18-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:49:21,509 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:49:21,510 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:21,510 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:21,513 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:49:21,516 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-18"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m5[m, Failures: 0, [1;31mErrors: [0;1;31m2[m, Skipped: 0, Time elapsed: 1.671 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_OrdersRestControllerTest[m
[[1;31mERROR[m] testGetOrder  Time elapsed: 0.265 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_OrdersRestControllerTest.testGetOrder(v3_gpt4o_run02_OrdersRestControllerTest.java:82)

[[1;31mERROR[m] testGetOrders  Time elapsed: 0.116 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_OrdersRestControllerTest.testGetOrders(v3_gpt4o_run02_OrdersRestControllerTest.java:68)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:21,546 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:21,547 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:21,548 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:21,548 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:21,761 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:21,784 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:21,824 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:21,844 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@77a71f38' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:21,846 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:21,891 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:21,892 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:49:21,893 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:21,893 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:21,907 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:21,908 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 360 ms
2024-12-08 14:49:21,980 INFO  [main] c.z.h.HikariDataSource - HikariPool-19 - Starting...
2024-12-08 14:49:21,982 INFO  [main] c.z.h.HikariDataSource - HikariPool-19 - Start completed.
2024-12-08 14:49:21,992 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:22,005 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:22,016 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:22,017 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:22,107 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:22,108 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:22,292 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:22,429 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5772c939, org.springframework.security.web.context.SecurityContextPersistenceFilter@7645c00e, org.springframework.security.web.header.HeaderWriterFilter@69f24c2b, org.springframework.security.web.authentication.logout.LogoutFilter@3f993991, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@507017fc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@136a6600, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6882e352, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4dae81ad, org.springframework.security.web.session.SessionManagementFilter@8b0e72a, org.springframework.security.web.access.ExceptionTranslationFilter@3b5bc224, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3784303a]
2024-12-08 14:49:22,455 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:22,547 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:49:22,549 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 32931 (http) with context path ''
2024-12-08 14:49:22,661 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.141 seconds (JVM running for 49.386)
2024-12-08 14:49:22,697 INFO  [http-nio-auto-19-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:22,697 INFO  [http-nio-auto-19-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:22,699 INFO  [http-nio-auto-19-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:22,943 WARN  [http-nio-auto-19-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:49:22,962 WARN  [http-nio-auto-19-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
2024-12-08 14:49:23,187 WARN  [http-nio-auto-19-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:23,280 ERROR [http-nio-auto-19-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"', entityName='null', description='uri=/customer/orders/invalid', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NumberFormatException: For input string: "invalid"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.base/java.lang.Long.parseLong(Long.java:692)
	at java.base/java.lang.Long.valueOf(Long.java:1144)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:49:23,290 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:49:23,291 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:23,291 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:23,293 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:49:23,298 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-19"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m6[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.778 s - in market.[1mv3_gpt4o_run01_OrdersRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:23,319 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:23,320 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:23,321 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:23,321 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:23,520 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:23,545 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:23,577 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:23,593 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5098e235' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:23,594 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:23,631 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:23,632 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:49:23,632 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:23,632 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:23,645 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:23,645 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 324 ms
2024-12-08 14:49:23,682 INFO  [main] c.z.h.HikariDataSource - HikariPool-20 - Starting...
2024-12-08 14:49:23,684 INFO  [main] c.z.h.HikariDataSource - HikariPool-20 - Start completed.
2024-12-08 14:49:23,695 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:23,711 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:23,722 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:23,723 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:23,809 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:23,810 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:23,999 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:24,152 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@581b5f6b, org.springframework.security.web.context.SecurityContextPersistenceFilter@628afacb, org.springframework.security.web.header.HeaderWriterFilter@2b392e37, org.springframework.security.web.authentication.logout.LogoutFilter@30bafb24, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@65f9e2bd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c00d614, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4eaa1d35, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37d80cde, org.springframework.security.web.session.SessionManagementFilter@172b8334, org.springframework.security.web.access.ExceptionTranslationFilter@57e334ea, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7e18349c]
2024-12-08 14:49:24,181 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:24,274 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:49:24,276 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 41705 (http) with context path ''
2024-12-08 14:49:24,376 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.074 seconds (JVM running for 51.1)
2024-12-08 14:49:24,413 INFO  [http-nio-auto-20-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:24,413 INFO  [http-nio-auto-20-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:24,415 INFO  [http-nio-auto-20-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	PUT
Request URI:	http://localhost:41705/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": 2
}

HTTP/1.1 200 
Set-Cookie: JSESSIONID=C0653CBAF513FF80FBBEF1EF45C4624F; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:24 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "user": "ivan.petrov@yandex.ru",
    "totalItems": 1,
    "productsCost": 6517.0,
    "deliveryCost": 400,
    "deliveryIncluded": true,
    "totalCost": 6917.0,
    "cartItems": [
        {
            "productId": 5,
            "quantity": 1,
            "_links": {
                "View product": {
                    "href": "http://localhost:41705/products/5"
                }
            }
        }
    ],
    "empty": false,
    "_links": {
        "Customer contacts": {
            "href": "http://localhost:41705/customer/contacts"
        },
        "Proceed to payment": {
            "href": "http://localhost:41705/customer/cart/pay"
        }
    }
}
2024-12-08 14:49:24,837 WARN  [http-nio-auto-20-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:25,000 WARN  [http-nio-auto-20-exec-4] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:49:25,000 ERROR [http-nio-auto-20-exec-4] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:49:25,006 ERROR [http-nio-auto-20-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7aa4e3cd.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$20f051aa_20.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:41705/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=2ECD7E6FE8D53E271BF1C857040D1A6F; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:24 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
Request method:	GET
Request URI:	http://localhost:41705/customer/cart/internal-error
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 404 
Set-Cookie: JSESSIONID=1F6DD86246237293B63ACA9327392E98; Path=/; HttpOnly
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:24 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:25.126+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/customer/cart/internal-error"
}
2024-12-08 14:49:25,589 WARN  [http-nio-auto-20-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='Product', description='uri=/customer/cart', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:25,702 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:49:25,703 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:25,703 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:25,705 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:49:25,707 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-20"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m10[m, [1;31mFailures: [0;1;31m3[m, [1;31mErrors: [0;1;31m2[m, Skipped: 0, Time elapsed: 2.405 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_CartRestControllerTest[m
[[1;31mERROR[m] testAddItem  Time elapsed: 0.143 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path cartItems[0].productId doesn't match.
Expected: <1>
  Actual: 5

	at market.v3_gpt4o_run02_CartRestControllerTest.testAddItem(v3_gpt4o_run02_CartRestControllerTest.java:81)

[[1;31mERROR[m] testPayByCard  Time elapsed: 0.212 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4o_run02_CartRestControllerTest.testPayByCard(v3_gpt4o_run02_CartRestControllerTest.java:112)

[[1;31mERROR[m] testInternalServerError  Time elapsed: 0.077 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <404>.

	at market.v3_gpt4o_run02_CartRestControllerTest.testInternalServerError(v3_gpt4o_run02_CartRestControllerTest.java:139)

[[1;31mERROR[m] testSchemaValidationForAddItem  Time elapsed: 0.097 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForAddItem(v3_gpt4o_run02_CartRestControllerTest.java:160)

[[1;31mERROR[m] testSchemaValidationForGetCart  Time elapsed: 0.104 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForGetCart(v3_gpt4o_run02_CartRestControllerTest.java:148)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:25,729 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:25,729 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:25,729 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:25,730 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:25,894 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:25,917 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:25,957 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:25,979 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@f3bd3a3' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:25,980 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:26,033 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:26,034 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:49:26,035 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:26,035 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:26,049 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:26,049 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 319 ms
2024-12-08 14:49:26,081 INFO  [main] c.z.h.HikariDataSource - HikariPool-21 - Starting...
2024-12-08 14:49:26,082 INFO  [main] c.z.h.HikariDataSource - HikariPool-21 - Start completed.
2024-12-08 14:49:26,097 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:26,111 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:26,123 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:26,124 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:26,239 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:26,239 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:26,401 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:26,553 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22c58d4c, org.springframework.security.web.context.SecurityContextPersistenceFilter@1018bdc5, org.springframework.security.web.header.HeaderWriterFilter@13b08709, org.springframework.security.web.authentication.logout.LogoutFilter@290b3bc3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@272bd0b3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@464f41e6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51d00ee9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@547477d4, org.springframework.security.web.session.SessionManagementFilter@31a39ed3, org.springframework.security.web.access.ExceptionTranslationFilter@e3b174f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@a8a6a30]
2024-12-08 14:49:26,579 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:26,669 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:49:26,671 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34281 (http) with context path ''
2024-12-08 14:49:26,762 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.051 seconds (JVM running for 53.486)
2024-12-08 14:49:26,798 INFO  [http-nio-auto-21-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:26,798 INFO  [http-nio-auto-21-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:26,800 INFO  [http-nio-auto-21-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	GET
Request URI:	http://localhost:34281/customer?name=non.existent@yandex.ru
Proxy:			<none>
Request params:	<none>
Query params:	name=non.existent@yandex.ru
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
Set-Cookie: JSESSIONID=5176D42B08287D34DE42602A8DAEE34E; Path=/; HttpOnly
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:26 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:49:26.804+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:49:26,856 WARN  [http-nio-auto-21-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:26,872 WARN  [http-nio-auto-21-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:49:26,897 WARN  [http-nio-auto-21-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:26,912 WARN  [http-nio-auto-21-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
2024-12-08 14:49:26,952 WARN  [http-nio-auto-21-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:34281/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "phone": "+7 123 456 78 90",
    "name": "Ivan Petrov",
    "address": "Riesstrasse 18",
    "password": "petrov"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:26 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:26,966 WARN  [http-nio-auto-21-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:34281/customer/cart?name=non.existent@yandex.ru
Proxy:			<none>
Request params:	<none>
Query params:	name=non.existent@yandex.ru
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:26 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:26,981 WARN  [http-nio-auto-21-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:26,997 WARN  [http-nio-auto-21-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:27,016 WARN  [http-nio-auto-21-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
2024-12-08 14:49:27,041 WARN  [http-nio-auto-21-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:27,096 WARN  [http-nio-auto-21-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Length shall be between 6 and 50 characters'}, {field='email', message='The value shall be in the format of an email address'}, {field='name', message='Only letters, whitespace, hyphen and apostrophe are allowed'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='name', message='The value shall not be empty'}, {field='address', message='The value shall not be empty'}]}
2024-12-08 14:49:27,107 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:49:27,107 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:27,109 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:27,111 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:49:27,116 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-21"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m13[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.4 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_RestExceptionHandlerTest[m
[[1;31mERROR[m] testGetCustomerNotFound  Time elapsed: 0.027 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_RestExceptionHandlerTest.testGetCustomerNotFound(v3_gpt4o_run03_RestExceptionHandlerTest.java:77)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.041 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_RestExceptionHandlerTest.testCreateCustomer(v3_gpt4o_run03_RestExceptionHandlerTest.java:193)

[[1;31mERROR[m] testGetCartNotFound  Time elapsed: 0.014 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_RestExceptionHandlerTest.testGetCartNotFound(v3_gpt4o_run03_RestExceptionHandlerTest.java:87)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:27,139 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:27,139 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:27,141 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:27,141 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:27,334 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:27,355 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:27,388 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:27,401 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@482ba29e' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:27,402 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:27,434 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:27,435 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:49:27,436 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:27,436 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:27,446 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:27,446 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 305 ms
2024-12-08 14:49:27,470 INFO  [main] c.z.h.HikariDataSource - HikariPool-22 - Starting...
2024-12-08 14:49:27,471 INFO  [main] c.z.h.HikariDataSource - HikariPool-22 - Start completed.
2024-12-08 14:49:27,483 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:27,500 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:27,511 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:27,512 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:27,617 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:27,617 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:27,763 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:27,869 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a44a142, org.springframework.security.web.context.SecurityContextPersistenceFilter@4e355909, org.springframework.security.web.header.HeaderWriterFilter@74b2006c, org.springframework.security.web.authentication.logout.LogoutFilter@18661de5, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4105288b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cb16c0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4864a891, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2ededf5, org.springframework.security.web.session.SessionManagementFilter@686b889f, org.springframework.security.web.access.ExceptionTranslationFilter@7732aa9e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@79f33228]
2024-12-08 14:49:27,889 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:27,976 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:49:27,978 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34339 (http) with context path ''
2024-12-08 14:49:28,065 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.944 seconds (JVM running for 54.789)
2024-12-08 14:49:28,094 INFO  [http-nio-auto-22-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:28,094 INFO  [http-nio-auto-22-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:28,096 INFO  [http-nio-auto-22-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:28,099 WARN  [http-nio-auto-22-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:49:28,118 WARN  [http-nio-auto-22-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/999', fieldErrors=[]}
2024-12-08 14:49:28,141 WARN  [http-nio-auto-22-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:34339/customer/contacts?name=invalid_user
Proxy:			<none>
Request params:	<none>
Query params:	name=invalid_user
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "address": "New Address",
    "phone": "+7 123 456 78 90"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:28 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:28,166 WARN  [http-nio-auto-22-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}]}
Request method:	POST
Request URI:	http://localhost:34339/customer/cart/pay?name=invalid_user
Proxy:			<none>
Request params:	<none>
Query params:	name=invalid_user
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "1234-5678-9876-5432"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:28 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart/pay",
    "entityName": "creditCardDTO",
    "fieldErrors": [
        {
            "field": "ccNumber",
            "message": "Not a valid credit card number"
        }
    ]
}
2024-12-08 14:49:28,181 WARN  [http-nio-auto-22-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:28,195 WARN  [http-nio-auto-22-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:28,238 WARN  [http-nio-auto-22-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:34339/customer/cart?name=invalid_user
Proxy:			<none>
Request params:	<none>
Query params:	name=invalid_user
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 999,
    "quantity": 1
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:28 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:28,255 WARN  [http-nio-auto-22-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:28,302 WARN  [http-nio-auto-22-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:34339/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:28 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:49:28,366 WARN  [http-nio-auto-22-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:49:28,379 WARN  [http-nio-auto-22-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:49:28,408 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:49:28,408 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:28,409 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:28,411 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:49:28,413 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-22"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m13[m, [1;31mFailures: [0;1;31m4[m, Errors: 0, Skipped: 0, Time elapsed: 1.288 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_RestErrorResponseTest[m
[[1;31mERROR[m] testUpdateContacts  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <401>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testUpdateContacts(v3_gpt4o_run01_RestErrorResponseTest.java:137)

[[1;31mERROR[m] testPayByCard  Time elapsed: 0.026 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <406>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testPayByCard(v3_gpt4o_run01_RestErrorResponseTest.java:116)

[[1;31mERROR[m] testAddItemToCart  Time elapsed: 0.044 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <401>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testAddItemToCart(v3_gpt4o_run01_RestErrorResponseTest.java:85)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.032 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <406>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testCreateCustomer(v3_gpt4o_run01_RestErrorResponseTest.java:186)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:28,437 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:28,437 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:28,439 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:28,439 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:28,599 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:28,616 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:28,649 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:28,667 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@21c6003c' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:28,669 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:28,706 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:28,707 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:49:28,707 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:28,708 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:28,719 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:28,720 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 281 ms
2024-12-08 14:49:28,751 INFO  [main] c.z.h.HikariDataSource - HikariPool-23 - Starting...
2024-12-08 14:49:28,753 INFO  [main] c.z.h.HikariDataSource - HikariPool-23 - Start completed.
2024-12-08 14:49:28,775 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:28,789 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:28,800 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:28,802 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:28,884 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:28,885 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:29,045 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:29,166 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74f269df, org.springframework.security.web.context.SecurityContextPersistenceFilter@7f8515a9, org.springframework.security.web.header.HeaderWriterFilter@4d201ae0, org.springframework.security.web.authentication.logout.LogoutFilter@f88ecf1, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@33454a02, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a483a10, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57f2c4a3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@735afe92, org.springframework.security.web.session.SessionManagementFilter@79bec680, org.springframework.security.web.access.ExceptionTranslationFilter@352a0041, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@39796418]
2024-12-08 14:49:29,186 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:29,264 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:49:29,280 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 45263 (http) with context path ''
2024-12-08 14:49:29,364 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.948 seconds (JVM running for 56.089)
2024-12-08 14:49:29,397 INFO  [http-nio-auto-23-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:29,398 INFO  [http-nio-auto-23-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:29,399 INFO  [http-nio-auto-23-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:49:29,828 WARN  [http-nio-auto-23-exec-3] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:49:29,829 ERROR [http-nio-auto-23-exec-3] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:49:29,830 ERROR [http-nio-auto-23-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7aa4e3cd.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$20f051aa_23.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:45263/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=718E8DCF717A336EF9A96416A2160DB6; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:29 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:49:30,185 WARN  [http-nio-auto-23-exec-6] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:49:30,185 ERROR [http-nio-auto-23-exec-6] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:49:30,186 ERROR [http-nio-auto-23-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$7aa4e3cd.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$20f051aa_23.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	PUT
Request URI:	http://localhost:45263/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": 2
}

HTTP/1.1 200 
Set-Cookie: JSESSIONID=B757C4DAE52C21CE2332A196854F587D; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:49:29 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "user": "ivan.petrov@yandex.ru",
    "totalItems": 1,
    "productsCost": 6517.0,
    "deliveryCost": 400,
    "deliveryIncluded": true,
    "totalCost": 6917.0,
    "cartItems": [
        {
            "productId": 5,
            "quantity": 1,
            "_links": {
                "View product": {
                    "href": "http://localhost:45263/products/5"
                }
            }
        }
    ],
    "empty": false,
    "_links": {
        "Customer contacts": {
            "href": "http://localhost:45263/customer/contacts"
        },
        "Proceed to payment": {
            "href": "http://localhost:45263/customer/cart/pay"
        }
    }
}
2024-12-08 14:49:30,437 WARN  [http-nio-auto-23-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='Product', description='uri=/customer/cart', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:30,448 WARN  [http-nio-auto-23-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:49:30,458 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:49:30,459 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:30,459 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:30,461 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:49:30,464 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-23"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m8[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 2.042 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_CartRestControllerTest[m
[[1;31mERROR[m] testPayByCard  Time elapsed: 0.264 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4o_run01_CartRestControllerTest.testPayByCard(v3_gpt4o_run01_CartRestControllerTest.java:166)

[[1;31mERROR[m] testAddItemToCart  Time elapsed: 0.105 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path totalItems doesn't match.
Expected: <2>
  Actual: 1

	at market.v3_gpt4o_run01_CartRestControllerTest.testAddItemToCart(v3_gpt4o_run01_CartRestControllerTest.java:92)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:49:30,491 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 38110 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:49:30,491 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:49:30,492 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:49:30,492 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:49:30,680 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:49:30,700 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:49:30,736 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$dfe9f521] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:30,753 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4ba937a9' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:30,754 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:49:30,793 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:49:30,795 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:49:30,795 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:49:30,795 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:49:30,810 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:49:30,810 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 318 ms
2024-12-08 14:49:30,838 INFO  [main] c.z.h.HikariDataSource - HikariPool-24 - Starting...
2024-12-08 14:49:30,839 INFO  [main] c.z.h.HikariDataSource - HikariPool-24 - Start completed.
2024-12-08 14:49:30,851 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:49:30,865 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:49:30,876 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:30,878 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:49:30,964 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:49:30,964 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:31,137 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:49:31,307 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@fb1a597, org.springframework.security.web.context.SecurityContextPersistenceFilter@d1408ec, org.springframework.security.web.header.HeaderWriterFilter@5307a98d, org.springframework.security.web.authentication.logout.LogoutFilter@59be783c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7d57a6c4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@66585b49, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@87dcdce, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@150b7114, org.springframework.security.web.session.SessionManagementFilter@7e004831, org.springframework.security.web.access.ExceptionTranslationFilter@288865f2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@47e7ce03]
2024-12-08 14:49:31,344 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,436 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:49:31,439 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 39369 (http) with context path ''
2024-12-08 14:49:31,539 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.072 seconds (JVM running for 58.264)
2024-12-08 14:49:31,596 INFO  [http-nio-auto-24-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:49:31,596 INFO  [http-nio-auto-24-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:49:31,598 INFO  [http-nio-auto-24-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:49:31,619 WARN  [http-nio-auto-24-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='address', message='Special characters are not allowed'}, {field='name', message='Only letters, whitespace, hyphen and apostrophe are allowed'}, {field='email', message='The value shall be in the format of an email address'}, {field='password', message='Length shall be between 6 and 50 characters'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:49:31,665 ERROR [http-nio-auto-24-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalid]', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalid]
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalArgumentException: Invalid boolean value [invalid]
	at org.springframework.beans.propertyeditors.CustomBooleanEditor.setAsText(CustomBooleanEditor.java:154)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:49:31,690 ERROR [http-nio-auto-24-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='JSON parse error: null; nested exception is com.fasterxml.jackson.databind.JsonMappingException: N/A
 at [Source: (PushbackInputStream); line: 1, column: 16] (through reference chain: market.dto.CartItemDTO["productId"])', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: null; nested exception is com.fasterxml.jackson.databind.JsonMappingException: N/A
 at [Source: (PushbackInputStream); line: 1, column: 16] (through reference chain: market.dto.CartItemDTO["productId"])
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:387)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:342)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:186)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:158)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:131)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.fasterxml.jackson.databind.JsonMappingException: N/A
 at [Source: (PushbackInputStream); line: 1, column: 16] (through reference chain: market.dto.CartItemDTO["productId"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:281)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:623)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:611)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:143)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:371)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:164)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4526)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3521)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:376)
	... 89 more
Caused by: java.lang.NullPointerException
	at market.dto.CartItemDTO.setProductId(CartItemDTO.java:27)
	at jdk.internal.reflect.GeneratedMethodAccessor788.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:141)
	... 94 more
2024-12-08 14:49:31,711 WARN  [http-nio-auto-24-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:49:31,888 WARN  [http-nio-auto-24-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Card number shall consist of 13-16 digits'}, {field='ccNumber', message='Not a valid credit card number'}]}
2024-12-08 14:49:31,901 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:49:31,901 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:49:31,902 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:49:31,904 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:49:31,907 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-24"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m8[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.437 s - in market.[1mv3_gpt4o_run02_RestErrorResponseTest[m
2024-12-08 14:49:31,943 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,944 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,944 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,944 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,945 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,948 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,953 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,960 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,962 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,971 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,971 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,973 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:31,988 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:31,990 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,000 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,004 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,004 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,007 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,007 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,007 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,010 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,013 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,016 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,022 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,022 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,028 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,028 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,028 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,037 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,038 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,041 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,042 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:49:32,044 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,046 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,047 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,063 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-22 - Shutdown initiated...
2024-12-08 14:49:32,064 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-24 - Shutdown initiated...
2024-12-08 14:49:32,064 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-11 - Shutdown initiated...
2024-12-08 14:49:32,065 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-12 - Shutdown initiated...
2024-12-08 14:49:32,073 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,077 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-3 - Shutdown initiated...
2024-12-08 14:49:32,077 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-2 - Shutdown initiated...
2024-12-08 14:49:32,079 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-8 - Shutdown initiated...
2024-12-08 14:49:32,079 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-19 - Shutdown initiated...
2024-12-08 14:49:32,079 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,080 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-13 - Shutdown initiated...
2024-12-08 14:49:32,080 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-20 - Shutdown initiated...
2024-12-08 14:49:32,085 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-7 - Shutdown initiated...
2024-12-08 14:49:32,091 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,091 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,093 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,095 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,097 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-18 - Shutdown initiated...
2024-12-08 14:49:32,097 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-12-08 14:49:32,097 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-21 - Shutdown initiated...
2024-12-08 14:49:32,098 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-19 - Shutdown completed.
2024-12-08 14:49:32,098 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,099 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,100 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-24 - Shutdown completed.
2024-12-08 14:49:32,102 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-2 - Shutdown completed.
2024-12-08 14:49:32,102 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-23 - Shutdown initiated...
2024-12-08 14:49:32,102 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-6 - Shutdown initiated...
2024-12-08 14:49:32,102 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-22 - Shutdown completed.
2024-12-08 14:49:32,104 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,106 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,108 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,110 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-12 - Shutdown completed.
2024-12-08 14:49:32,111 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,111 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-13 - Shutdown completed.
2024-12-08 14:49:32,111 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-9 - Shutdown initiated...
2024-12-08 14:49:32,113 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:49:32,114 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-8 - Shutdown completed.
2024-12-08 14:49:32,114 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-3 - Shutdown completed.
2024-12-08 14:49:32,114 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-10 - Shutdown initiated...
2024-12-08 14:49:32,115 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-7 - Shutdown completed.
2024-12-08 14:49:32,115 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-20 - Shutdown completed.
2024-12-08 14:49:32,116 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-11 - Shutdown completed.
2024-12-08 14:49:32,116 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-21 - Shutdown completed.
2024-12-08 14:49:32,118 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-5 - Shutdown initiated...
2024-12-08 14:49:32,118 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-16 - Shutdown initiated...
2024-12-08 14:49:32,118 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-17 - Shutdown initiated...
2024-12-08 14:49:32,119 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-4 - Shutdown initiated...
2024-12-08 14:49:32,119 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-15 - Shutdown initiated...
2024-12-08 14:49:32,119 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-14 - Shutdown initiated...
2024-12-08 14:49:32,120 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-6 - Shutdown completed.
2024-12-08 14:49:32,122 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-18 - Shutdown completed.
2024-12-08 14:49:32,122 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-23 - Shutdown completed.
2024-12-08 14:49:32,122 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-5 - Shutdown completed.
2024-12-08 14:49:32,124 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-9 - Shutdown completed.
2024-12-08 14:49:32,129 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-12-08 14:49:32,129 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-10 - Shutdown completed.
2024-12-08 14:49:32,130 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-15 - Shutdown completed.
2024-12-08 14:49:32,131 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-17 - Shutdown completed.
2024-12-08 14:49:32,132 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-4 - Shutdown completed.
2024-12-08 14:49:32,134 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-14 - Shutdown completed.
2024-12-08 14:49:32,135 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-16 - Shutdown completed.
[[1;34mINFO[m] 
[[1;34mINFO[m] Results:
[[1;34mINFO[m] 
[[1;31mERROR[m] [1;31mFailures: [m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CartRestControllerTest.testAddItemToCart:92 1 expectation failed.
JSON path totalItems doesn't match.
Expected: <2>
  Actual: 1
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CartRestControllerTest.testPayByCard:166 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testGetContactsSuccess:65 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testSchemaValidation:168 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsInvalidInput:122 1 expectation failed.
Expected status code <400> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSchemaValidation:185 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSuccess:90 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomer:66 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomerWithExistingEmail:81 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CustomerRestControllerTest.testGetCustomerWithValidSession:104 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testAddItemToCart:85 1 expectation failed.
Expected status code <500> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testCreateCustomer:186 1 expectation failed.
Expected status code <500> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testPayByCard:116 1 expectation failed.
Expected status code <500> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testUpdateContacts:137 1 expectation failed.
Expected status code <500> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testAddItemToCart_InvalidProduct:94 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testCreateCustomer_Duplicate:148 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testGetCustomer_NotFound:70 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testGetProduct_Unauthorized:189 1 expectation failed.
Expected status code <401> but was <200>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testAddItem:81 1 expectation failed.
JSON path cartItems[0].productId doesn't match.
Expected: <1>
  Actual: 5
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testInternalServerError:139 1 expectation failed.
Expected status code <500> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testPayByCard:112 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ContactsRestControllerTest.testGetContacts:90->getAuthToken:160 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContacts:104->getAuthToken:160 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContactsInvalidPhone:125->getAuthToken:160 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomer:69 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomerEmailExists:85 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testGetCustomer:107 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testSchemaValidation:158 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ProductsRestControllerTest.testInternalServerErrorSimulation:109 1 expectation failed.
Expected status code <500> but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetContactsNotFound:125 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetCustomerNotFound:65 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetOrderNotFound:156 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetProductsUnauthorized:165 1 expectation failed.
Expected status code <401> but was <200>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testInternalServerError:195 1 expectation failed.
Expected status code <500> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testPayByCardWithoutAuth:115 1 expectation failed.
Expected status code <401> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testAddItemToCart:83 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidProduct:200 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidQuantity:233 1 expectation failed.
Expected status code <400> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testClearCart:94 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testGetCart:65 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testPayByCard:123 1 expectation failed.
Expected status code <201> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testPayByCardEmptyCart:216 1 expectation failed.
Expected status code <500> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testSetDelivery:106 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomer:87 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomerEmailExists:111 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CustomerRestControllerTest.testGetCustomerAfterRegistration:159 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_OrdersRestControllerTest.testGetOrder:84->getAccessToken:110 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_OrdersRestControllerTest.testGetOrders:69->getAccessToken:110 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_OrdersRestControllerTest.testInternalServerError:99->getAccessToken:110 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testCreateProduct:120 1 expectation failed.
Expected status code <201> but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testCreateProductWithInvalidData:142 1 expectation failed.
Expected status code <400> but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerNotFound:80 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerValid:67 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestExceptionHandlerTest.testCreateCustomer:193 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestExceptionHandlerTest.testGetCartNotFound:87 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestExceptionHandlerTest.testGetCustomerNotFound:77 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31mErrors: [m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForAddItem:160 ¬ª IllegalArgument[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForGetCart:148 ¬ª IllegalArgument[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_OrdersRestControllerTest.testGetOrder:82 ¬ª IllegalArgument Sche...[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_OrdersRestControllerTest.testGetOrders:68 ¬ª IllegalArgument Sch...[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetProducts:159 ¬ª IllegalArgument[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetSingleProduct:172 ¬ª IllegalArgument[m
[[1;34mINFO[m] 
[[1;31mERROR[m] [1;31mTests run: 184, Failures: 56, Errors: 6, Skipped: 0[m
[[1;34mINFO[m] 
[[1;31mERROR[m] There are test failures.

Please refer to /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/surefire-reports for the individual test results.
Please refer to dump files (if any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:report[m [1m(report)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Loading execution data file /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] Analyzed bundle 'market-rest' with 10 classes
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1;32mBUILD SUCCESS[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] Total time:  01:04 min
[[1;34mINFO[m] Finished at: 2024-12-08T14:49:33-03:00
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
Copiando relat√≥rios para /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/coverage_three_runs/gpt4o...
Execu√ß√£o conclu√≠da com sucesso para o modelo gpt4o.
