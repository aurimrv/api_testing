Limpando o diret√≥rio de destino /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market para combina√ß√£o gpt4turbo+gpt4o...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4turbo/run01/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4turbo/run02/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4turbo/run03/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4o/run01/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4o/run02/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Copiando arquivos de /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/gpt4o/run03/exec para /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/java/market...
Diret√≥rio de origem /run01/exec n√£o encontrado, pulando...
Diret√≥rio de origem /run02/exec n√£o encontrado, pulando...
Diret√≥rio de origem /run03/exec n√£o encontrado, pulando...
Executando Maven para a combina√ß√£o gpt4turbo+gpt4o...
[[1;34mINFO[m] Scanning for projects...
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m---------------------< [0;36mnet.lukyanets:market-rest[0;1m >----------------------[m
[[1;34mINFO[m] [1mBuilding market-rest 0.1.2[m
[[1;34mINFO[m] [1m--------------------------------[ jar ]---------------------------------[m
[[1;33mWARNING[m] The POM for com.sun.xml.bind:jaxb-osgi:jar:2.2.10 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-clean-plugin:2.5:clean[m [1m(default-clean)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Deleting /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:prepare-agent[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] argLine set to -javaagent:/home/rincon/.m2/repository/org/jacoco/org.jacoco.agent/0.8.7/org.jacoco.agent-0.8.7-runtime.jar=destfile=/media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.4.3:build-info[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:compile[m [1m(default-compile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;34mINFO[m] Compiling 11 source files to /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/classes
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:prepare-agent[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] argLine set to -javaagent:/home/rincon/.m2/repository/org/jacoco/org.jacoco.agent/0.8.7/org.jacoco.agent-0.8.7-runtime.jar=destfile=/media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.4.3:build-info[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:compile[m [1m(default-compile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] skip non existing resourceDirectory /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:testCompile[m [1m(default-testCompile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;34mINFO[m] Compiling 42 source files to /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/test-classes
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:prepare-agent[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] argLine set to -javaagent:/home/rincon/.m2/repository/org/jacoco/org.jacoco.agent/0.8.7/org.jacoco.agent-0.8.7-runtime.jar=destfile=/media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mspring-boot-maven-plugin:2.4.3:build-info[m [1m(default)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:compile[m [1m(default-compile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] skip non existing resourceDirectory /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.8.0:testCompile[m [1m(default-testCompile)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-surefire-plugin:2.22.0:test[m [1m(default-test)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] -------------------------------------------------------
[[1;34mINFO[m]  T E S T S
[[1;34mINFO[m] -------------------------------------------------------
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:20,590 INFO  [background-preinit] o.h.v.i.u.Version - HV000001: Hibernate Validator 6.1.7.Final
2024-12-08 14:53:20,710 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:20,716 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:21,355 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:21,355 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:23,077 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:23,206 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 119 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:23,724 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:23,916 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@29763c3b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:23,929 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:24,424 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:24,441 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:53:24,442 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:24,442 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:24,580 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:24,580 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3219 ms
2024-12-08 14:53:24,765 INFO  [main] c.z.h.HikariDataSource - HikariPool-1 - Starting...
2024-12-08 14:53:25,148 INFO  [main] c.z.h.HikariDataSource - HikariPool-1 - Start completed.
2024-12-08 14:53:25,428 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:25,522 INFO  [main] o.h.Version - HHH000412: Hibernate ORM core version 5.4.28.Final
2024-12-08 14:53:25,686 INFO  [main] o.h.a.c.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2024-12-08 14:53:25,974 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:26,277 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:26,280 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:27,116 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:27,130 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:28,273 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:29,312 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@caad7aa, org.springframework.security.web.context.SecurityContextPersistenceFilter@53f92d7c, org.springframework.security.web.header.HeaderWriterFilter@5abbff86, org.springframework.security.web.authentication.logout.LogoutFilter@e2cfa5c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@14a8b97c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b924d16, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4932f8d7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@38a684f7, org.springframework.security.web.session.SessionManagementFilter@3964448a, org.springframework.security.web.access.ExceptionTranslationFilter@6028eee, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1b86ec25]
2024-12-08 14:53:29,476 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:29,971 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:53:30,007 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 39149 (http) with context path ''
2024-12-08 14:53:30,605 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 10.869 seconds (JVM running for 13.344)
2024-12-08 14:53:32,529 INFO  [http-nio-auto-1-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:32,529 INFO  [http-nio-auto-1-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:32,532 INFO  [http-nio-auto-1-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 3 ms
2024-12-08 14:53:32,729 WARN  [http-nio-auto-1-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:34,297 WARN  [http-nio-auto-1-exec-4] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
Request method:	POST
Request URI:	http://localhost:39149/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{invalidJson}

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:34 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:34.310+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/products"
}
2024-12-08 14:53:34,776 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:53:34,776 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:34,778 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:34,782 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-1"]
2024-12-08 14:53:34,786 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-1"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m1[m, Errors: 0, Skipped: 0, Time elapsed: 16.222 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_ProductsRestControllerTest[m
[[1;31mERROR[m] testInternalServerErrorSimulation  Time elapsed: 0.154 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <405>.

	at market.v3_gpt4o_run02_ProductsRestControllerTest.testInternalServerErrorSimulation(v3_gpt4o_run02_ProductsRestControllerTest.java:109)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:34,861 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:34,862 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:34,864 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:34,864 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:35,236 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:35,311 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:35,388 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:35,418 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3b97c1de' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:35,420 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:35,484 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:35,485 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:53:35,486 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:35,486 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:35,506 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:35,506 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 641 ms
2024-12-08 14:53:35,554 INFO  [main] c.z.h.HikariDataSource - HikariPool-2 - Starting...
2024-12-08 14:53:35,556 INFO  [main] c.z.h.HikariDataSource - HikariPool-2 - Start completed.
2024-12-08 14:53:35,608 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:35,643 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:35,669 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:35,671 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:35,880 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:35,880 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:36,123 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:36,343 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@76815cd1, org.springframework.security.web.context.SecurityContextPersistenceFilter@30e885af, org.springframework.security.web.header.HeaderWriterFilter@5de569fd, org.springframework.security.web.authentication.logout.LogoutFilter@38f8f02f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@ebadf62, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@623f8aca, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1463bdf1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@294a1583, org.springframework.security.web.session.SessionManagementFilter@49523415, org.springframework.security.web.access.ExceptionTranslationFilter@6766ac74, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5248af5f]
2024-12-08 14:53:36,381 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:36,514 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:53:36,517 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34995 (http) with context path ''
2024-12-08 14:53:36,726 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.933 seconds (JVM running for 19.465)
2024-12-08 14:53:36,826 INFO  [http-nio-auto-2-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:36,826 INFO  [http-nio-auto-2-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:36,828 INFO  [http-nio-auto-2-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:36,837 WARN  [http-nio-auto-2-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:34995/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "password",
    "username": "admin"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:36 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:36.971+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
Request method:	POST
Request URI:	http://localhost:34995/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "password",
    "username": "admin"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:36 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:37.016+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:53:37,054 WARN  [http-nio-auto-2-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:34995/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "password",
    "username": "admin"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:36 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:37.086+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:53:37,102 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:53:37,102 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:37,103 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:37,106 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-2"]
2024-12-08 14:53:37,111 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-2"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m3[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 2.284 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_OrdersRestControllerTest[m
[[1;31mERROR[m] testGetOrder  Time elapsed: 0.194 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run03_OrdersRestControllerTest.getAccessToken(v3_gpt4o_run03_OrdersRestControllerTest.java:110)
	at market.v3_gpt4o_run03_OrdersRestControllerTest.testGetOrder(v3_gpt4o_run03_OrdersRestControllerTest.java:84)

[[1;31mERROR[m] testInternalServerError  Time elapsed: 0.04 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run03_OrdersRestControllerTest.getAccessToken(v3_gpt4o_run03_OrdersRestControllerTest.java:110)
	at market.v3_gpt4o_run03_OrdersRestControllerTest.testInternalServerError(v3_gpt4o_run03_OrdersRestControllerTest.java:99)

[[1;31mERROR[m] testGetOrders  Time elapsed: 0.071 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run03_OrdersRestControllerTest.getAccessToken(v3_gpt4o_run03_OrdersRestControllerTest.java:110)
	at market.v3_gpt4o_run03_OrdersRestControllerTest.testGetOrders(v3_gpt4o_run03_OrdersRestControllerTest.java:69)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:37,157 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:37,157 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:37,159 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:37,159 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:37,451 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:37,490 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:37,551 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:37,576 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3579e402' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:37,578 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:37,637 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:37,638 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:53:37,638 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:37,639 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:37,658 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:37,658 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 499 ms
2024-12-08 14:53:37,698 INFO  [main] c.z.h.HikariDataSource - HikariPool-3 - Starting...
2024-12-08 14:53:37,700 INFO  [main] c.z.h.HikariDataSource - HikariPool-3 - Start completed.
2024-12-08 14:53:37,748 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:37,788 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:37,822 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:37,825 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:38,075 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:38,075 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:38,388 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:38,597 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@21c17ad8, org.springframework.security.web.context.SecurityContextPersistenceFilter@5f74060c, org.springframework.security.web.header.HeaderWriterFilter@1fee4279, org.springframework.security.web.authentication.logout.LogoutFilter@4f470b2f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@fa56c07, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2791c457, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4a01a756, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6574a73f, org.springframework.security.web.session.SessionManagementFilter@703146da, org.springframework.security.web.access.ExceptionTranslationFilter@efedc61, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@79fe3a5]
2024-12-08 14:53:38,635 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:38,749 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:53:38,752 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 46231 (http) with context path ''
2024-12-08 14:53:38,985 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.867 seconds (JVM running for 21.724)
2024-12-08 14:53:39,105 INFO  [http-nio-auto-3-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:39,106 INFO  [http-nio-auto-3-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:39,107 INFO  [http-nio-auto-3-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:53:39,502 WARN  [http-nio-auto-3-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
2024-12-08 14:53:39,628 WARN  [http-nio-auto-3-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/99999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:39,810 WARN  [http-nio-auto-3-exec-5] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'DELETE' not supported]
Request method:	DELETE
Request URI:	http://localhost:46231/customer/orders
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:39 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:39.812+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/customer/orders"
}
2024-12-08 14:53:39,840 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:53:39,840 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:39,841 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:39,844 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-3"]
2024-12-08 14:53:39,848 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-3"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m5[m, [1;31mFailures: [0;1;31m1[m, Errors: 0, Skipped: 0, Time elapsed: 2.714 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run02_OrdersRestControllerTest[m
[[1;31mERROR[m] testServerErrorSimulation  Time elapsed: 0.056 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code (is <500> or is <502> or is <503> or is <504>) but was <405>.

	at market.v3_gpt4turbo_run02_OrdersRestControllerTest.testServerErrorSimulation(v3_gpt4turbo_run02_OrdersRestControllerTest.java:104)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:39,895 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:39,895 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:39,897 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:39,897 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:40,202 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:40,244 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:40,300 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:40,323 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2dbaee26' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:40,326 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:40,377 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:40,378 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:53:40,379 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:40,379 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:40,402 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:40,402 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 504 ms
2024-12-08 14:53:40,451 INFO  [main] c.z.h.HikariDataSource - HikariPool-4 - Starting...
2024-12-08 14:53:40,453 INFO  [main] c.z.h.HikariDataSource - HikariPool-4 - Start completed.
2024-12-08 14:53:40,482 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:40,505 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:40,525 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:40,527 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:40,668 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:40,669 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:40,879 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:41,088 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52191316, org.springframework.security.web.context.SecurityContextPersistenceFilter@102f0c44, org.springframework.security.web.header.HeaderWriterFilter@55435517, org.springframework.security.web.authentication.logout.LogoutFilter@61948c49, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6ba5b93a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ec5da77, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@31e1d355, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@516cd110, org.springframework.security.web.session.SessionManagementFilter@112539bf, org.springframework.security.web.access.ExceptionTranslationFilter@55876066, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4d72557e]
2024-12-08 14:53:41,122 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:41,235 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:53:41,238 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 38887 (http) with context path ''
2024-12-08 14:53:41,424 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.566 seconds (JVM running for 24.163)
2024-12-08 14:53:41,499 INFO  [http-nio-auto-4-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:41,499 INFO  [http-nio-auto-4-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:41,501 INFO  [http-nio-auto-4-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:42,112 WARN  [http-nio-auto-4-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='cartItemDTO', description='uri=/customer/cart', fieldErrors=[{field='quantity', message='Value shall be a positive number'}]}
Request method:	PUT
Request URI:	http://localhost:38887/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": 2
}

HTTP/1.1 200 
Set-Cookie: JSESSIONID=1A045CB000F860FDB5C8E1B2ADF8652E; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:41 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "user": "ivan.petrov@yandex.ru",
    "totalItems": 1,
    "productsCost": 6517.0,
    "deliveryCost": 400,
    "deliveryIncluded": true,
    "totalCost": 6917.0,
    "cartItems": [
        {
            "productId": 5,
            "quantity": 1,
            "_links": {
                "View product": {
                    "href": "http://localhost:38887/products/5"
                }
            }
        }
    ],
    "empty": false,
    "_links": {
        "Customer contacts": {
            "href": "http://localhost:38887/customer/contacts"
        },
        "Proceed to payment": {
            "href": "http://localhost:38887/customer/cart/pay"
        }
    }
}
2024-12-08 14:53:42,657 WARN  [http-nio-auto-4-exec-6] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:53:42,657 ERROR [http-nio-auto-4-exec-6] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:53:42,665 ERROR [http-nio-auto-4-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d5d8863.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$a9e8a17_4.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:38887/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=CFC12E3AA68291D2C1720B43847DA5BC; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:41 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:42,704 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:53:42,705 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:42,706 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:42,712 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-4"]
2024-12-08 14:53:42,716 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-4"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 2.865 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run02_CartRestControllerTest[m
[[1;31mERROR[m] testAddItemSuccess  Time elapsed: 0.189 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path cartItems.productId doesn't match.
Expected: a collection containing <1>
  Actual: [5]

	at market.v3_gpt4turbo_run02_CartRestControllerTest.testAddItemSuccess(v3_gpt4turbo_run02_CartRestControllerTest.java:74)

[[1;31mERROR[m] testPayByCardSuccess  Time elapsed: 0.241 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4turbo_run02_CartRestControllerTest.testPayByCardSuccess(v3_gpt4turbo_run02_CartRestControllerTest.java:101)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:42,759 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:42,759 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:42,761 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:42,761 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:43,030 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:43,064 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:43,117 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:43,139 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3228e45d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:43,141 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:43,185 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:43,186 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:53:43,187 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:43,187 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:43,204 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:43,204 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 443 ms
2024-12-08 14:53:43,252 INFO  [main] c.z.h.HikariDataSource - HikariPool-5 - Starting...
2024-12-08 14:53:43,254 INFO  [main] c.z.h.HikariDataSource - HikariPool-5 - Start completed.
2024-12-08 14:53:43,284 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:43,314 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:43,343 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:43,346 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:43,521 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:43,521 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:43,732 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:43,920 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3bb29463, org.springframework.security.web.context.SecurityContextPersistenceFilter@5a47ee3c, org.springframework.security.web.header.HeaderWriterFilter@2b3827e7, org.springframework.security.web.authentication.logout.LogoutFilter@774ffecd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@79fdcb65, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f079a1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b9d7167, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@61b5b0bb, org.springframework.security.web.session.SessionManagementFilter@217b0078, org.springframework.security.web.access.ExceptionTranslationFilter@15a9c8b5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@99a41be]
2024-12-08 14:53:43,975 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:44,088 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:53:44,091 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 44189 (http) with context path ''
2024-12-08 14:53:44,228 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.508 seconds (JVM running for 26.967)
2024-12-08 14:53:44,293 INFO  [http-nio-auto-5-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:44,294 INFO  [http-nio-auto-5-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:44,295 INFO  [http-nio-auto-5-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:53:44,339 WARN  [http-nio-auto-5-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:53:44,381 WARN  [http-nio-auto-5-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='address', message='The value shall not be empty'}, {field='phone', message='The value shall not be empty'}]}
2024-12-08 14:53:44,417 WARN  [http-nio-auto-5-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:53:44,503 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:53:44,504 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:44,504 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:44,506 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-5"]
2024-12-08 14:53:44,510 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-5"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m4[m, [1;31mFailures: [0;1;31m1[m, Errors: 0, Skipped: 0, Time elapsed: 1.745 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run03_RestErrorResponseTest[m
[[1;31mERROR[m] testValidResponse_for500InternalError_whenFieldError  Time elapsed: 0.082 s  <<< FAILURE!
org.opentest4j.AssertionFailedError: expected: <true> but was: <false>
	at market.v3_gpt4turbo_run03_RestErrorResponseTest.testValidResponse_for500InternalError_whenFieldError(v3_gpt4turbo_run03_RestErrorResponseTest.java:72)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:44,541 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:44,542 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:44,544 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:44,544 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:44,798 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:44,829 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:44,879 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:44,902 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@16e673c1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:44,904 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:44,977 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:44,978 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:53:44,978 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:44,979 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:44,996 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:44,996 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 452 ms
2024-12-08 14:53:45,030 INFO  [main] c.z.h.HikariDataSource - HikariPool-6 - Starting...
2024-12-08 14:53:45,032 INFO  [main] c.z.h.HikariDataSource - HikariPool-6 - Start completed.
2024-12-08 14:53:45,052 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:45,071 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:45,088 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:45,090 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:45,221 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:45,221 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:45,416 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:45,591 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e69e8a9, org.springframework.security.web.context.SecurityContextPersistenceFilter@2e59a0ed, org.springframework.security.web.header.HeaderWriterFilter@381fff09, org.springframework.security.web.authentication.logout.LogoutFilter@5686dc92, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@60a9f87c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ba84e66, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c8807ad, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2f7b2750, org.springframework.security.web.session.SessionManagementFilter@540db0ec, org.springframework.security.web.access.ExceptionTranslationFilter@d2d172f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1c9b9606]
2024-12-08 14:53:45,621 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:45,729 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:53:45,731 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 43715 (http) with context path ''
2024-12-08 14:53:45,866 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.352 seconds (JVM running for 28.605)
2024-12-08 14:53:45,941 INFO  [http-nio-auto-6-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:45,941 INFO  [http-nio-auto-6-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:45,943 INFO  [http-nio-auto-6-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:45,947 WARN  [http-nio-auto-6-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:43715/customer/cart/delivery?included=true
Proxy:			<none>
Request params:	<none>
Query params:	included=true
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart/delivery",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:45,977 WARN  [http-nio-auto-6-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:53:46,020 WARN  [http-nio-auto-6-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:53:46,051 WARN  [http-nio-auto-6-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='cartItemDTO', description='uri=/customer/cart', fieldErrors=[{field='quantity', message='Value shall be a positive number'}]}
Request method:	PUT
Request URI:	http://localhost:43715/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "quantity": -1,
    "productId": 1
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart",
    "entityName": "cartItemDTO",
    "fieldErrors": [
        {
            "field": "quantity",
            "message": "Value shall be a positive number"
        }
    ]
}
2024-12-08 14:53:46,087 WARN  [http-nio-auto-6-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:43715/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:46,112 WARN  [http-nio-auto-6-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	DELETE
Request URI:	http://localhost:43715/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:46,132 WARN  [http-nio-auto-6-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:43715/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:46,159 WARN  [http-nio-auto-6-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:43715/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:46,189 WARN  [http-nio-auto-6-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:43715/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "quantity": 2,
    "productId": 1
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:46,212 WARN  [http-nio-auto-6-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:53:46,236 WARN  [http-nio-auto-6-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:43715/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "quantity": 2,
    "productId": 999
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:45 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:46,267 WARN  [http-nio-auto-6-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
2024-12-08 14:53:46,288 WARN  [http-nio-auto-6-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:53:46,301 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:53:46,301 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:46,302 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:46,304 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-6"]
2024-12-08 14:53:46,308 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-6"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m13[m, [1;31mFailures: [0;1;31m8[m, Errors: 0, Skipped: 0, Time elapsed: 1.791 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_CartRestControllerTest[m
[[1;31mERROR[m] testSetDelivery  Time elapsed: 0.038 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testSetDelivery(v3_gpt4o_run03_CartRestControllerTest.java:106)

[[1;31mERROR[m] testAddItemToCartInvalidQuantity  Time elapsed: 0.032 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <406>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidQuantity(v3_gpt4o_run03_CartRestControllerTest.java:233)

[[1;31mERROR[m] testPayByCard  Time elapsed: 0.036 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testPayByCard(v3_gpt4o_run03_CartRestControllerTest.java:123)

[[1;31mERROR[m] testClearCart  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testClearCart(v3_gpt4o_run03_CartRestControllerTest.java:94)

[[1;31mERROR[m] testGetCart  Time elapsed: 0.019 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testGetCart(v3_gpt4o_run03_CartRestControllerTest.java:65)

[[1;31mERROR[m] testPayByCardEmptyCart  Time elapsed: 0.03 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testPayByCardEmptyCart(v3_gpt4o_run03_CartRestControllerTest.java:216)

[[1;31mERROR[m] testAddItemToCart  Time elapsed: 0.028 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testAddItemToCart(v3_gpt4o_run03_CartRestControllerTest.java:83)

[[1;31mERROR[m] testAddItemToCartInvalidProduct  Time elapsed: 0.027 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidProduct(v3_gpt4o_run03_CartRestControllerTest.java:200)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:46,349 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:46,350 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:46,351 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:46,351 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:46,604 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:46,636 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:46,686 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:46,707 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@52a803d4' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:46,709 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:46,758 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:46,759 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:53:46,759 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:46,760 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:46,773 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:46,773 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 421 ms
2024-12-08 14:53:46,813 INFO  [main] c.z.h.HikariDataSource - HikariPool-7 - Starting...
2024-12-08 14:53:46,815 INFO  [main] c.z.h.HikariDataSource - HikariPool-7 - Start completed.
2024-12-08 14:53:46,841 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:46,868 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:46,891 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:46,894 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:47,078 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:47,078 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:47,283 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:47,468 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3aa950b1, org.springframework.security.web.context.SecurityContextPersistenceFilter@5dbfb9b9, org.springframework.security.web.header.HeaderWriterFilter@477cdb1f, org.springframework.security.web.authentication.logout.LogoutFilter@6730ec3d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6972cc71, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6088114, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@270d16e9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6a3cc3a4, org.springframework.security.web.session.SessionManagementFilter@59ca27b, org.springframework.security.web.access.ExceptionTranslationFilter@68d67745, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5abc1b69]
2024-12-08 14:53:47,506 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:47,611 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:53:47,613 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42253 (http) with context path ''
2024-12-08 14:53:47,751 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.438 seconds (JVM running for 30.49)
2024-12-08 14:53:47,799 INFO  [http-nio-auto-7-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:47,799 INFO  [http-nio-auto-7-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:47,800 INFO  [http-nio-auto-7-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
Request method:	GET
Request URI:	http://localhost:42253/customer
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:47 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:48.029+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:53:48,078 WARN  [http-nio-auto-7-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:42253/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:47 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
Request method:	GET
Request URI:	http://localhost:42253/trigger-internal-server-error
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:47 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:53:48.109+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/trigger-internal-server-error"
}
Request method:	GET
Request URI:	http://localhost:42253/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:47 GMT
Keep-Alive: timeout=60
Connection: keep-alive

[
    {
        "productId": 1,
        "distillery": "Ardbeg",
        "name": "Ten",
        "price": 4420.0,
        "age": 10,
        "volume": 700,
        "alcohol": 46.0,
        "description": "Ten Years Old is the basis of the Ardbeg range. After 10 years of maturation in ex-bourbon casks, the whiskey bottled at 46% ABV without cold filtering. The characteristic peat, although clearly present but in perfect balance with the natural sweetness and not predominant in the taste.",
        "available": false,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/1"
            }
        ]
    },
    {
        "productId": 2,
        "distillery": "Ardbeg",
        "name": "Uigeadail",
        "price": 7020.0,
        "age": 0,
        "volume": 700,
        "alcohol": 54.2,
        "description": "Ardbeg Uigedael is named after Loch Uigedael, the lake in the grounds of the distillery Ardbeg which are the water is an important factor in the distilling process. The Uigedael a vatted malt, bottled at 54.2% ABV without cold filtering. Ardbeg Uigedael has no age indication for the expression consists of various malts of different ages. Malts are used partly matured in ex-bourbon and partly on ex-sherry casks.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/2"
            }
        ]
    },
    {
        "productId": 3,
        "distillery": "Balvenie",
        "name": "12 y.o. Doublewood",
        "price": 5403.0,
        "age": 12,
        "volume": 700,
        "alcohol": 40.0,
        "description": "Has clear influences from both bourbon and sherry wood. This malt has only 12 years aged in bourbon casks and then 3 months in young Oloroso casks. The peppery character from the bourbon barrels, penetrates, as it were by the rich and full aroma of Oloroso casks it. The Balvenie Double Wood is therefore a very complex malt.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/3"
            }
        ]
    },
    {
        "productId": 4,
        "distillery": "Caol Ila",
        "name": "12 y.o.",
        "price": 4913.0,
        "age": 12,
        "volume": 700,
        "alcohol": 43.0,
        "description": "Smoked ham comes across delicately with citrus and cigar leaves. Fresh and smoky, probably the best part of this whisky. With an almost full body, oil and tar meet subtle smoke. Hints of sweet tastes like honey. Some spices like pepper combined with little sweetness.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/4"
            }
        ]
    },
    {
        "productId": 5,
        "distillery": "Dalwhinnie",
        "name": "15 y.o.",
        "price": 6517.0,
        "age": 15,
        "volume": 750,
        "alcohol": 43.0,
        "description": "A good introduction to the delights of single malt whisky ‚Äì elegant, smooth and medium-bodied, with a light, fruity palate and a whiff of heather on the finish. Part of Diageo's Classic Malt range. ",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/5"
            }
        ]
    },
    {
        "productId": 6,
        "distillery": "Lagavulin",
        "name": "16 y.o.",
        "price": 6620.0,
        "age": 16,
        "volume": 750,
        "alcohol": 43.0,
        "description": "The Islay representative in the 'Classic Malts' series is a deep, dry and exceptionally peaty bruiser. Probably the most pungent of all Islay malts, Lagavulin is not for the faint-hearted but inspires fanatical devotion in its many followers.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/6"
            }
        ]
    },
    {
        "productId": 7,
        "distillery": "Laphroaig",
        "name": "Quarter Cask",
        "price": 5100.0,
        "age": 0,
        "volume": 700,
        "alcohol": 48.0,
        "description": "A vibrant young Laphroaig whose maturation has been accelerated by ageing in quarter casks. This shows soft sweetness and a velvety feel when first tasted, then the intense peatiness so unique to Laphroaig comes bursting through. A terrific whisky and great value.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/7"
            }
        ]
    },
    {
        "productId": 8,
        "distillery": "Springbank",
        "name": "12 y.o. Cask Strength Batch 6",
        "price": 8127.0,
        "age": 12,
        "volume": 700,
        "alcohol": 53.1,
        "description": "Like a storm gathering of the Kintyre coast, dark and ominous, yet tastes so good. The richness comes from the high percentage of sherry casks used in maturation. This is a truly classic Springbank, best enjoyed after dinner, or with your favourite cigar.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/8"
            }
        ]
    },
    {
        "productId": 9,
        "distillery": "Springbank",
        "name": "18 y.o.",
        "price": 14490.0,
        "age": 18,
        "volume": 700,
        "alcohol": 46.0,
        "description": "This heavily sherried 18-year-old Springbank has been bottled by Mark Reynier as part of his Renegade series. Distilled in 1995, this sherry hogshead was aged for 10 years in Campbeltown and then moved to Bruichladdich for a further eight years.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/9"
            }
        ]
    },
    {
        "productId": 10,
        "distillery": "Talisker",
        "name": "10 y.o.",
        "price": 4683.0,
        "age": 10,
        "volume": 750,
        "alcohol": 45.8,
        "description": "Powerful peat smoke with the salinity of sea water and the moisture of fresh oysters. Full sweetness of dried fruit with smoke and strong aromas of malted barley, warm and intense. Peppery in the mouth. Big, long, warming and peppery on the finish with an attractive sweetness.",
        "available": true,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/10"
            }
        ]
    },
    {
        "productId": 11,
        "distillery": "Glenkinchie",
        "name": "12 y.o.",
        "price": 4547.0,
        "age": 12,
        "volume": 700,
        "alcohol": 43.0,
        "description": "A light, delicate whiskey; sweet and creamy with a subtle floral aroma. This subtle, refined Lowland is ideal as an aperitif; try it straight from the fridge or freezer.",
        "available": false,
        "links": [
            {
                "rel": "self",
                "href": "http://localhost:42253/products/11"
            }
        ]
    }
]
2024-12-08 14:53:48,202 WARN  [http-nio-auto-7-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:48,222 WARN  [http-nio-auto-7-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:53:48,242 WARN  [http-nio-auto-7-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:53:48,269 WARN  [http-nio-auto-7-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/9999', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:42253/customer/orders/9999
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	orderId=9999
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:47 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/orders/9999",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:48,313 WARN  [http-nio-auto-7-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:53:48,341 WARN  [http-nio-auto-7-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:53:48,416 WARN  [http-nio-auto-7-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='name', message='Only letters, whitespace, hyphen and apostrophe are allowed'}, {field='address', message='Special characters are not allowed'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='password', message='Length shall be between 6 and 50 characters'}, {field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:53:48,454 WARN  [http-nio-auto-7-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='address', message='Pattern.contactsDTO.address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:53:48,488 WARN  [http-nio-auto-7-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}]}
Request method:	POST
Request URI:	http://localhost:42253/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "1234-5678-9876-5432"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:47 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart/pay",
    "entityName": "creditCardDTO",
    "fieldErrors": [
        {
            "field": "ccNumber",
            "message": "Not a valid credit card number"
        }
    ]
}
2024-12-08 14:53:48,501 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:53:48,501 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:48,502 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:48,504 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-7"]
2024-12-08 14:53:48,507 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-7"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m14[m, [1;31mFailures: [0;1;31m6[m, Errors: 0, Skipped: 0, Time elapsed: 2.186 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_RestExceptionHandlerTest[m
[[1;31mERROR[m] testGetCustomerNotFound  Time elapsed: 0.251 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetCustomerNotFound(v3_gpt4o_run02_RestExceptionHandlerTest.java:65)

[[1;31mERROR[m] testGetContactsNotFound  Time elapsed: 0.028 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetContactsNotFound(v3_gpt4o_run02_RestExceptionHandlerTest.java:125)

[[1;31mERROR[m] testInternalServerError  Time elapsed: 0.026 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <404>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testInternalServerError(v3_gpt4o_run02_RestExceptionHandlerTest.java:195)

[[1;31mERROR[m] testGetProductsUnauthorized  Time elapsed: 0.084 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <401> but was <200>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetProductsUnauthorized(v3_gpt4o_run02_RestExceptionHandlerTest.java:165)

[[1;31mERROR[m] testGetOrderNotFound  Time elapsed: 0.026 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testGetOrderNotFound(v3_gpt4o_run02_RestExceptionHandlerTest.java:156)

[[1;31mERROR[m] testPayByCardWithoutAuth  Time elapsed: 0.035 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <401> but was <406>.

	at market.v3_gpt4o_run02_RestExceptionHandlerTest.testPayByCardWithoutAuth(v3_gpt4o_run02_RestExceptionHandlerTest.java:115)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:48,543 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:48,543 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:48,545 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:48,545 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:48,805 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:48,835 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:48,885 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:48,905 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@48157f44' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:48,906 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:48,950 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:48,952 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:53:48,952 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:48,953 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:48,968 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:48,969 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 423 ms
2024-12-08 14:53:49,003 INFO  [main] c.z.h.HikariDataSource - HikariPool-8 - Starting...
2024-12-08 14:53:49,004 INFO  [main] c.z.h.HikariDataSource - HikariPool-8 - Start completed.
2024-12-08 14:53:49,023 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:49,043 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:49,059 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:49,061 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:49,211 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:49,211 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:49,391 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:49,549 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23a0b262, org.springframework.security.web.context.SecurityContextPersistenceFilter@3a684860, org.springframework.security.web.header.HeaderWriterFilter@3354839f, org.springframework.security.web.authentication.logout.LogoutFilter@1be310ef, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6e91b638, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5a9ce137, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4d43c980, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6796a5fe, org.springframework.security.web.session.SessionManagementFilter@7b8aaafb, org.springframework.security.web.access.ExceptionTranslationFilter@4dc5aa30, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@165d3739]
2024-12-08 14:53:49,578 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:49,688 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:53:49,690 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 46729 (http) with context path ''
2024-12-08 14:53:49,837 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.325 seconds (JVM running for 32.576)
2024-12-08 14:53:49,882 INFO  [http-nio-auto-8-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:49,883 INFO  [http-nio-auto-8-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:49,885 INFO  [http-nio-auto-8-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:50,417 WARN  [http-nio-auto-8-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}]}
Request method:	POST
Request URI:	http://localhost:46729/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "1234567890123456"
}

HTTP/1.1 406 
Set-Cookie: JSESSIONID=DD19855640952E94B64E8583743E8A87; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:50 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart/pay",
    "entityName": "creditCardDTO",
    "fieldErrors": [
        {
            "field": "ccNumber",
            "message": "Not a valid credit card number"
        }
    ]
}
2024-12-08 14:53:50,586 WARN  [http-nio-auto-8-exec-4] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:53:50,586 ERROR [http-nio-auto-8-exec-4] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:53:50,588 ERROR [http-nio-auto-8-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d5d8863.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$a9e8a17_8.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:46729/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=4316C1C44E0619082B9AF73ADF2F8C04; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:50 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:50,960 WARN  [http-nio-auto-8-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='Product', description='uri=/customer/cart', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:50,969 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:53:50,969 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:50,970 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:50,972 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-8"]
2024-12-08 14:53:50,974 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-8"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m7[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 2.452 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run01_CartRestControllerTest[m
[[1;31mERROR[m] testPayByCardInvalidNumber  Time elapsed: 0.153 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path message doesn't match.
Expected: a string containing "Not a valid credit card number"
  Actual: Argument validation error

	at market.v3_gpt4turbo_run01_CartRestControllerTest.testPayByCardInvalidNumber(v3_gpt4turbo_run01_CartRestControllerTest.java:124)

[[1;31mERROR[m] testPayByCardValid  Time elapsed: 0.194 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4turbo_run01_CartRestControllerTest.testPayByCardValid(v3_gpt4turbo_run01_CartRestControllerTest.java:112)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:51,011 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:51,012 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:51,013 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:51,013 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:51,243 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:51,272 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:51,322 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:51,338 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@11c24ed1' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:51,340 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:51,405 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:51,407 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:53:51,407 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:51,407 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:51,421 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:51,421 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 408 ms
2024-12-08 14:53:51,454 INFO  [main] c.z.h.HikariDataSource - HikariPool-9 - Starting...
2024-12-08 14:53:51,456 INFO  [main] c.z.h.HikariDataSource - HikariPool-9 - Start completed.
2024-12-08 14:53:51,471 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:51,490 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:51,504 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:51,506 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:51,642 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:51,642 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:51,794 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:51,937 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e992556, org.springframework.security.web.context.SecurityContextPersistenceFilter@27b4909, org.springframework.security.web.header.HeaderWriterFilter@79932c1d, org.springframework.security.web.authentication.logout.LogoutFilter@60b1578b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3aebc7a5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c2a72a4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7cb946f8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7e72d7f9, org.springframework.security.web.session.SessionManagementFilter@6284c46b, org.springframework.security.web.access.ExceptionTranslationFilter@606fd406, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@183b4837]
2024-12-08 14:53:51,962 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:52,057 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:53:52,059 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 36869 (http) with context path ''
2024-12-08 14:53:52,178 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.199 seconds (JVM running for 34.917)
2024-12-08 14:53:52,227 INFO  [http-nio-auto-9-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:52,227 INFO  [http-nio-auto-9-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:52,229 INFO  [http-nio-auto-9-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:52,276 WARN  [http-nio-auto-9-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:36869/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:52 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:53:52,304 WARN  [http-nio-auto-9-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}, {field='password', message='Password shall consist of Latin letters and numbers'}]}
2024-12-08 14:53:52,327 WARN  [http-nio-auto-9-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:36869/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:52 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:53:52,351 WARN  [http-nio-auto-9-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:36869/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:52 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:53:52,375 WARN  [http-nio-auto-9-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='password', message='Password shall consist of Latin letters and numbers'}]}
Request method:	POST
Request URI:	http://localhost:36869/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "Petrov123!",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:52 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "userDTO",
    "fieldErrors": [
        {
            "field": "password",
            "message": "Password shall consist of Latin letters and numbers"
        }
    ]
}
2024-12-08 14:53:52,387 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:53:52,387 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:52,388 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:52,391 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-9"]
2024-12-08 14:53:52,394 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-9"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m4[m, Errors: 0, Skipped: 0, Time elapsed: 1.38 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_CustomerRestControllerTest[m
[[1;31mERROR[m] testSchemaValidation  Time elapsed: 0.047 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testSchemaValidation(v3_gpt4o_run02_CustomerRestControllerTest.java:158)

[[1;31mERROR[m] testCreateCustomerEmailExists  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomerEmailExists(v3_gpt4o_run02_CustomerRestControllerTest.java:85)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomer(v3_gpt4o_run02_CustomerRestControllerTest.java:69)

[[1;31mERROR[m] testGetCustomer  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run02_CustomerRestControllerTest.testGetCustomer(v3_gpt4o_run02_CustomerRestControllerTest.java:107)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:52,430 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:52,432 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:52,435 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:52,435 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:52,678 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:52,706 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:52,752 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:52,769 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@323fd3f0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:52,771 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:52,818 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:52,819 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:53:52,820 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:52,821 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:52,835 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:52,835 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 400 ms
2024-12-08 14:53:52,872 INFO  [main] c.z.h.HikariDataSource - HikariPool-10 - Starting...
2024-12-08 14:53:52,873 INFO  [main] c.z.h.HikariDataSource - HikariPool-10 - Start completed.
2024-12-08 14:53:52,890 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:52,908 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:52,923 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:52,925 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:53,043 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:53,044 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:53,202 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:53,350 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a6742d6, org.springframework.security.web.context.SecurityContextPersistenceFilter@7301440b, org.springframework.security.web.header.HeaderWriterFilter@371786d8, org.springframework.security.web.authentication.logout.LogoutFilter@781269c0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@91029f5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@188640db, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@132c3455, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@28e1a494, org.springframework.security.web.session.SessionManagementFilter@2446d648, org.springframework.security.web.access.ExceptionTranslationFilter@1ddec646, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@18cd000b]
2024-12-08 14:53:53,376 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:53,481 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:53:53,484 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 46571 (http) with context path ''
2024-12-08 14:53:53,611 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.211 seconds (JVM running for 36.35)
2024-12-08 14:53:53,651 INFO  [http-nio-auto-10-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:53,651 INFO  [http-nio-auto-10-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:53,653 INFO  [http-nio-auto-10-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:53,660 WARN  [http-nio-auto-10-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/-1', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:53,686 ERROR [http-nio-auto-10-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "abc"', entityName='null', description='uri=/products/abc', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "abc"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NumberFormatException: For input string: "abc"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.base/java.lang.Long.parseLong(Long.java:692)
	at java.base/java.lang.Long.valueOf(Long.java:1144)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:53:53,805 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:53:53,805 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:53,806 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:53,808 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-10"]
2024-12-08 14:53:53,811 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-10"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m4[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.404 s - in market.[1mv3_gpt4turbo_run03_ProductsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:53,839 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:53,840 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:53,841 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:53,841 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:54,069 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:54,101 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:54,146 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:54,191 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@71c05df0' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:54,192 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:54,250 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:54,252 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:53:54,252 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:54,253 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:54,273 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:54,273 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 431 ms
2024-12-08 14:53:54,314 INFO  [main] c.z.h.HikariDataSource - HikariPool-11 - Starting...
2024-12-08 14:53:54,315 INFO  [main] c.z.h.HikariDataSource - HikariPool-11 - Start completed.
2024-12-08 14:53:54,341 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:54,367 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:54,389 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:54,391 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:54,565 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:54,566 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:54,771 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:54,950 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ac95422, org.springframework.security.web.context.SecurityContextPersistenceFilter@61a471ce, org.springframework.security.web.header.HeaderWriterFilter@78daf32, org.springframework.security.web.authentication.logout.LogoutFilter@5084187f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3bccd163, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3df6d983, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57e80530, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4d373598, org.springframework.security.web.session.SessionManagementFilter@19fb975f, org.springframework.security.web.access.ExceptionTranslationFilter@1918a2c3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4fc4b537]
2024-12-08 14:53:54,979 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:55,074 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:53:55,076 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 33803 (http) with context path ''
2024-12-08 14:53:55,185 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.371 seconds (JVM running for 37.924)
2024-12-08 14:53:55,230 INFO  [http-nio-auto-11-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:55,230 INFO  [http-nio-auto-11-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:55,232 INFO  [http-nio-auto-11-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:55,262 WARN  [http-nio-auto-11-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:53:55,539 ERROR [http-nio-auto-11-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='JSON parse error: Unexpected character ('i' (code 105)): was expecting double-quote to start field name; nested exception is com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name
 at [Source: (PushbackInputStream); line: 1, column: 3]', entityName='null', description='uri=/register', fieldErrors=[]}
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unexpected character ('i' (code 105)): was expecting double-quote to start field name; nested exception is com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name
 at [Source: (PushbackInputStream); line: 1, column: 3]
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:387)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:342)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:186)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:158)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:131)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.fasterxml.jackson.core.JsonParseException: Unexpected character ('i' (code 105)): was expecting double-quote to start field name
 at [Source: (PushbackInputStream); line: 1, column: 3]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1851)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:707)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:632)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleOddName(UTF8StreamJsonParser.java:2049)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._parseName(UTF8StreamJsonParser.java:1700)
	at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:761)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:160)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4526)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3521)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:376)
	... 89 more
2024-12-08 14:53:55,570 WARN  [http-nio-auto-11-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:33803/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:53:55,600 WARN  [http-nio-auto-11-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:33803/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:53:55,625 WARN  [http-nio-auto-11-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:33803/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:55 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:53:55,637 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:53:55,638 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:55,638 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:55,641 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-11"]
2024-12-08 14:53:55,644 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-11"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m7[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.825 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_CustomerRestControllerTest[m
[[1;31mERROR[m] testCreateCustomerEmailExists  Time elapsed: 0.006 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomerEmailExists(v3_gpt4o_run03_CustomerRestControllerTest.java:111)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.028 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomer(v3_gpt4o_run03_CustomerRestControllerTest.java:87)

[[1;31mERROR[m] testGetCustomerAfterRegistration  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_CustomerRestControllerTest.testGetCustomerAfterRegistration(v3_gpt4o_run03_CustomerRestControllerTest.java:159)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:55,680 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:55,681 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:55,682 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:55,682 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:55,975 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:56,016 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 40 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:56,081 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:56,131 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@24c67975' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:56,133 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:56,190 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:56,192 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:53:56,192 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:56,193 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:56,209 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:56,209 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 527 ms
2024-12-08 14:53:56,250 INFO  [main] c.z.h.HikariDataSource - HikariPool-12 - Starting...
2024-12-08 14:53:56,252 INFO  [main] c.z.h.HikariDataSource - HikariPool-12 - Start completed.
2024-12-08 14:53:56,272 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:56,293 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:56,313 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:56,315 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:56,460 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:56,461 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:56,665 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:56,801 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@249031ba, org.springframework.security.web.context.SecurityContextPersistenceFilter@5cfe4f34, org.springframework.security.web.header.HeaderWriterFilter@2d9ed8f, org.springframework.security.web.authentication.logout.LogoutFilter@a95ef08, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@73ac98af, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b28eef0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2650c38f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7137ccb, org.springframework.security.web.session.SessionManagementFilter@7dfff23b, org.springframework.security.web.access.ExceptionTranslationFilter@59bddb80, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@63a4f3f0]
2024-12-08 14:53:56,827 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:56,923 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:53:56,926 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 44307 (http) with context path ''
2024-12-08 14:53:57,034 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.383 seconds (JVM running for 39.773)
2024-12-08 14:53:57,071 INFO  [http-nio-auto-12-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:57,071 INFO  [http-nio-auto-12-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:57,073 INFO  [http-nio-auto-12-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:57,558 WARN  [http-nio-auto-12-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='Product', description='uri=/customer/cart', fieldErrors=[{field='id', message='No instance with this id'}]}
Request method:	PUT
Request URI:	http://localhost:44307/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 9999,
    "quantity": 3
}

HTTP/1.1 404 
Set-Cookie: JSESSIONID=86753FF2833324960671FCB696D6420F; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:57 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Requested entity doesn't exist",
    "description": "uri=/customer/cart",
    "entityName": "Product",
    "fieldErrors": [
        {
            "field": "id",
            "message": "No instance with this id"
        }
    ]
}
2024-12-08 14:53:58,014 WARN  [http-nio-auto-12-exec-8] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:53:58,014 ERROR [http-nio-auto-12-exec-8] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:53:58,016 ERROR [http-nio-auto-12-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d5d8863.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$a9e8a17_12.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:44307/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=912B581F140C188E69BF087172D52A7F; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:53:57 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:53:58,030 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:53:58,031 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:58,032 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:58,034 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-12"]
2024-12-08 14:53:58,038 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-12"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 2.419 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run03_CartRestControllerTest[m
[[1;31mERROR[m] testInternalServerErrorOnAddItem  Time elapsed: 0.162 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <404>.

	at market.v3_gpt4turbo_run03_CartRestControllerTest.testInternalServerErrorOnAddItem(v3_gpt4turbo_run03_CartRestControllerTest.java:110)

[[1;31mERROR[m] testPayByCardSuccess  Time elapsed: 0.178 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4turbo_run03_CartRestControllerTest.testPayByCardSuccess(v3_gpt4turbo_run03_CartRestControllerTest.java:100)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:58,078 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:58,080 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:58,082 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:58,082 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:58,269 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:53:58,296 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 8 JPA repository interfaces.
2024-12-08 14:53:58,347 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:58,364 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3a57a546' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:58,366 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:53:58,408 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:53:58,409 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:53:58,409 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:53:58,410 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:53:58,422 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:53:58,422 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 340 ms
2024-12-08 14:53:58,452 INFO  [main] c.z.h.HikariDataSource - HikariPool-13 - Starting...
2024-12-08 14:53:58,454 INFO  [main] c.z.h.HikariDataSource - HikariPool-13 - Start completed.
2024-12-08 14:53:58,470 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:53:58,487 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:53:58,504 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:58,506 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:53:58,611 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:53:58,611 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:53:58,783 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:53:59,008 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@26925acf, org.springframework.security.web.context.SecurityContextPersistenceFilter@25611b6, org.springframework.security.web.header.HeaderWriterFilter@245c045, org.springframework.security.web.authentication.logout.LogoutFilter@2dd8d46f, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@421ea34, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2074af0a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c1f14a9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e5e6029, org.springframework.security.web.session.SessionManagementFilter@13501da1, org.springframework.security.web.access.ExceptionTranslationFilter@31726e58, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@25400497]
2024-12-08 14:53:59,048 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:53:59,187 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:53:59,192 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 32819 (http) with context path ''
2024-12-08 14:53:59,319 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.276 seconds (JVM running for 42.058)
2024-12-08 14:53:59,362 INFO  [http-nio-auto-13-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:53:59,362 INFO  [http-nio-auto-13-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:53:59,364 INFO  [http-nio-auto-13-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:53:59,462 WARN  [http-nio-auto-13-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:59,674 WARN  [http-nio-auto-13-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/-1', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:53:59,684 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:53:59,684 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:53:59,685 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:53:59,687 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-13"]
2024-12-08 14:53:59,690 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-13"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m7[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.611 s - in market.[1mv3_gpt4o_run01_ProductsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:53:59,723 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:53:59,723 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:53:59,725 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:53:59,725 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:53:59,982 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:00,008 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:00,053 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:00,071 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2cc83ea7' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:00,073 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:00,112 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:00,113 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:54:00,114 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:00,115 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:00,126 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:00,126 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 401 ms
2024-12-08 14:54:00,177 INFO  [main] c.z.h.HikariDataSource - HikariPool-14 - Starting...
2024-12-08 14:54:00,178 INFO  [main] c.z.h.HikariDataSource - HikariPool-14 - Start completed.
2024-12-08 14:54:00,193 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:00,215 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:00,230 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:00,232 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:00,346 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:00,346 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:00,590 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:00,736 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1fb9dcc1, org.springframework.security.web.context.SecurityContextPersistenceFilter@57ac45ad, org.springframework.security.web.header.HeaderWriterFilter@56d52ee1, org.springframework.security.web.authentication.logout.LogoutFilter@4eedd0ae, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1d5406d4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1eefabcc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61b22cd6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@319287df, org.springframework.security.web.session.SessionManagementFilter@16a18a07, org.springframework.security.web.access.ExceptionTranslationFilter@20fd2eea, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4da0a807]
2024-12-08 14:54:00,763 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:00,861 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:54:00,864 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34513 (http) with context path ''
2024-12-08 14:54:01,002 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.308 seconds (JVM running for 43.741)
2024-12-08 14:54:01,065 INFO  [http-nio-auto-14-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:01,065 INFO  [http-nio-auto-14-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:01,066 INFO  [http-nio-auto-14-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:01,109 WARN  [http-nio-auto-14-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/99999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:01,145 WARN  [http-nio-auto-14-exec-3] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
Request method:	POST
Request URI:	http://localhost:34513/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "name": "New Product",
    "volume": 750,
    "alcohol": 40,
    "price": 19.99,
    "available": true,
    "description": "A new product"
}

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:01 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:01.147+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/products"
}
2024-12-08 14:54:01,208 WARN  [http-nio-auto-14-exec-5] o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported]
Request method:	POST
Request URI:	http://localhost:34513/products
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "price": -1,
    "alcohol": 0,
    "available": true,
    "name": "",
    "volume": 0
}

HTTP/1.1 405 
Allow: GET
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:01 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:01.209+00:00",
    "status": 405,
    "error": "Method Not Allowed",
    "message": "",
    "path": "/products"
}
2024-12-08 14:54:01,289 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:54:01,289 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:01,290 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:01,292 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-14"]
2024-12-08 14:54:01,296 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-14"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m8[m, [1;31mFailures: [0;1;31m2[m, [1;31mErrors: [0;1;31m2[m, Skipped: 0, Time elapsed: 1.602 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_ProductsRestControllerTest[m
[[1;31mERROR[m] testSchemaValidationGetSingleProduct  Time elapsed: 0.045 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetSingleProduct(v3_gpt4o_run03_ProductsRestControllerTest.java:172)

[[1;31mERROR[m] testCreateProduct  Time elapsed: 0.021 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <405>.

	at market.v3_gpt4o_run03_ProductsRestControllerTest.testCreateProduct(v3_gpt4o_run03_ProductsRestControllerTest.java:120)

[[1;31mERROR[m] testCreateProductWithInvalidData  Time elapsed: 0.016 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <405>.

	at market.v3_gpt4o_run03_ProductsRestControllerTest.testCreateProductWithInvalidData(v3_gpt4o_run03_ProductsRestControllerTest.java:142)

[[1;31mERROR[m] testSchemaValidationGetProducts  Time elapsed: 0.024 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetProducts(v3_gpt4o_run03_ProductsRestControllerTest.java:159)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:01,329 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:01,330 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:01,332 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:01,332 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:01,531 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:01,554 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:01,600 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:01,618 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1c74891d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:01,619 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:01,656 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:01,657 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:54:01,658 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:01,658 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:01,671 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:01,671 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 339 ms
2024-12-08 14:54:01,701 INFO  [main] c.z.h.HikariDataSource - HikariPool-15 - Starting...
2024-12-08 14:54:01,703 INFO  [main] c.z.h.HikariDataSource - HikariPool-15 - Start completed.
2024-12-08 14:54:01,714 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:01,745 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:01,761 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:01,763 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:01,854 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:01,854 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:02,013 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:02,157 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c8b76f4, org.springframework.security.web.context.SecurityContextPersistenceFilter@23d541b, org.springframework.security.web.header.HeaderWriterFilter@5c437ae2, org.springframework.security.web.authentication.logout.LogoutFilter@21834f7c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@34979cde, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@78165c65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f45adef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@56869c3f, org.springframework.security.web.session.SessionManagementFilter@658268ea, org.springframework.security.web.access.ExceptionTranslationFilter@289a5960, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3974578f]
2024-12-08 14:54:02,183 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:02,274 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:54:02,276 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 43129 (http) with context path ''
2024-12-08 14:54:02,373 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.073 seconds (JVM running for 45.112)
2024-12-08 14:54:02,426 INFO  [http-nio-auto-15-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:02,427 INFO  [http-nio-auto-15-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:02,428 INFO  [http-nio-auto-15-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:02,444 WARN  [http-nio-auto-15-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:43129/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "address": "New Address",
    "phone": "+7 987 654 32 10"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:02 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:02,465 WARN  [http-nio-auto-15-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:43129/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:02 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:02,481 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:54:02,482 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:02,482 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:02,484 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-15"]
2024-12-08 14:54:02,486 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-15"]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:02,528 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:02,529 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:02,531 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:02,531 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:02,785 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:02,810 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:02,861 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:02,884 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3bac395' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:02,886 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:02,934 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:02,936 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:54:02,936 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:02,936 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:02,950 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:02,950 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 419 ms
2024-12-08 14:54:02,981 INFO  [main] c.z.h.HikariDataSource - HikariPool-16 - Starting...
2024-12-08 14:54:02,982 INFO  [main] c.z.h.HikariDataSource - HikariPool-16 - Start completed.
2024-12-08 14:54:02,994 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:03,011 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:03,026 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:03,028 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:03,157 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:03,159 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:03,360 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:03,545 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@285d3014, org.springframework.security.web.context.SecurityContextPersistenceFilter@3258cd0, org.springframework.security.web.header.HeaderWriterFilter@540d7309, org.springframework.security.web.authentication.logout.LogoutFilter@630bc17d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5e182763, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35f60cf8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a5ca474, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5bb4a870, org.springframework.security.web.session.SessionManagementFilter@7fc7374d, org.springframework.security.web.access.ExceptionTranslationFilter@578c2d29, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@449c6108]
2024-12-08 14:54:03,582 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:03,715 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:54:03,717 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 45551 (http) with context path ''
2024-12-08 14:54:03,829 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.329 seconds (JVM running for 46.568)
2024-12-08 14:54:03,865 INFO  [http-nio-auto-16-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:03,865 INFO  [http-nio-auto-16-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:03,867 INFO  [http-nio-auto-16-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:03,871 WARN  [http-nio-auto-16-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:45551/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:03 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:03,909 WARN  [http-nio-auto-16-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:45551/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "address": "New Address",
    "phone": "+7 987 654 32 10"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:03 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:03,925 WARN  [http-nio-auto-16-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:03,951 WARN  [http-nio-auto-16-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='address', message='Pattern.contactsDTO.address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
Request method:	PUT
Request URI:	http://localhost:45551/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "address": "Invalid Address #$%^",
    "phone": "Invalid Phone"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:03 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/contacts",
    "entityName": "contactsDTO",
    "fieldErrors": [
        {
            "field": "address",
            "message": "Pattern.contactsDTO.address"
        },
        {
            "field": "phone",
            "message": "Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)"
        }
    ]
}
2024-12-08 14:54:03,975 WARN  [http-nio-auto-16-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:03,984 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:54:03,985 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:03,986 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:03,988 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-16"]
2024-12-08 14:54:03,991 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-16"]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:04,028 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:04,028 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:04,029 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:04,029 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:04,258 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:04,286 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:04,335 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:04,355 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@bc67e20' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:04,356 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:04,398 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:04,400 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:54:04,400 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:04,401 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:04,413 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:04,413 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 384 ms
2024-12-08 14:54:04,446 INFO  [main] c.z.h.HikariDataSource - HikariPool-17 - Starting...
2024-12-08 14:54:04,448 INFO  [main] c.z.h.HikariDataSource - HikariPool-17 - Start completed.
2024-12-08 14:54:04,463 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:04,492 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:04,506 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:04,508 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:04,630 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:04,630 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:04,801 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:04,940 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25d9cf73, org.springframework.security.web.context.SecurityContextPersistenceFilter@137004ee, org.springframework.security.web.header.HeaderWriterFilter@503e7cf7, org.springframework.security.web.authentication.logout.LogoutFilter@76c22698, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@324ae349, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10769551, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@338c9a6c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1567c18c, org.springframework.security.web.session.SessionManagementFilter@4993e9f6, org.springframework.security.web.access.ExceptionTranslationFilter@3af73e57, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@37bd0e3b]
2024-12-08 14:54:04,967 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:05,061 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:54:05,064 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37283 (http) with context path ''
2024-12-08 14:54:05,173 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.171 seconds (JVM running for 47.912)
2024-12-08 14:54:05,189 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:54:05,190 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:05,192 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-17"]
2024-12-08 14:54:05,194 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-17"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m9[m, [1;31mFailures: [0;1;31m5[m, Errors: 0, Skipped: 0, Time elapsed: 3.892 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_ContactsRestControllerTest[m
[[1;31mERROR[m] testUpdateContactsSuccess  Time elapsed: 0.059 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSuccess(v3_gpt4o_run01_ContactsRestControllerTest.java:90)

[[1;31mERROR[m] testGetContactsSuccess  Time elapsed: 0.018 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testGetContactsSuccess(v3_gpt4o_run01_ContactsRestControllerTest.java:65)

[[1;31mERROR[m] testSchemaValidation  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testSchemaValidation(v3_gpt4o_run01_ContactsRestControllerTest.java:168)

[[1;31mERROR[m] testUpdateContactsSchemaValidation  Time elapsed: 0.036 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSchemaValidation(v3_gpt4o_run01_ContactsRestControllerTest.java:185)

[[1;31mERROR[m] testUpdateContactsInvalidInput  Time elapsed: 0.031 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <406>.

	at market.v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsInvalidInput(v3_gpt4o_run01_ContactsRestControllerTest.java:122)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:05,221 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:05,222 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:05,223 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:05,223 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:05,405 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:05,424 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:05,461 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:05,478 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3321ea4b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:05,479 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:05,509 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:05,510 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:54:05,511 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:05,511 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:05,522 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:05,522 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 298 ms
2024-12-08 14:54:05,562 INFO  [main] c.z.h.HikariDataSource - HikariPool-18 - Starting...
2024-12-08 14:54:05,563 INFO  [main] c.z.h.HikariDataSource - HikariPool-18 - Start completed.
2024-12-08 14:54:05,574 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:05,589 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:05,602 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:05,604 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:05,718 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:05,718 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:05,880 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:06,017 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7dab5542, org.springframework.security.web.context.SecurityContextPersistenceFilter@4721d913, org.springframework.security.web.header.HeaderWriterFilter@4abcf558, org.springframework.security.web.authentication.logout.LogoutFilter@70ad23a7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7808d2be, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@690f4565, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@44b47b29, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5fae5477, org.springframework.security.web.session.SessionManagementFilter@289abbc0, org.springframework.security.web.access.ExceptionTranslationFilter@2fa03416, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4807c0a0]
2024-12-08 14:54:06,045 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:06,157 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:54:06,160 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 35837 (http) with context path ''
2024-12-08 14:54:06,256 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.055 seconds (JVM running for 48.995)
2024-12-08 14:54:06,299 INFO  [http-nio-auto-18-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:06,299 INFO  [http-nio-auto-18-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:06,301 INFO  [http-nio-auto-18-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	GET
Request URI:	http://localhost:35837/customer?name=NonExistentUser
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:06 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:06.502+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:54:06,528 WARN  [http-nio-auto-18-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:35837/customer/cart?name=ivan.petrov@yandex.ru
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 9999,
    "quantity": 1
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:06 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:06,547 WARN  [http-nio-auto-18-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:06,560 ERROR [http-nio-auto-18-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalidBoolean]', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalidBoolean]
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalArgumentException: Invalid boolean value [invalidBoolean]
	at org.springframework.beans.propertyeditors.CustomBooleanEditor.setAsText(CustomBooleanEditor.java:154)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:54:06,599 WARN  [http-nio-auto-18-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:54:06,649 WARN  [http-nio-auto-18-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:35837/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:06 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
Request method:	GET
Request URI:	http://localhost:35837/products/1
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 200 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:06 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "productId": 1,
    "distillery": "Ardbeg",
    "name": "Ten",
    "price": 4420.0,
    "age": 10,
    "volume": 700,
    "alcohol": 46.0,
    "description": "Ten Years Old is the basis of the Ardbeg range. After 10 years of maturation in ex-bourbon casks, the whiskey bottled at 46% ABV without cold filtering. The characteristic peat, although clearly present but in perfect balance with the natural sweetness and not predominant in the taste.",
    "available": false,
    "_links": {
        "All products": {
            "href": "http://localhost:35837/products"
        }
    }
}
2024-12-08 14:54:06,691 WARN  [http-nio-auto-18-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:06,712 WARN  [http-nio-auto-18-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}, {field='ccNumber', message='Card number shall consist of 13-16 digits'}]}
2024-12-08 14:54:06,722 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:54:06,722 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:06,723 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:06,725 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-18"]
2024-12-08 14:54:06,730 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-18"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m10[m, [1;31mFailures: [0;1;31m4[m, Errors: 0, Skipped: 0, Time elapsed: 1.523 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_RestExceptionHandlerTest[m
[[1;31mERROR[m] testGetCustomer_NotFound  Time elapsed: 0.229 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testGetCustomer_NotFound(v3_gpt4o_run01_RestExceptionHandlerTest.java:70)

[[1;31mERROR[m] testAddItemToCart_InvalidProduct  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testAddItemToCart_InvalidProduct(v3_gpt4o_run01_RestExceptionHandlerTest.java:94)

[[1;31mERROR[m] testCreateCustomer_Duplicate  Time elapsed: 0.035 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testCreateCustomer_Duplicate(v3_gpt4o_run01_RestExceptionHandlerTest.java:148)

[[1;31mERROR[m] testGetProduct_Unauthorized  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <401> but was <200>.

	at market.v3_gpt4o_run01_RestExceptionHandlerTest.testGetProduct_Unauthorized(v3_gpt4o_run01_RestExceptionHandlerTest.java:189)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:06,758 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:06,758 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:06,759 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:06,759 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:07,022 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:07,055 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:07,109 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:07,133 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7aa17fd7' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:07,134 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:07,188 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:07,190 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:54:07,190 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:07,190 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:07,206 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:07,206 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 446 ms
2024-12-08 14:54:07,248 INFO  [main] c.z.h.HikariDataSource - HikariPool-19 - Starting...
2024-12-08 14:54:07,249 INFO  [main] c.z.h.HikariDataSource - HikariPool-19 - Start completed.
2024-12-08 14:54:07,265 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:07,286 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:07,298 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:07,299 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:07,385 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:07,386 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:07,569 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:07,705 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@61b09e85, org.springframework.security.web.context.SecurityContextPersistenceFilter@41d65ba2, org.springframework.security.web.header.HeaderWriterFilter@609eca2e, org.springframework.security.web.authentication.logout.LogoutFilter@a7828c5, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a7aa7d3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3f3e6aec, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2967089f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21fc4a49, org.springframework.security.web.session.SessionManagementFilter@12584de2, org.springframework.security.web.access.ExceptionTranslationFilter@39a8e7cb, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@66d89f4e]
2024-12-08 14:54:07,729 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:07,817 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:54:07,819 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37381 (http) with context path ''
2024-12-08 14:54:07,917 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.182 seconds (JVM running for 50.656)
2024-12-08 14:54:07,953 INFO  [http-nio-auto-19-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:07,953 INFO  [http-nio-auto-19-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:07,955 INFO  [http-nio-auto-19-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:08,102 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:54:08,102 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:08,103 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:08,105 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-19"]
2024-12-08 14:54:08,108 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-19"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m5[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.369 s - in market.[1mv3_gpt4turbo_run01_RestExceptionHandlerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:08,151 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:08,152 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:08,153 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:08,153 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:08,340 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:08,360 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:08,400 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:08,420 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3800963d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:08,422 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:08,463 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:08,464 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:54:08,465 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:08,465 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:08,483 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:08,483 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 330 ms
2024-12-08 14:54:08,531 INFO  [main] c.z.h.HikariDataSource - HikariPool-20 - Starting...
2024-12-08 14:54:08,533 INFO  [main] c.z.h.HikariDataSource - HikariPool-20 - Start completed.
2024-12-08 14:54:08,548 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:08,568 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:08,584 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:08,586 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:08,693 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:08,694 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:08,849 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:09,027 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c084260, org.springframework.security.web.context.SecurityContextPersistenceFilter@3a8f6ecf, org.springframework.security.web.header.HeaderWriterFilter@d28382b, org.springframework.security.web.authentication.logout.LogoutFilter@538c8b2e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@21189fea, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@a734aa0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46d6c2a5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17d3f46f, org.springframework.security.web.session.SessionManagementFilter@71e4ba44, org.springframework.security.web.access.ExceptionTranslationFilter@3f67741, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@355b0ba1]
2024-12-08 14:54:09,058 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:09,162 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:54:09,165 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 40725 (http) with context path ''
2024-12-08 14:54:09,276 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.164 seconds (JVM running for 52.015)
2024-12-08 14:54:09,317 INFO  [http-nio-auto-20-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:09,317 INFO  [http-nio-auto-20-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:09,319 INFO  [http-nio-auto-20-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:09,338 WARN  [http-nio-auto-20-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='cartItemDTO', description='uri=/customer/cart', fieldErrors=[{field='productId', message='Value shall be a positive number'}]}
2024-12-08 14:54:09,408 WARN  [http-nio-auto-20-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:54:09,428 WARN  [http-nio-auto-20-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:09,453 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:54:09,453 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:09,454 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:09,456 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-20"]
2024-12-08 14:54:09,459 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-20"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m4[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.348 s - in market.[1mv3_gpt4turbo_run02_RestErrorResponseTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:09,482 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:09,482 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:09,483 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:09,483 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:09,683 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:09,714 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:09,752 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:09,767 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@57124d94' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:09,768 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:09,810 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:09,811 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:54:09,811 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:09,811 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:09,823 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:09,823 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 340 ms
2024-12-08 14:54:09,851 INFO  [main] c.z.h.HikariDataSource - HikariPool-21 - Starting...
2024-12-08 14:54:09,853 INFO  [main] c.z.h.HikariDataSource - HikariPool-21 - Start completed.
2024-12-08 14:54:09,863 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:09,878 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:09,888 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:09,890 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:09,992 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:09,992 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:10,144 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:10,272 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a3c1d60, org.springframework.security.web.context.SecurityContextPersistenceFilter@7f496c69, org.springframework.security.web.header.HeaderWriterFilter@277a8655, org.springframework.security.web.authentication.logout.LogoutFilter@5d684890, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@37f612b7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b2be18d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28908c93, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7f682de8, org.springframework.security.web.session.SessionManagementFilter@3f4fdd17, org.springframework.security.web.access.ExceptionTranslationFilter@20208cc9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@31d28381]
2024-12-08 14:54:10,296 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:10,392 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:54:10,394 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34361 (http) with context path ''
2024-12-08 14:54:10,489 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.027 seconds (JVM running for 53.228)
2024-12-08 14:54:10,528 INFO  [http-nio-auto-21-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:10,529 INFO  [http-nio-auto-21-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:10,531 INFO  [http-nio-auto-21-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:10,551 WARN  [http-nio-auto-21-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='address', message='Pattern.contactsDTO.address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:54:10,572 WARN  [http-nio-auto-21-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:10,592 WARN  [http-nio-auto-21-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:10,608 WARN  [http-nio-auto-21-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:10,623 WARN  [http-nio-auto-21-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:10,640 WARN  [http-nio-auto-21-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:10,655 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:54:10,656 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:10,657 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:10,660 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-21"]
2024-12-08 14:54:10,663 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-21"]

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:10,692 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:10,692 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:10,694 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:10,694 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:10,895 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:10,914 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:10,941 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:10,953 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@f420423' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:10,954 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:10,981 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:10,981 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:54:10,982 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:10,982 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:10,992 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:10,992 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 298 ms
2024-12-08 14:54:11,016 INFO  [main] c.z.h.HikariDataSource - HikariPool-22 - Starting...
2024-12-08 14:54:11,017 INFO  [main] c.z.h.HikariDataSource - HikariPool-22 - Start completed.
2024-12-08 14:54:11,027 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:11,041 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:11,053 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:11,055 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:11,164 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:11,165 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:11,347 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:11,488 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4fa117c8, org.springframework.security.web.context.SecurityContextPersistenceFilter@337b7e07, org.springframework.security.web.header.HeaderWriterFilter@7503d6b1, org.springframework.security.web.authentication.logout.LogoutFilter@a124096, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@43d54e94, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7c7f8173, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17227613, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30993551, org.springframework.security.web.session.SessionManagementFilter@2c7b2bbd, org.springframework.security.web.access.ExceptionTranslationFilter@3c1e6ab9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@78ed1efb]
2024-12-08 14:54:11,515 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:11,606 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:54:11,608 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 43575 (http) with context path ''
2024-12-08 14:54:11,711 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.038 seconds (JVM running for 54.45)
2024-12-08 14:54:11,733 INFO  [http-nio-auto-22-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:11,733 INFO  [http-nio-auto-22-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:11,734 INFO  [http-nio-auto-22-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:11,747 WARN  [http-nio-auto-22-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:11,758 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:54:11,759 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:11,759 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:11,761 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-22"]
2024-12-08 14:54:11,764 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-22"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m8[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.299 s - in market.[1mv3_gpt4o_run03_ContactsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:11,791 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:11,792 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:11,793 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:11,793 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:11,973 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:11,994 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:12,035 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:12,052 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5d3e19c5' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:12,054 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:12,094 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:12,095 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:54:12,095 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:12,095 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:12,107 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:12,108 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 314 ms
2024-12-08 14:54:12,138 INFO  [main] c.z.h.HikariDataSource - HikariPool-23 - Starting...
2024-12-08 14:54:12,139 INFO  [main] c.z.h.HikariDataSource - HikariPool-23 - Start completed.
2024-12-08 14:54:12,149 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:12,176 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:12,186 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:12,187 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:12,270 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:12,270 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:12,428 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:12,557 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67481c56, org.springframework.security.web.context.SecurityContextPersistenceFilter@3eeade2a, org.springframework.security.web.header.HeaderWriterFilter@458a4087, org.springframework.security.web.authentication.logout.LogoutFilter@5f02febb, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3bb9a66f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5f69f566, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@48f01874, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10ef2363, org.springframework.security.web.session.SessionManagementFilter@2daa5a89, org.springframework.security.web.access.ExceptionTranslationFilter@44d4b6df, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@73365dc3]
2024-12-08 14:54:12,582 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:12,664 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:54:12,666 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 38555 (http) with context path ''
2024-12-08 14:54:12,781 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.013 seconds (JVM running for 55.52)
2024-12-08 14:54:12,819 INFO  [http-nio-auto-23-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:12,819 INFO  [http-nio-auto-23-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:12,820 INFO  [http-nio-auto-23-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:12,887 WARN  [http-nio-auto-23-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:12,905 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:54:12,905 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:12,906 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:12,907 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-23"]
2024-12-08 14:54:12,909 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-23"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m3[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.141 s - in market.[1mv3_gpt4turbo_run01_RestErrorResponseTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:12,929 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:12,930 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:12,931 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:12,931 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:13,105 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:13,125 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:13,160 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:13,177 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@43cd1efd' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:13,180 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:13,217 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:13,230 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:54:13,230 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:13,231 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:13,248 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:13,248 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 317 ms
2024-12-08 14:54:13,283 INFO  [main] c.z.h.HikariDataSource - HikariPool-24 - Starting...
2024-12-08 14:54:13,285 INFO  [main] c.z.h.HikariDataSource - HikariPool-24 - Start completed.
2024-12-08 14:54:13,296 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:13,310 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:13,320 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:13,321 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:13,406 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:13,406 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:13,561 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:13,683 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7e9af900, org.springframework.security.web.context.SecurityContextPersistenceFilter@76847834, org.springframework.security.web.header.HeaderWriterFilter@3cefe32, org.springframework.security.web.authentication.logout.LogoutFilter@2cf0b24a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@32adfa6c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@564ab200, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2281f995, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e0cd255, org.springframework.security.web.session.SessionManagementFilter@42033728, org.springframework.security.web.access.ExceptionTranslationFilter@46bcda4e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@531ecd96]
2024-12-08 14:54:13,706 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:13,788 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:54:13,790 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37027 (http) with context path ''
2024-12-08 14:54:13,877 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.965 seconds (JVM running for 56.616)
2024-12-08 14:54:13,909 INFO  [http-nio-auto-24-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:13,909 INFO  [http-nio-auto-24-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:13,911 INFO  [http-nio-auto-24-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:13,936 WARN  [http-nio-auto-24-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:54:13,956 WARN  [http-nio-auto-24-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:54:13,992 WARN  [http-nio-auto-24-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='address', message='Special characters are not allowed'}]}
2024-12-08 14:54:14,021 WARN  [http-nio-auto-24-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:37027/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:13 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:14,045 WARN  [http-nio-auto-24-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:37027/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:13 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:14,070 WARN  [http-nio-auto-24-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:37027/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:13 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:14,076 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:54:14,077 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:14,077 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:14,079 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-24"]
2024-12-08 14:54:14,082 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-24"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m7[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.17 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_CustomerRestControllerTest[m
[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.031 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomer(v3_gpt4o_run01_CustomerRestControllerTest.java:66)

[[1;31mERROR[m] testCreateCustomerWithExistingEmail  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomerWithExistingEmail(v3_gpt4o_run01_CustomerRestControllerTest.java:81)

[[1;31mERROR[m] testGetCustomerWithValidSession  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run01_CustomerRestControllerTest.testGetCustomerWithValidSession(v3_gpt4o_run01_CustomerRestControllerTest.java:104)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:14,111 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:14,111 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:14,112 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:14,112 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:14,318 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:14,338 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:14,370 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:14,386 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@26154bea' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:14,387 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:14,420 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:14,421 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-25"]
2024-12-08 14:54:14,422 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:14,422 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:14,434 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:14,434 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 322 ms
2024-12-08 14:54:14,460 INFO  [main] c.z.h.HikariDataSource - HikariPool-25 - Starting...
2024-12-08 14:54:14,461 INFO  [main] c.z.h.HikariDataSource - HikariPool-25 - Start completed.
2024-12-08 14:54:14,474 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:14,490 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:14,502 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:14,504 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:14,584 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:14,584 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:14,734 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:14,872 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1877df8b, org.springframework.security.web.context.SecurityContextPersistenceFilter@39824796, org.springframework.security.web.header.HeaderWriterFilter@53cb7d55, org.springframework.security.web.authentication.logout.LogoutFilter@99b1b5c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@16d204ce, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@294114ba, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2168e512, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2a975625, org.springframework.security.web.session.SessionManagementFilter@9314a91, org.springframework.security.web.access.ExceptionTranslationFilter@4a2b4f0b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f85319d]
2024-12-08 14:54:14,890 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:14,964 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-25"]
2024-12-08 14:54:14,966 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 33503 (http) with context path ''
2024-12-08 14:54:15,048 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.962 seconds (JVM running for 57.787)
2024-12-08 14:54:15,079 INFO  [http-nio-auto-25-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:15,079 INFO  [http-nio-auto-25-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:15,083 INFO  [http-nio-auto-25-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 4 ms
2024-12-08 14:54:15,561 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-25"]
2024-12-08 14:54:15,562 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:15,562 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:15,563 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-25"]
2024-12-08 14:54:15,565 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-25"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m3[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.477 s - in market.[1mv3_gpt4turbo_run03_ContactsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:15,582 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:15,583 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:15,584 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:15,584 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:15,765 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:15,789 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:15,823 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:15,838 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7ec36bc7' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:15,839 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:15,876 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:15,877 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-26"]
2024-12-08 14:54:15,878 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:15,878 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:15,889 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:15,889 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 305 ms
2024-12-08 14:54:15,919 INFO  [main] c.z.h.HikariDataSource - HikariPool-26 - Starting...
2024-12-08 14:54:15,920 INFO  [main] c.z.h.HikariDataSource - HikariPool-26 - Start completed.
2024-12-08 14:54:15,932 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:15,946 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:15,959 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:15,960 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:16,054 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:16,054 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:16,209 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:16,325 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6444731, org.springframework.security.web.context.SecurityContextPersistenceFilter@e01e4f3, org.springframework.security.web.header.HeaderWriterFilter@894a466, org.springframework.security.web.authentication.logout.LogoutFilter@523399f3, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6de4d332, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52d718d0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f4d2178, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5370a462, org.springframework.security.web.session.SessionManagementFilter@7256a1d, org.springframework.security.web.access.ExceptionTranslationFilter@6eb64784, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@15033c8d]
2024-12-08 14:54:16,347 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:16,421 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-26"]
2024-12-08 14:54:16,423 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 35605 (http) with context path ''
2024-12-08 14:54:16,533 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.965 seconds (JVM running for 59.272)
2024-12-08 14:54:16,590 INFO  [http-nio-auto-26-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:16,590 INFO  [http-nio-auto-26-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:16,592 INFO  [http-nio-auto-26-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	POST
Request URI:	http://localhost:35605/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:16 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:16.597+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
Request method:	POST
Request URI:	http://localhost:35605/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:16 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:16.618+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:54:16,632 WARN  [http-nio-auto-26-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	POST
Request URI:	http://localhost:35605/api/authenticate
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 404 
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:16 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:16.651+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/api/authenticate"
}
2024-12-08 14:54:16,674 WARN  [http-nio-auto-26-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:16,704 WARN  [http-nio-auto-26-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:16,713 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-26"]
2024-12-08 14:54:16,714 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:16,714 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:16,716 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-26"]
2024-12-08 14:54:16,718 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-26"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m6[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.15 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_ContactsRestControllerTest[m
[[1;31mERROR[m] testUpdateContacts  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run02_ContactsRestControllerTest.getAuthToken(v3_gpt4o_run02_ContactsRestControllerTest.java:160)
	at market.v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContacts(v3_gpt4o_run02_ContactsRestControllerTest.java:104)

[[1;31mERROR[m] testGetContacts  Time elapsed: 0.019 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run02_ContactsRestControllerTest.getAuthToken(v3_gpt4o_run02_ContactsRestControllerTest.java:160)
	at market.v3_gpt4o_run02_ContactsRestControllerTest.testGetContacts(v3_gpt4o_run02_ContactsRestControllerTest.java:90)

[[1;31mERROR[m] testUpdateContactsInvalidPhone  Time elapsed: 0.019 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <404>.

	at market.v3_gpt4o_run02_ContactsRestControllerTest.getAuthToken(v3_gpt4o_run02_ContactsRestControllerTest.java:160)
	at market.v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContactsInvalidPhone(v3_gpt4o_run02_ContactsRestControllerTest.java:125)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:16,741 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:16,742 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:16,743 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:16,743 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:16,905 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:16,923 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:16,951 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:16,974 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@558466db' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:16,975 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:17,021 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:17,022 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-27"]
2024-12-08 14:54:17,023 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:17,023 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:17,038 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:17,038 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 295 ms
2024-12-08 14:54:17,073 INFO  [main] c.z.h.HikariDataSource - HikariPool-27 - Starting...
2024-12-08 14:54:17,074 INFO  [main] c.z.h.HikariDataSource - HikariPool-27 - Start completed.
2024-12-08 14:54:17,086 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:17,104 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:17,118 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:17,120 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:17,226 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:17,227 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:17,371 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:17,504 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a452b21, org.springframework.security.web.context.SecurityContextPersistenceFilter@216d164b, org.springframework.security.web.header.HeaderWriterFilter@3e6626b6, org.springframework.security.web.authentication.logout.LogoutFilter@2051f0bd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1afee05, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f1b3eca, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@10c7e809, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5930d458, org.springframework.security.web.session.SessionManagementFilter@4d069ffe, org.springframework.security.web.access.ExceptionTranslationFilter@6beaa448, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3458d562]
2024-12-08 14:54:17,521 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:17,594 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-27"]
2024-12-08 14:54:17,596 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 35585 (http) with context path ''
2024-12-08 14:54:17,679 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.957 seconds (JVM running for 60.418)
2024-12-08 14:54:17,708 INFO  [http-nio-auto-27-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:17,708 INFO  [http-nio-auto-27-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:17,711 INFO  [http-nio-auto-27-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 3 ms
2024-12-08 14:54:17,735 WARN  [http-nio-auto-27-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
Request method:	GET
Request URI:	http://localhost:35585/customer?name=Unknown
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:17 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:17.923+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:54:17,934 WARN  [http-nio-auto-27-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:17,951 WARN  [http-nio-auto-27-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:17,962 WARN  [http-nio-auto-27-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:17,979 WARN  [http-nio-auto-27-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
2024-12-08 14:54:17,998 WARN  [http-nio-auto-27-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:18,006 WARN  [http-nio-auto-27-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:18,020 WARN  [http-nio-auto-27-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:18,034 WARN  [http-nio-auto-27-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:18,059 WARN  [http-nio-auto-27-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:54:18,076 WARN  [http-nio-auto-27-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	GET
Request URI:	http://localhost:35585/customer?name=Ivan
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:17 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:18.203+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:54:18,274 WARN  [http-nio-auto-27-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:18,293 WARN  [http-nio-auto-27-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}, {field='ccNumber', message='Card number shall consist of 13-16 digits'}]}
2024-12-08 14:54:18,315 WARN  [http-nio-auto-27-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
2024-12-08 14:54:18,331 WARN  [http-nio-auto-27-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:18,354 WARN  [http-nio-auto-27-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:54:18,365 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-27"]
2024-12-08 14:54:18,365 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:18,366 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:18,368 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-27"]
2024-12-08 14:54:18,371 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-27"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m17[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 1.644 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_RestErrorResponseTest[m
[[1;31mERROR[m] testGetCustomerNotFound  Time elapsed: 0.187 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerNotFound(v3_gpt4o_run03_RestErrorResponseTest.java:80)

[[1;31mERROR[m] testGetCustomerValid  Time elapsed: 0.126 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerValid(v3_gpt4o_run03_RestErrorResponseTest.java:67)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:18,401 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:18,401 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:18,403 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:18,403 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:18,625 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:18,654 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:18,694 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:18,712 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@fb9509' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:18,713 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:18,746 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:18,747 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-28"]
2024-12-08 14:54:18,747 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:18,747 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:18,758 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:18,758 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 355 ms
2024-12-08 14:54:18,790 INFO  [main] c.z.h.HikariDataSource - HikariPool-28 - Starting...
2024-12-08 14:54:18,791 INFO  [main] c.z.h.HikariDataSource - HikariPool-28 - Start completed.
2024-12-08 14:54:18,800 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:18,814 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:18,824 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:18,825 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:18,899 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:18,899 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:19,042 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:19,166 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ea284c6, org.springframework.security.web.context.SecurityContextPersistenceFilter@f480f08, org.springframework.security.web.header.HeaderWriterFilter@438ed8ea, org.springframework.security.web.authentication.logout.LogoutFilter@79b96d90, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3d556c4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7340e3f9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46bc3cf3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@14a2fbb, org.springframework.security.web.session.SessionManagementFilter@219a3201, org.springframework.security.web.access.ExceptionTranslationFilter@3c780191, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1e694ac2]
2024-12-08 14:54:19,187 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:19,255 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-28"]
2024-12-08 14:54:19,257 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 33991 (http) with context path ''
2024-12-08 14:54:19,340 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.965 seconds (JVM running for 62.079)
2024-12-08 14:54:19,372 INFO  [http-nio-auto-28-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:19,372 INFO  [http-nio-auto-28-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:19,374 INFO  [http-nio-auto-28-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:19,658 WARN  [http-nio-auto-28-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/-1', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:19,750 WARN  [http-nio-auto-28-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:19,857 WARN  [http-nio-auto-28-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:19,866 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-28"]
2024-12-08 14:54:19,866 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:19,867 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:19,869 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-28"]
2024-12-08 14:54:19,870 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-28"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m5[m, Failures: 0, [1;31mErrors: [0;1;31m2[m, Skipped: 0, Time elapsed: 1.491 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_OrdersRestControllerTest[m
[[1;31mERROR[m] testGetOrder  Time elapsed: 0.201 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_OrdersRestControllerTest.testGetOrder(v3_gpt4o_run02_OrdersRestControllerTest.java:82)

[[1;31mERROR[m] testGetOrders  Time elapsed: 0.098 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_OrdersRestControllerTest.testGetOrders(v3_gpt4o_run02_OrdersRestControllerTest.java:68)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:19,891 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:19,891 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:19,892 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:19,892 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:20,051 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:20,071 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:20,106 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:20,125 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7351913' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:20,126 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:20,162 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:20,162 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-29"]
2024-12-08 14:54:20,163 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:20,163 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:20,174 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:20,174 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 282 ms
2024-12-08 14:54:20,202 INFO  [main] c.z.h.HikariDataSource - HikariPool-29 - Starting...
2024-12-08 14:54:20,203 INFO  [main] c.z.h.HikariDataSource - HikariPool-29 - Start completed.
2024-12-08 14:54:20,218 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:20,237 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:20,263 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:20,265 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:20,350 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:20,350 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:20,498 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:20,613 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@79b94b8a, org.springframework.security.web.context.SecurityContextPersistenceFilter@49f93191, org.springframework.security.web.header.HeaderWriterFilter@80b8f0a, org.springframework.security.web.authentication.logout.LogoutFilter@6e7cc840, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@46d40373, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@535c64dc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7fbc262, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@70288bc3, org.springframework.security.web.session.SessionManagementFilter@a1c60f4, org.springframework.security.web.access.ExceptionTranslationFilter@21e77b01, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@29d3ed1d]
2024-12-08 14:54:20,633 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:20,700 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-29"]
2024-12-08 14:54:20,702 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37843 (http) with context path ''
2024-12-08 14:54:20,779 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.905 seconds (JVM running for 63.518)
2024-12-08 14:54:20,806 INFO  [http-nio-auto-29-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:20,806 INFO  [http-nio-auto-29-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:20,808 INFO  [http-nio-auto-29-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:21,006 WARN  [http-nio-auto-29-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:21,212 WARN  [http-nio-auto-29-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/99999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:21,221 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-29"]
2024-12-08 14:54:21,221 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:21,222 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:21,223 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-29"]
2024-12-08 14:54:21,225 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-29"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m4[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.349 s - in market.[1mv3_gpt4turbo_run03_OrdersRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:21,242 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:21,243 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:21,244 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:21,244 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:21,393 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:21,412 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:21,439 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:21,450 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@750bdb5c' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:21,450 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:21,486 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:21,486 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-30"]
2024-12-08 14:54:21,487 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:21,487 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:21,497 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:21,497 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 253 ms
2024-12-08 14:54:21,521 INFO  [main] c.z.h.HikariDataSource - HikariPool-30 - Starting...
2024-12-08 14:54:21,522 INFO  [main] c.z.h.HikariDataSource - HikariPool-30 - Start completed.
2024-12-08 14:54:21,536 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:21,553 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:21,566 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:21,567 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:21,643 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:21,643 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:21,789 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:21,895 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@babdbd3, org.springframework.security.web.context.SecurityContextPersistenceFilter@733b9852, org.springframework.security.web.header.HeaderWriterFilter@6e55f7fe, org.springframework.security.web.authentication.logout.LogoutFilter@5ec20f8a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@395a824d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36857bcc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@77ae80e5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@443aca57, org.springframework.security.web.session.SessionManagementFilter@682dd220, org.springframework.security.web.access.ExceptionTranslationFilter@208ee6f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@589bd5b7]
2024-12-08 14:54:21,916 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:21,987 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-30"]
2024-12-08 14:54:21,989 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42539 (http) with context path ''
2024-12-08 14:54:22,075 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.847 seconds (JVM running for 64.814)
2024-12-08 14:54:22,104 INFO  [http-nio-auto-30-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:22,104 INFO  [http-nio-auto-30-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:22,106 INFO  [http-nio-auto-30-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:22,113 WARN  [http-nio-auto-30-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:22,131 ERROR [http-nio-auto-30-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"', entityName='null', description='uri=/products/invalid', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NumberFormatException: For input string: "invalid"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.base/java.lang.Long.parseLong(Long.java:692)
	at java.base/java.lang.Long.valueOf(Long.java:1144)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:54:22,309 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-30"]
2024-12-08 14:54:22,309 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:22,309 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:22,311 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-30"]
2024-12-08 14:54:22,314 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-30"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m4[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.086 s - in market.[1mv3_gpt4turbo_run02_ProductsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:22,341 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:22,342 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:22,343 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:22,343 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:22,556 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:22,575 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:22,601 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:22,616 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@668c2dab' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:22,616 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:22,646 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:22,647 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-31"]
2024-12-08 14:54:22,647 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:22,647 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:22,657 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:22,657 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 314 ms
2024-12-08 14:54:22,684 INFO  [main] c.z.h.HikariDataSource - HikariPool-31 - Starting...
2024-12-08 14:54:22,685 INFO  [main] c.z.h.HikariDataSource - HikariPool-31 - Start completed.
2024-12-08 14:54:22,701 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:22,714 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:22,724 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:22,726 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:22,795 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:22,795 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:22,935 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:23,033 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4500ae07, org.springframework.security.web.context.SecurityContextPersistenceFilter@66287c11, org.springframework.security.web.header.HeaderWriterFilter@33384607, org.springframework.security.web.authentication.logout.LogoutFilter@349967df, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@188505a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@33d888aa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42a1e8a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@51e64055, org.springframework.security.web.session.SessionManagementFilter@173897d7, org.springframework.security.web.access.ExceptionTranslationFilter@330cd533, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@420d0b1c]
2024-12-08 14:54:23,052 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:23,119 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-31"]
2024-12-08 14:54:23,122 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 33023 (http) with context path ''
2024-12-08 14:54:23,222 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.904 seconds (JVM running for 65.961)
2024-12-08 14:54:23,260 INFO  [http-nio-auto-31-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:23,260 INFO  [http-nio-auto-31-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:23,262 INFO  [http-nio-auto-31-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:23,273 WARN  [http-nio-auto-31-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:23,733 WARN  [http-nio-auto-31-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='address', message='The value shall not be empty'}]}
2024-12-08 14:54:23,743 WARN  [http-nio-auto-31-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:23,876 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-31"]
2024-12-08 14:54:23,876 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:23,877 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:23,879 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-31"]
2024-12-08 14:54:23,881 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-31"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m6[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.562 s - in market.[1mv3_gpt4turbo_run02_ContactsRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:23,906 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:23,907 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:23,908 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:23,908 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:24,066 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:24,092 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:24,122 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:24,137 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5558115e' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:24,138 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:24,170 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:24,171 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-32"]
2024-12-08 14:54:24,171 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:24,172 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:24,183 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:24,183 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 275 ms
2024-12-08 14:54:24,209 INFO  [main] c.z.h.HikariDataSource - HikariPool-32 - Starting...
2024-12-08 14:54:24,210 INFO  [main] c.z.h.HikariDataSource - HikariPool-32 - Start completed.
2024-12-08 14:54:24,218 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:24,232 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:24,245 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:24,246 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:24,342 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:24,342 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:24,510 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:24,650 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60ca2de8, org.springframework.security.web.context.SecurityContextPersistenceFilter@5decb9aa, org.springframework.security.web.header.HeaderWriterFilter@4f0729c1, org.springframework.security.web.authentication.logout.LogoutFilter@3649853, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@d1dce56, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d4d4b1d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b723654, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@67a4503b, org.springframework.security.web.session.SessionManagementFilter@48c51540, org.springframework.security.web.access.ExceptionTranslationFilter@7590a832, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@78aab5f4]
2024-12-08 14:54:24,676 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:24,767 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-32"]
2024-12-08 14:54:24,770 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 40015 (http) with context path ''
2024-12-08 14:54:24,856 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.972 seconds (JVM running for 67.595)
2024-12-08 14:54:24,885 INFO  [http-nio-auto-32-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:24,885 INFO  [http-nio-auto-32-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:24,887 INFO  [http-nio-auto-32-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:25,102 WARN  [http-nio-auto-32-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:25,117 WARN  [http-nio-auto-32-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
2024-12-08 14:54:25,334 WARN  [http-nio-auto-32-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='OrderDTO', description='uri=/customer/orders/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:25,428 ERROR [http-nio-auto-32-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"', entityName='null', description='uri=/customer/orders/invalid', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NumberFormatException: For input string: "invalid"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.base/java.lang.Long.parseLong(Long.java:692)
	at java.base/java.lang.Long.valueOf(Long.java:1144)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:54:25,439 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-32"]
2024-12-08 14:54:25,440 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:25,440 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:25,442 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-32"]
2024-12-08 14:54:25,445 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-32"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m6[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.565 s - in market.[1mv3_gpt4o_run01_OrdersRestControllerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_OrdersRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:25,470 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:25,470 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:25,471 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:25,471 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:25,636 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:25,661 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:25,688 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:25,701 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@10d84e0d' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:25,702 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:25,728 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:25,729 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-33"]
2024-12-08 14:54:25,729 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:25,730 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:25,744 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:25,744 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 273 ms
2024-12-08 14:54:25,774 INFO  [main] c.z.h.HikariDataSource - HikariPool-33 - Starting...
2024-12-08 14:54:25,775 INFO  [main] c.z.h.HikariDataSource - HikariPool-33 - Start completed.
2024-12-08 14:54:25,783 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:25,797 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:25,808 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:25,809 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:25,897 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:25,897 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:26,037 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:26,151 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45642c45, org.springframework.security.web.context.SecurityContextPersistenceFilter@29d1b689, org.springframework.security.web.header.HeaderWriterFilter@273227df, org.springframework.security.web.authentication.logout.LogoutFilter@2f6c2010, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1e446916, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3c608527, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a5a41ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@221591b6, org.springframework.security.web.session.SessionManagementFilter@2e15ec6e, org.springframework.security.web.access.ExceptionTranslationFilter@14302286, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@672b1a6d]
2024-12-08 14:54:26,184 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:26,259 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-33"]
2024-12-08 14:54:26,262 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42365 (http) with context path ''
2024-12-08 14:54:26,348 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.898 seconds (JVM running for 69.088)
2024-12-08 14:54:26,387 INFO  [http-nio-auto-33-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:26,387 INFO  [http-nio-auto-33-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:26,388 INFO  [http-nio-auto-33-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:26,588 WARN  [http-nio-auto-33-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:26,600 WARN  [http-nio-auto-33-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/9999', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:42365/customer/orders/9999
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	orderId=9999
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:26 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/orders/9999",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
Request method:	GET
Request URI:	http://localhost:42365/customer/orders
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic YWRtaW5AaW52YWxpZC5jb206YWRtaW4=
				Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:26 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:26.698+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer/orders"
}
2024-12-08 14:54:26,708 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-33"]
2024-12-08 14:54:26,708 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:26,709 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:26,711 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-33"]
2024-12-08 14:54:26,713 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-33"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m4[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 1.261 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run01_OrdersRestControllerTest[m
[[1;31mERROR[m] testGetOrderNotFound  Time elapsed: 0.012 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4turbo_run01_OrdersRestControllerTest.testGetOrderNotFound(v3_gpt4turbo_run01_OrdersRestControllerTest.java:76)

[[1;31mERROR[m] testGetOrdersServerError  Time elapsed: 0.098 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code (is <500> or is <503>) but was <401>.

	at market.v3_gpt4turbo_run01_OrdersRestControllerTest.testGetOrdersServerError(v3_gpt4turbo_run01_OrdersRestControllerTest.java:103)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:26,736 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:26,736 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:26,737 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:26,737 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:26,908 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:26,926 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:26,952 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:26,964 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4b7d3d0f' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:26,965 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:26,990 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:26,991 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-34"]
2024-12-08 14:54:26,991 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:26,992 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:27,005 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:27,005 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 268 ms
2024-12-08 14:54:27,027 INFO  [main] c.z.h.HikariDataSource - HikariPool-34 - Starting...
2024-12-08 14:54:27,028 INFO  [main] c.z.h.HikariDataSource - HikariPool-34 - Start completed.
2024-12-08 14:54:27,037 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:27,048 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:27,055 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:27,056 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:27,123 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:27,124 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:27,270 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:27,377 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@69920b08, org.springframework.security.web.context.SecurityContextPersistenceFilter@589e95e5, org.springframework.security.web.header.HeaderWriterFilter@63242826, org.springframework.security.web.authentication.logout.LogoutFilter@ad01427, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@336e73d2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@42a54e3b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23b51, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6d85b709, org.springframework.security.web.session.SessionManagementFilter@425c96b9, org.springframework.security.web.access.ExceptionTranslationFilter@5aa8113c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@33bce0b2]
2024-12-08 14:54:27,395 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:27,467 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-34"]
2024-12-08 14:54:27,469 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42695 (http) with context path ''
2024-12-08 14:54:27,547 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.83 seconds (JVM running for 70.286)
2024-12-08 14:54:27,576 INFO  [http-nio-auto-34-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:27,576 INFO  [http-nio-auto-34-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:27,578 INFO  [http-nio-auto-34-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	PUT
Request URI:	http://localhost:42695/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": 2
}

HTTP/1.1 200 
Set-Cookie: JSESSIONID=C4EC7A5F08CFFDA36B45F8017B3B3F12; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:27 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "user": "ivan.petrov@yandex.ru",
    "totalItems": 1,
    "productsCost": 6517.0,
    "deliveryCost": 400,
    "deliveryIncluded": true,
    "totalCost": 6917.0,
    "cartItems": [
        {
            "productId": 5,
            "quantity": 1,
            "_links": {
                "View product": {
                    "href": "http://localhost:42695/products/5"
                }
            }
        }
    ],
    "empty": false,
    "_links": {
        "Customer contacts": {
            "href": "http://localhost:42695/customer/contacts"
        },
        "Proceed to payment": {
            "href": "http://localhost:42695/customer/cart/pay"
        }
    }
}
2024-12-08 14:54:27,923 WARN  [http-nio-auto-34-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:28,048 WARN  [http-nio-auto-34-exec-4] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:54:28,048 ERROR [http-nio-auto-34-exec-4] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:54:28,050 ERROR [http-nio-auto-34-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d5d8863.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$a9e8a17_34.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:42695/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=7BD4226E4768739B115AE2BB8F856200; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:27 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
Request method:	GET
Request URI:	http://localhost:42695/customer/cart/internal-error
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 404 
Set-Cookie: JSESSIONID=020C22ED23ECE78E592C785D7DF47FA2; Path=/; HttpOnly
Vary: Origin
Vary: Access-Control-Request-Method
Vary: Access-Control-Request-Headers
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:27 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:28.163+00:00",
    "status": 404,
    "error": "Not Found",
    "message": "",
    "path": "/customer/cart/internal-error"
}
2024-12-08 14:54:28,587 WARN  [http-nio-auto-34-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='Product', description='uri=/customer/cart', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:28,690 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-34"]
2024-12-08 14:54:28,690 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:28,691 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:28,692 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-34"]
2024-12-08 14:54:28,694 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-34"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m10[m, [1;31mFailures: [0;1;31m3[m, [1;31mErrors: [0;1;31m2[m, Skipped: 0, Time elapsed: 1.976 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run02_CartRestControllerTest[m
[[1;31mERROR[m] testAddItem  Time elapsed: 0.123 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path cartItems[0].productId doesn't match.
Expected: <1>
  Actual: 5

	at market.v3_gpt4o_run02_CartRestControllerTest.testAddItem(v3_gpt4o_run02_CartRestControllerTest.java:81)

[[1;31mERROR[m] testPayByCard  Time elapsed: 0.18 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4o_run02_CartRestControllerTest.testPayByCard(v3_gpt4o_run02_CartRestControllerTest.java:112)

[[1;31mERROR[m] testInternalServerError  Time elapsed: 0.061 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <404>.

	at market.v3_gpt4o_run02_CartRestControllerTest.testInternalServerError(v3_gpt4o_run02_CartRestControllerTest.java:139)

[[1;31mERROR[m] testSchemaValidationForAddItem  Time elapsed: 0.098 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForAddItem(v3_gpt4o_run02_CartRestControllerTest.java:160)

[[1;31mERROR[m] testSchemaValidationForGetCart  Time elapsed: 0.094 s  <<< ERROR!
java.lang.IllegalArgumentException: Schema to use cannot be null
	at market.v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForGetCart(v3_gpt4o_run02_CartRestControllerTest.java:148)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:28,715 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:28,716 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:28,716 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:28,716 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:28,879 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:28,898 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:28,923 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:28,940 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4c6dfcb' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:28,941 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:28,967 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:28,968 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-35"]
2024-12-08 14:54:28,969 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:28,969 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:28,981 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:28,981 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 264 ms
2024-12-08 14:54:29,006 INFO  [main] c.z.h.HikariDataSource - HikariPool-35 - Starting...
2024-12-08 14:54:29,007 INFO  [main] c.z.h.HikariDataSource - HikariPool-35 - Start completed.
2024-12-08 14:54:29,017 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:29,029 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:29,046 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:29,048 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:29,123 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:29,123 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:29,277 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:29,405 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7c27c060, org.springframework.security.web.context.SecurityContextPersistenceFilter@799701e8, org.springframework.security.web.header.HeaderWriterFilter@554e85bb, org.springframework.security.web.authentication.logout.LogoutFilter@47ea5383, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@161242f2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@c43a7f2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2d01989c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c05f29e, org.springframework.security.web.session.SessionManagementFilter@546feede, org.springframework.security.web.access.ExceptionTranslationFilter@75e00820, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@787e878e]
2024-12-08 14:54:29,425 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:29,505 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-35"]
2024-12-08 14:54:29,507 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 42505 (http) with context path ''
2024-12-08 14:54:29,576 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.879 seconds (JVM running for 72.315)
2024-12-08 14:54:29,605 INFO  [http-nio-auto-35-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:29,605 INFO  [http-nio-auto-35-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:29,607 INFO  [http-nio-auto-35-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	GET
Request URI:	http://localhost:42505/customer
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic YWRtaW5AbWFya2V0LmNvbTphZG1pbjEyMw==
				Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:29 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:29.780+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:54:29,821 WARN  [http-nio-auto-35-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:42505/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:29 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:29,919 WARN  [http-nio-auto-35-exec-4] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:54:29,919 ERROR [http-nio-auto-35-exec-4] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USER_ACCOUNT(ID) [1, 'admin', '$2a$10$Cmwx2Xr/PVpkibiiDz0s7eaVGZHPUvAu5ivdVC5BJgSYbp3c06FY6', 'Admin', TRUE]"; SQL statement:
insert into user_account (id, active, email, name, password) values (null, ?, ?, ?, ?) [23505-200]
2024-12-08 14:54:29,921 ERROR [http-nio-auto-35-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.USER_ACCOUNT(ID) [1, 'admin', '$2a$10$Cmwx2Xr/PVpkibiiDz0s7eaVGZHPUvAu5ivdVC5BJgSYbp3c06FY6', 'Admin', TRUE]"; SQL statement:
insert into user_account (id, active, email, name, password) values (null, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/register', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.USER_ACCOUNT(ID) [1, 'admin', '$2a$10$Cmwx2Xr/PVpkibiiDz0s7eaVGZHPUvAu5ivdVC5BJgSYbp3c06FY6', 'Admin', TRUE]"; SQL statement:
insert into user_account (id, active, email, name, password) values (null, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy150.save(Unknown Source)
	at market.service.impl.UserAccountServiceImpl.create(UserAccountServiceImpl.java:36)
	at market.service.impl.UserAccountServiceImpl$$FastClassBySpringCGLIB$$7a44f476.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.UserAccountServiceImpl$$EnhancerBySpringCGLIB$$710dade7.create(<generated>)
	at market.rest.CustomerRestController.createCustomer(CustomerRestController.java:54)
	at market.rest.CustomerRestController$$FastClassBySpringCGLIB$$49b852d6.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)
	at market.rest.CustomerRestController$$EnhancerBySpringCGLIB$$9e5ed591_35.createCustomer(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 113 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.USER_ACCOUNT(ID) [1, 'admin', '$2a$10$Cmwx2Xr/PVpkibiiDz0s7eaVGZHPUvAu5ivdVC5BJgSYbp3c06FY6', 'Admin', TRUE]"; SQL statement:
insert into user_account (id, active, email, name, password) values (null, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 166 more
Request method:	POST
Request URI:	http://localhost:42505/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "new.email@yandex.ru",
    "password": "newpass",
    "name": "New Name",
    "phone": "+7 999 888 77 66",
    "address": "New Address 123"
}

HTTP/1.1 500 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:29 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.USER_ACCOUNT(ID) [1, 'admin', '$2a$10$Cmwx2Xr/PVpkibiiDz0s7eaVGZHPUvAu5ivdVC5BJgSYbp3c06FY6', 'Admin', TRUE]\"; SQL statement:\ninsert into user_account (id, active, email, name, password) values (null, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/register",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:29,931 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-35"]
2024-12-08 14:54:29,931 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:29,932 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:29,933 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-35"]
2024-12-08 14:54:29,935 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-35"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m4[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.259 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run03_CustomerRestControllerTest[m
[[1;31mERROR[m] testGetCustomerAsAdmin  Time elapsed: 0.192 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <200> but was <401>.

	at market.v3_gpt4turbo_run03_CustomerRestControllerTest.testGetCustomerAsAdmin(v3_gpt4turbo_run03_CustomerRestControllerTest.java:96)

[[1;31mERROR[m] testCreateCustomerExistingEmail  Time elapsed: 0.033 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4turbo_run03_CustomerRestControllerTest.testCreateCustomerExistingEmail(v3_gpt4turbo_run03_CustomerRestControllerTest.java:72)

[[1;31mERROR[m] testCreateCustomerValidData  Time elapsed: 0.131 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4turbo_run03_CustomerRestControllerTest.testCreateCustomerValidData(v3_gpt4turbo_run03_CustomerRestControllerTest.java:89)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run03_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:29,961 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:29,962 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:29,964 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:29,964 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:30,125 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:30,150 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:30,174 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:30,186 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6ad30acc' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:30,187 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:30,217 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:30,218 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-36"]
2024-12-08 14:54:30,218 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:30,218 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:30,229 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:30,229 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 265 ms
2024-12-08 14:54:30,252 INFO  [main] c.z.h.HikariDataSource - HikariPool-36 - Starting...
2024-12-08 14:54:30,253 INFO  [main] c.z.h.HikariDataSource - HikariPool-36 - Start completed.
2024-12-08 14:54:30,260 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:30,272 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:30,281 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:30,282 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:30,361 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:30,361 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:30,562 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:30,685 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2cde94ea, org.springframework.security.web.context.SecurityContextPersistenceFilter@30198af, org.springframework.security.web.header.HeaderWriterFilter@7a568177, org.springframework.security.web.authentication.logout.LogoutFilter@5b60514a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@65cb6a77, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c2ebc18, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62bdddd3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b949b86, org.springframework.security.web.session.SessionManagementFilter@34505e0a, org.springframework.security.web.access.ExceptionTranslationFilter@32e3ac63, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@58c33cd5]
2024-12-08 14:54:30,706 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:30,809 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-36"]
2024-12-08 14:54:30,811 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 37045 (http) with context path ''
2024-12-08 14:54:30,905 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.966 seconds (JVM running for 73.644)
2024-12-08 14:54:30,937 INFO  [http-nio-auto-36-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:30,937 INFO  [http-nio-auto-36-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:30,939 INFO  [http-nio-auto-36-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
Request method:	GET
Request URI:	http://localhost:37045/customer?name=non.existent@yandex.ru
Proxy:			<none>
Request params:	<none>
Query params:	name=non.existent@yandex.ru
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
Set-Cookie: JSESSIONID=B08D09E42BD39C23FD6CD4DF892F6B49; Path=/; HttpOnly
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:30 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:30.945+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer"
}
2024-12-08 14:54:30,991 WARN  [http-nio-auto-36-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:31,010 WARN  [http-nio-auto-36-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:31,033 WARN  [http-nio-auto-36-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:31,048 WARN  [http-nio-auto-36-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/1', fieldErrors=[]}
2024-12-08 14:54:31,087 WARN  [http-nio-auto-36-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:37045/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:30 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:31,105 WARN  [http-nio-auto-36-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	GET
Request URI:	http://localhost:37045/customer/cart?name=non.existent@yandex.ru
Proxy:			<none>
Request params:	<none>
Query params:	name=non.existent@yandex.ru
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:30 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:31,120 WARN  [http-nio-auto-36-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:31,134 WARN  [http-nio-auto-36-exec-10] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:31,156 WARN  [http-nio-auto-36-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
2024-12-08 14:54:31,176 WARN  [http-nio-auto-36-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:31,206 WARN  [http-nio-auto-36-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='name', message='Only letters, whitespace, hyphen and apostrophe are allowed'}, {field='email', message='The value shall be in the format of an email address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='address', message='The value shall not be empty'}, {field='password', message='Length shall be between 6 and 50 characters'}, {field='name', message='The value shall not be empty'}]}
2024-12-08 14:54:31,216 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-36"]
2024-12-08 14:54:31,216 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:31,216 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:31,219 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-36"]
2024-12-08 14:54:31,224 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-36"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m13[m, [1;31mFailures: [0;1;31m3[m, Errors: 0, Skipped: 0, Time elapsed: 1.259 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run03_RestExceptionHandlerTest[m
[[1;31mERROR[m] testGetCustomerNotFound  Time elapsed: 0.029 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_RestExceptionHandlerTest.testGetCustomerNotFound(v3_gpt4o_run03_RestExceptionHandlerTest.java:77)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.043 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4o_run03_RestExceptionHandlerTest.testCreateCustomer(v3_gpt4o_run03_RestExceptionHandlerTest.java:193)

[[1;31mERROR[m] testGetCartNotFound  Time elapsed: 0.018 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <404> but was <401>.

	at market.v3_gpt4o_run03_RestExceptionHandlerTest.testGetCartNotFound(v3_gpt4o_run03_RestExceptionHandlerTest.java:87)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:31,256 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:31,257 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:31,257 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:31,257 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:31,558 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:31,594 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:31,635 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:31,650 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5dc0e1a6' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:31,652 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:31,687 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:31,688 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-37"]
2024-12-08 14:54:31,688 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:31,688 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:31,699 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:31,699 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 441 ms
2024-12-08 14:54:31,724 INFO  [main] c.z.h.HikariDataSource - HikariPool-37 - Starting...
2024-12-08 14:54:31,725 INFO  [main] c.z.h.HikariDataSource - HikariPool-37 - Start completed.
2024-12-08 14:54:31,734 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:31,748 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:31,757 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:31,758 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:31,842 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:31,842 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:31,998 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:32,113 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7b8a7dcd, org.springframework.security.web.context.SecurityContextPersistenceFilter@1489831, org.springframework.security.web.header.HeaderWriterFilter@23d9c533, org.springframework.security.web.authentication.logout.LogoutFilter@7248cbd8, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@502bd357, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5db99eb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6846343e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@483073d7, org.springframework.security.web.session.SessionManagementFilter@23df985f, org.springframework.security.web.access.ExceptionTranslationFilter@2164be65, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@53a88141]
2024-12-08 14:54:32,133 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:32,210 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-37"]
2024-12-08 14:54:32,213 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 36691 (http) with context path ''
2024-12-08 14:54:32,292 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 1.064 seconds (JVM running for 75.031)
2024-12-08 14:54:32,319 INFO  [http-nio-auto-37-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:32,319 INFO  [http-nio-auto-37-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:32,321 INFO  [http-nio-auto-37-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:32,426 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-37"]
2024-12-08 14:54:32,426 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:32,427 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:32,429 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-37"]
2024-12-08 14:54:32,431 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-37"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m4[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.19 s - in market.[1mv3_gpt4turbo_run02_RestExceptionHandlerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run03_RestExceptionHandlerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:32,456 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:32,457 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:32,458 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:32,458 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:32,636 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:32,655 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:32,687 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:32,704 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6a043821' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:32,705 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:32,738 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:32,739 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-38"]
2024-12-08 14:54:32,739 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:32,739 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:32,750 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:32,750 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 292 ms
2024-12-08 14:54:32,778 INFO  [main] c.z.h.HikariDataSource - HikariPool-38 - Starting...
2024-12-08 14:54:32,779 INFO  [main] c.z.h.HikariDataSource - HikariPool-38 - Start completed.
2024-12-08 14:54:32,787 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:32,801 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:32,809 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:32,810 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:32,882 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:32,882 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:33,018 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:33,136 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a14e625, org.springframework.security.web.context.SecurityContextPersistenceFilter@5c56edc8, org.springframework.security.web.header.HeaderWriterFilter@5eaccf37, org.springframework.security.web.authentication.logout.LogoutFilter@717f3ff1, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4f676676, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b5e4551, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3333f67a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ed4d13c, org.springframework.security.web.session.SessionManagementFilter@724b6fa2, org.springframework.security.web.access.ExceptionTranslationFilter@37fc046f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@53cbd4d5]
2024-12-08 14:54:33,153 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:33,242 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-38"]
2024-12-08 14:54:33,244 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 40945 (http) with context path ''
2024-12-08 14:54:33,321 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.886 seconds (JVM running for 76.06)
2024-12-08 14:54:33,364 INFO  [http-nio-auto-38-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:33,364 INFO  [http-nio-auto-38-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:33,366 INFO  [http-nio-auto-38-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:33,497 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-38"]
2024-12-08 14:54:33,497 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:33,498 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:33,500 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-38"]
2024-12-08 14:54:33,502 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-38"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m5[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.067 s - in market.[1mv3_gpt4turbo_run03_RestExceptionHandlerTest[m
[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:33,535 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:33,535 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:33,536 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:33,536 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:33,714 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:33,733 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:33,758 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:33,770 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1be6c3a6' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:33,771 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:33,796 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:33,797 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-39"]
2024-12-08 14:54:33,797 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:33,797 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:33,806 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:33,806 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 270 ms
2024-12-08 14:54:33,829 INFO  [main] c.z.h.HikariDataSource - HikariPool-39 - Starting...
2024-12-08 14:54:33,830 INFO  [main] c.z.h.HikariDataSource - HikariPool-39 - Start completed.
2024-12-08 14:54:33,838 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:33,849 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:33,856 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:33,857 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:33,923 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:33,924 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:34,078 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:34,187 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d5fe739, org.springframework.security.web.context.SecurityContextPersistenceFilter@6b9d363c, org.springframework.security.web.header.HeaderWriterFilter@55c32fde, org.springframework.security.web.authentication.logout.LogoutFilter@f755e1d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1a711e1c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@14ba1cd2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58cb7c44, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4761784d, org.springframework.security.web.session.SessionManagementFilter@1879a786, org.springframework.security.web.access.ExceptionTranslationFilter@44276fe2, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3d467efe]
2024-12-08 14:54:34,205 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:34,275 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-39"]
2024-12-08 14:54:34,277 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 39985 (http) with context path ''
2024-12-08 14:54:34,347 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.841 seconds (JVM running for 77.086)
2024-12-08 14:54:34,373 INFO  [http-nio-auto-39-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:34,373 INFO  [http-nio-auto-39-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:34,375 INFO  [http-nio-auto-39-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:34,401 WARN  [http-nio-auto-39-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:54:34,418 WARN  [http-nio-auto-39-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
2024-12-08 14:54:34,434 WARN  [http-nio-auto-39-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:39985/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:34 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:34,660 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-39"]
2024-12-08 14:54:34,660 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:34,661 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:34,662 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-39"]
2024-12-08 14:54:34,664 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-39"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m4[m, [1;31mFailures: [0;1;31m1[m, Errors: 0, Skipped: 0, Time elapsed: 1.159 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run01_CustomerRestControllerTest[m
[[1;31mERROR[m] testCreateCustomer_ValidInput  Time elapsed: 0.03 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path email doesn't match.
Expected: ivan.petrov@yandex.ru
  Actual: null

	at market.v3_gpt4turbo_run01_CustomerRestControllerTest.testCreateCustomer_ValidInput(v3_gpt4turbo_run01_CustomerRestControllerTest.java:78)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:34,680 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:34,680 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:34,681 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:34,681 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:34,841 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:34,859 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:34,887 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:34,900 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2c3ae69e' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:34,902 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:34,927 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:34,928 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-40"]
2024-12-08 14:54:34,928 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:34,928 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:34,938 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:34,938 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 257 ms
2024-12-08 14:54:34,961 INFO  [main] c.z.h.HikariDataSource - HikariPool-40 - Starting...
2024-12-08 14:54:34,962 INFO  [main] c.z.h.HikariDataSource - HikariPool-40 - Start completed.
2024-12-08 14:54:34,970 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:34,981 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:34,988 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:34,989 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:35,048 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:35,049 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:35,176 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:35,275 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1640a80b, org.springframework.security.web.context.SecurityContextPersistenceFilter@2f54be3d, org.springframework.security.web.header.HeaderWriterFilter@194e9571, org.springframework.security.web.authentication.logout.LogoutFilter@2486aa9b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3f893d09, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5340becd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e484cc9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a4869b2, org.springframework.security.web.session.SessionManagementFilter@2f87eec3, org.springframework.security.web.access.ExceptionTranslationFilter@42c7c5e7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7bdb7a2c]
2024-12-08 14:54:35,293 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:35,362 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-40"]
2024-12-08 14:54:35,364 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 40647 (http) with context path ''
2024-12-08 14:54:35,431 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.764 seconds (JVM running for 78.17)
2024-12-08 14:54:35,454 INFO  [http-nio-auto-40-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:35,454 INFO  [http-nio-auto-40-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:35,456 INFO  [http-nio-auto-40-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:35,459 WARN  [http-nio-auto-40-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
2024-12-08 14:54:35,472 WARN  [http-nio-auto-40-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders/999', fieldErrors=[]}
2024-12-08 14:54:35,488 WARN  [http-nio-auto-40-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:40647/customer/contacts?name=invalid_user
Proxy:			<none>
Request params:	<none>
Query params:	name=invalid_user
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "address": "New Address",
    "phone": "+7 123 456 78 90"
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:35 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/contacts",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:35,511 WARN  [http-nio-auto-40-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}]}
Request method:	POST
Request URI:	http://localhost:40647/customer/cart/pay?name=invalid_user
Proxy:			<none>
Request params:	<none>
Query params:	name=invalid_user
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "1234-5678-9876-5432"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:35 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/cart/pay",
    "entityName": "creditCardDTO",
    "fieldErrors": [
        {
            "field": "ccNumber",
            "message": "Not a valid credit card number"
        }
    ]
}
2024-12-08 14:54:35,523 WARN  [http-nio-auto-40-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:35,534 WARN  [http-nio-auto-40-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:35,548 WARN  [http-nio-auto-40-exec-7] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
Request method:	PUT
Request URI:	http://localhost:40647/customer/cart?name=invalid_user
Proxy:			<none>
Request params:	<none>
Query params:	name=invalid_user
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 999,
    "quantity": 1
}

HTTP/1.1 401 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:35 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Acesso negado",
    "description": "uri=/customer/cart",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:35,564 WARN  [http-nio-auto-40-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:35,597 WARN  [http-nio-auto-40-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:40647/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "email": "ivan.petrov@yandex.ru",
    "password": "petrov",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "address": "Riesstrasse 18"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:35 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:35,642 WARN  [http-nio-auto-40-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:35,653 WARN  [http-nio-auto-40-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/orders', fieldErrors=[]}
2024-12-08 14:54:35,674 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-40"]
2024-12-08 14:54:35,674 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:35,675 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:35,676 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-40"]
2024-12-08 14:54:35,680 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-40"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m13[m, [1;31mFailures: [0;1;31m4[m, Errors: 0, Skipped: 0, Time elapsed: 1.012 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_RestErrorResponseTest[m
[[1;31mERROR[m] testUpdateContacts  Time elapsed: 0.017 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <401>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testUpdateContacts(v3_gpt4o_run01_RestErrorResponseTest.java:137)

[[1;31mERROR[m] testPayByCard  Time elapsed: 0.024 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <406>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testPayByCard(v3_gpt4o_run01_RestErrorResponseTest.java:116)

[[1;31mERROR[m] testAddItemToCart  Time elapsed: 0.015 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <401>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testAddItemToCart(v3_gpt4o_run01_RestErrorResponseTest.java:85)

[[1;31mERROR[m] testCreateCustomer  Time elapsed: 0.025 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <406>.

	at market.v3_gpt4o_run01_RestErrorResponseTest.testCreateCustomer(v3_gpt4o_run01_RestErrorResponseTest.java:186)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_ProductsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:35,699 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:35,699 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:35,700 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:35,700 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:35,862 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:35,879 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:35,903 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:35,913 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6384271b' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:35,914 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:35,937 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:35,938 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-41"]
2024-12-08 14:54:35,938 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:35,938 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:35,947 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:35,947 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 247 ms
2024-12-08 14:54:35,971 INFO  [main] c.z.h.HikariDataSource - HikariPool-41 - Starting...
2024-12-08 14:54:35,972 INFO  [main] c.z.h.HikariDataSource - HikariPool-41 - Start completed.
2024-12-08 14:54:35,979 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:35,990 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:36,000 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:36,001 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:36,078 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:36,078 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:36,224 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:36,332 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2ce47106, org.springframework.security.web.context.SecurityContextPersistenceFilter@55a6ea2c, org.springframework.security.web.header.HeaderWriterFilter@52879b26, org.springframework.security.web.authentication.logout.LogoutFilter@344aba76, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@67c93bc1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5dbe4ec5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@338ea0ff, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@32ce49bf, org.springframework.security.web.session.SessionManagementFilter@11ce8f4a, org.springframework.security.web.access.ExceptionTranslationFilter@31a736f3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1485e4ff]
2024-12-08 14:54:36,351 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:36,420 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-41"]
2024-12-08 14:54:36,422 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34623 (http) with context path ''
2024-12-08 14:54:36,483 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.8 seconds (JVM running for 79.222)
2024-12-08 14:54:36,505 INFO  [http-nio-auto-41-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:36,505 INFO  [http-nio-auto-41-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:36,506 INFO  [http-nio-auto-41-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:36,566 ERROR [http-nio-auto-41-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"', entityName='null', description='uri=/products/invalid', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: "invalid"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:645)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.NumberFormatException: For input string: "invalid"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.base/java.lang.Long.parseLong(Long.java:692)
	at java.base/java.lang.Long.valueOf(Long.java:1144)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
Request method:	GET
Request URI:	http://localhost:34623/products/invalid
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 500 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:36 GMT
Connection: close

{
    "message": "Failed to convert value of type 'java.lang.String' to required type 'long'; nested exception is java.lang.NumberFormatException: For input string: \"invalid\"",
    "description": "uri=/products/invalid",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:36,588 WARN  [http-nio-auto-41-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:36,646 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-41"]
2024-12-08 14:54:36,646 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:36,646 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:36,648 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-41"]
2024-12-08 14:54:36,651 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-41"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m4[m, [1;31mFailures: [0;1;31m1[m, Errors: 0, Skipped: 0, Time elapsed: 0.963 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run01_ProductsRestControllerTest[m
[[1;31mERROR[m] testGetProduct_internalServerError  Time elapsed: 0.043 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <400> but was <500>.

	at market.v3_gpt4turbo_run01_ProductsRestControllerTest.testGetProduct_internalServerError(v3_gpt4turbo_run01_ProductsRestControllerTest.java:104)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run02_CustomerRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:36,673 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:36,673 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:36,674 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:36,674 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:36,874 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:36,897 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:36,931 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:36,947 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7a870d2f' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:36,951 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:36,987 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:36,988 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-42"]
2024-12-08 14:54:36,989 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:36,989 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:37,001 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:37,001 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 326 ms
2024-12-08 14:54:37,031 INFO  [main] c.z.h.HikariDataSource - HikariPool-42 - Starting...
2024-12-08 14:54:37,032 INFO  [main] c.z.h.HikariDataSource - HikariPool-42 - Start completed.
2024-12-08 14:54:37,041 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:37,056 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:37,069 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:37,071 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:37,155 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:37,156 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:37,289 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:37,402 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@41d91872, org.springframework.security.web.context.SecurityContextPersistenceFilter@2eb395ac, org.springframework.security.web.header.HeaderWriterFilter@79839ebe, org.springframework.security.web.authentication.logout.LogoutFilter@450ba03, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5e833575, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2490ef23, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4103f361, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2fe01cf7, org.springframework.security.web.session.SessionManagementFilter@eaf24e0, org.springframework.security.web.access.ExceptionTranslationFilter@43592e0f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2cc954fd]
2024-12-08 14:54:37,419 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:37,490 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-42"]
2024-12-08 14:54:37,492 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 43961 (http) with context path ''
2024-12-08 14:54:37,558 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.904 seconds (JVM running for 80.297)
2024-12-08 14:54:37,585 INFO  [http-nio-auto-42-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:37,585 INFO  [http-nio-auto-42-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:37,587 INFO  [http-nio-auto-42-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:37,620 WARN  [http-nio-auto-42-exec-2] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}]}
2024-12-08 14:54:37,678 WARN  [http-nio-auto-42-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:43961/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:37 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:37,700 WARN  [http-nio-auto-42-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='UserAccount', description='uri=/register', fieldErrors=[{field='email', message='Account with this email already exists'}]}
Request method:	POST
Request URI:	http://localhost:43961/register
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "password": "petrov",
    "address": "Riesstrasse 18",
    "name": "Ivan Petrov",
    "phone": "+7 123 456 78 90",
    "email": "ivan.petrov@yandex.ru"
}

HTTP/1.1 406 
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:37 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/register",
    "entityName": "UserAccount",
    "fieldErrors": [
        {
            "field": "email",
            "message": "Account with this email already exists"
        }
    ]
}
2024-12-08 14:54:37,711 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-42"]
2024-12-08 14:54:37,711 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:37,712 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:37,714 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-42"]
2024-12-08 14:54:37,716 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-42"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m4[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 1.06 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run02_CustomerRestControllerTest[m
[[1;31mERROR[m] testCreateCustomerExistingEmail  Time elapsed: 0.03 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4turbo_run02_CustomerRestControllerTest.testCreateCustomerExistingEmail(v3_gpt4turbo_run02_CustomerRestControllerTest.java:88)

[[1;31mERROR[m] testCreateCustomerValid  Time elapsed: 0.021 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <406>.

	at market.v3_gpt4turbo_run02_CustomerRestControllerTest.testCreateCustomerValid(v3_gpt4turbo_run02_CustomerRestControllerTest.java:69)

[[1;34mINFO[m] Running market.[1mv3_gpt4turbo_run01_ContactsRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:37,735 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:37,735 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:37,736 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:37,736 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:37,910 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:37,929 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:37,955 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:37,966 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6edc092a' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:37,966 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:37,994 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:37,995 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-43"]
2024-12-08 14:54:37,995 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:37,995 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:38,005 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:38,005 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 269 ms
2024-12-08 14:54:38,028 INFO  [main] c.z.h.HikariDataSource - HikariPool-43 - Starting...
2024-12-08 14:54:38,029 INFO  [main] c.z.h.HikariDataSource - HikariPool-43 - Start completed.
2024-12-08 14:54:38,036 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:38,047 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:38,055 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:38,056 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:38,127 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:38,127 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:38,285 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:38,381 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ef2631b, org.springframework.security.web.context.SecurityContextPersistenceFilter@16488016, org.springframework.security.web.header.HeaderWriterFilter@1ab25d34, org.springframework.security.web.authentication.logout.LogoutFilter@55ea851a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1487b0e9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13d32245, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1b8096f6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6333f982, org.springframework.security.web.session.SessionManagementFilter@6cce1440, org.springframework.security.web.access.ExceptionTranslationFilter@59eb8eb4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@41d42a2f]
2024-12-08 14:54:38,401 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:38,467 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-43"]
2024-12-08 14:54:38,469 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34881 (http) with context path ''
2024-12-08 14:54:38,531 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.811 seconds (JVM running for 81.27)
2024-12-08 14:54:38,554 INFO  [http-nio-auto-43-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:38,555 INFO  [http-nio-auto-43-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:38,556 INFO  [http-nio-auto-43-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:38,727 WARN  [http-nio-auto-43-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='contactsDTO', description='uri=/customer/contacts', fieldErrors=[{field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}]}
Request method:	PUT
Request URI:	http://localhost:34881/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "address": "New Address 123",
    "phone": "invalid phone"
}

HTTP/1.1 406 
Set-Cookie: JSESSIONID=D9F28D5D4CE9D3023ECB34E87BD9BE00; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:38 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "message": "Argument validation error",
    "description": "uri=/customer/contacts",
    "entityName": "contactsDTO",
    "fieldErrors": [
        {
            "field": "phone",
            "message": "Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)"
        }
    ]
}
Request method:	GET
Request URI:	http://localhost:34881/customer/contacts
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic dW5hdXRob3JpemVkX3VzZXI6d3JvbmdfcGFzc3dvcmQ=
				Accept=*/*
Cookies:		<none>
Multiparts:		<none>
Body:			<none>

HTTP/1.1 401 
WWW-Authenticate: Basic realm="Realm"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:38 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "timestamp": "2024-12-08T17:54:38.950+00:00",
    "status": 401,
    "error": "Unauthorized",
    "message": "",
    "path": "/customer/contacts"
}
2024-12-08 14:54:39,082 WARN  [http-nio-auto-43-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/contacts', fieldErrors=[]}
2024-12-08 14:54:39,091 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-43"]
2024-12-08 14:54:39,092 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:39,092 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:39,094 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-43"]
2024-12-08 14:54:39,097 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-43"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m5[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 1.376 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4turbo_run01_ContactsRestControllerTest[m
[[1;31mERROR[m] testUpdateContacts_invalidPhoneResponse  Time elapsed: 0.188 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <500> but was <406>.

	at market.v3_gpt4turbo_run01_ContactsRestControllerTest.testUpdateContacts_invalidPhoneResponse(v3_gpt4turbo_run01_ContactsRestControllerTest.java:93)

[[1;31mERROR[m] testForbiddenAccess  Time elapsed: 0.091 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <403> but was <401>.

	at market.v3_gpt4turbo_run01_ContactsRestControllerTest.testForbiddenAccess(v3_gpt4turbo_run01_ContactsRestControllerTest.java:107)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run01_CartRestControllerTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:39,119 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:39,119 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:39,120 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:39,120 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:39,266 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:39,289 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:39,331 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:39,342 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@75796a3' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:39,343 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:39,368 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:39,368 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-44"]
2024-12-08 14:54:39,369 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:39,369 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:39,378 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:39,378 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 258 ms
2024-12-08 14:54:39,401 INFO  [main] c.z.h.HikariDataSource - HikariPool-44 - Starting...
2024-12-08 14:54:39,401 INFO  [main] c.z.h.HikariDataSource - HikariPool-44 - Start completed.
2024-12-08 14:54:39,409 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:39,421 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:39,432 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:39,433 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:39,503 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:39,503 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:39,643 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:39,749 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ab56f19, org.springframework.security.web.context.SecurityContextPersistenceFilter@448c6435, org.springframework.security.web.header.HeaderWriterFilter@5a0078b7, org.springframework.security.web.authentication.logout.LogoutFilter@3030526c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2a1af3b5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35c3ec17, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6c5fffd8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@549c0043, org.springframework.security.web.session.SessionManagementFilter@52f52d6c, org.springframework.security.web.access.ExceptionTranslationFilter@30e461d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7d6db7ca]
2024-12-08 14:54:39,768 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:39,841 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-44"]
2024-12-08 14:54:39,843 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 45827 (http) with context path ''
2024-12-08 14:54:39,918 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.816 seconds (JVM running for 82.657)
2024-12-08 14:54:39,944 INFO  [http-nio-auto-44-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:39,944 INFO  [http-nio-auto-44-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:39,945 INFO  [http-nio-auto-44-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 1 ms
2024-12-08 14:54:40,340 WARN  [http-nio-auto-44-exec-3] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:54:40,341 ERROR [http-nio-auto-44-exec-3] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:54:40,342 ERROR [http-nio-auto-44-exec-3] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d5d8863.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$a9e8a17_44.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	POST
Request URI:	http://localhost:45827/customer/cart/pay
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "ccNumber": "4111111111111111"
}

HTTP/1.1 500 
Set-Cookie: JSESSIONID=C6D4354E6A2AF56F700C0DD28B9AB4D1; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:40 GMT
Connection: close

{
    "message": "could not execute statement; SQL [n/a]; constraint [\"PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']\"; SQL statement:\ninsert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement",
    "description": "uri=/customer/cart/pay",
    "entityName": null,
    "fieldErrors": [
        
    ]
}
2024-12-08 14:54:40,648 WARN  [http-nio-auto-44-exec-6] o.h.e.j.s.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2024-12-08 14:54:40,648 ERROR [http-nio-auto-44-exec-6] o.h.e.j.s.SqlExceptionHelper - Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
2024-12-08 14:54:40,649 ERROR [http-nio-auto-44-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement', entityName='null', description='uri=/customer/cart/pay', fieldErrors=[]}
org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint ["PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:276)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
	at com.sun.proxy.$Proxy156.saveAndFlush(Unknown Source)
	at market.service.impl.OrderServiceImpl.createUserOrder(OrderServiceImpl.java:89)
	at market.service.impl.OrderServiceImpl$$FastClassBySpringCGLIB$$2e692bca.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.service.impl.OrderServiceImpl$$EnhancerBySpringCGLIB$$1d5d8863.createUserOrder(<generated>)
	at market.rest.CartRestController.payByCard(CartRestController.java:115)
	at market.rest.CartRestController$$FastClassBySpringCGLIB$$e4131698.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:779)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:61)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:692)
	at market.rest.CartRestController$$EnhancerBySpringCGLIB$$a9e8a17_44.payByCard(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:665)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:178)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:59)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)
	at org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:57)
	at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3200)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3806)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:194)
	at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:38)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:179)
	at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:32)
	at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:75)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:636)
	at org.hibernate.internal.SessionImpl.save(SessionImpl.java:629)
	at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:119)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:115)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:93)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:720)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:706)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at com.sun.proxy.$Proxy143.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:557)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAndFlush(SimpleJpaRepository.java:572)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 119 more
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.BILL(ID) [1, 271320540, DATE '2019-12-27', 8527, TRUE, '1111222233334444']"; SQL statement:
insert into bill (id, cc_number, date_created, number, payed, total_cost) values (null, ?, ?, ?, ?, ?) [23505-200]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:459)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)
	at org.h2.message.DbException.get(DbException.java:205)
	at org.h2.message.DbException.get(DbException.java:181)
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:127)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:531)
	at org.h2.command.dml.Insert.insertRows(Insert.java:195)
	at org.h2.command.dml.Insert.update(Insert.java:151)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:272)
	at org.h2.command.CommandContainer.update(CommandContainer.java:191)
	at org.h2.command.Command.executeUpdate(Command.java:251)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:191)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:152)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	... 183 more
Request method:	PUT
Request URI:	http://localhost:45827/customer/cart
Proxy:			<none>
Request params:	<none>
Query params:	<none>
Form params:	<none>
Path params:	<none>
Headers:		Authorization=Basic aXZhbi5wZXRyb3ZAeWFuZGV4LnJ1OnBldHJvdg==
				Accept=*/*
				Content-Type=application/json; charset=UTF-8
Cookies:		<none>
Multiparts:		<none>
Body:
{
    "productId": 1,
    "quantity": 2
}

HTTP/1.1 200 
Set-Cookie: JSESSIONID=DC7707040FED5C1373202C4AFE2EAF0E; Path=/; HttpOnly
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: 0
Content-Type: application/hal+json
Transfer-Encoding: chunked
Date: Sun, 08 Dec 2024 17:54:40 GMT
Keep-Alive: timeout=60
Connection: keep-alive

{
    "user": "ivan.petrov@yandex.ru",
    "totalItems": 1,
    "productsCost": 6517.0,
    "deliveryCost": 400,
    "deliveryIncluded": true,
    "totalCost": 6917.0,
    "cartItems": [
        {
            "productId": 5,
            "quantity": 1,
            "_links": {
                "View product": {
                    "href": "http://localhost:45827/products/5"
                }
            }
        }
    ],
    "empty": false,
    "_links": {
        "Customer contacts": {
            "href": "http://localhost:45827/customer/contacts"
        },
        "Proceed to payment": {
            "href": "http://localhost:45827/customer/cart/pay"
        }
    }
}
2024-12-08 14:54:40,854 WARN  [http-nio-auto-44-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='Product', description='uri=/customer/cart', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:40,863 WARN  [http-nio-auto-44-exec-9] m.r.e.RestExceptionHandler - RestErrorResponse{message='Acesso negado', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
2024-12-08 14:54:40,871 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-44"]
2024-12-08 14:54:40,871 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:40,871 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:40,873 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-44"]
2024-12-08 14:54:40,875 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-44"]
[[1;31mERROR[m] [1;31mTests [0;1mrun: [0;1m8[m, [1;31mFailures: [0;1;31m2[m, Errors: 0, Skipped: 0, Time elapsed: 1.77 s[1;31m <<< FAILURE![m - in market.[1mv3_gpt4o_run01_CartRestControllerTest[m
[[1;31mERROR[m] testPayByCard  Time elapsed: 0.247 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
Expected status code <201> but was <500>.

	at market.v3_gpt4o_run01_CartRestControllerTest.testPayByCard(v3_gpt4o_run01_CartRestControllerTest.java:166)

[[1;31mERROR[m] testAddItemToCart  Time elapsed: 0.065 s  <<< FAILURE!
java.lang.AssertionError: 
1 expectation failed.
JSON path totalItems doesn't match.
Expected: <2>
  Actual: 1

	at market.v3_gpt4o_run01_CartRestControllerTest.testAddItemToCart(v3_gpt4o_run01_CartRestControllerTest.java:92)

[[1;34mINFO[m] Running market.[1mv3_gpt4o_run02_RestErrorResponseTest[m

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.4.3)

2024-12-08 14:54:40,892 INFO  [main] o.a.m.s.b.ForkedBooter - Starting ForkedBooter v2.22.0 using Java 11.0.20 on IFTO-PROBOOK with PID 41190 (started by rincon in /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest)
2024-12-08 14:54:40,893 INFO  [main] o.a.m.s.b.ForkedBooter - No active profile set, falling back to default profiles: default
2024-12-08 14:54:40,894 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 34:13]
2024-12-08 14:54:40,894 WARN  [main] o.s.b.c.c.ConfigDataEnvironment - Property 'spring.profiles' imported from location 'class path resource [application.yml]' is invalid and should be replaced with 'spring.config.activate.on-profile' [origin: class path resource [application.yml] - 24:13]
2024-12-08 14:54:41,049 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-12-08 14:54:41,071 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 8 JPA repository interfaces.
2024-12-08 14:54:41,105 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'market.DataConfig' of type [market.DataConfig$$EnhancerBySpringCGLIB$$bfcfa607] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:41,147 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1db7f395' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:41,149 INFO  [main] o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-12-08 14:54:41,193 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2024-12-08 14:54:41,194 INFO  [main] o.a.c.h.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-45"]
2024-12-08 14:54:41,194 INFO  [main] o.a.c.c.StandardService - Starting service [Tomcat]
2024-12-08 14:54:41,194 INFO  [main] o.a.c.c.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.43]
2024-12-08 14:54:41,209 INFO  [main] o.a.c.c.C.[.[.[/] - Initializing Spring embedded WebApplicationContext
2024-12-08 14:54:41,209 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 315 ms
2024-12-08 14:54:41,238 INFO  [main] c.z.h.HikariDataSource - HikariPool-45 - Starting...
2024-12-08 14:54:41,239 INFO  [main] c.z.h.HikariDataSource - HikariPool-45 - Start completed.
2024-12-08 14:54:41,247 INFO  [main] o.h.j.i.u.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-12-08 14:54:41,259 INFO  [main] o.h.d.Dialect - HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2024-12-08 14:54:41,267 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:41,268 WARN  [main] o.h.b.i.InFlightMetadataCollectorImpl - HHH000069: Duplicate generator name gen
2024-12-08 14:54:41,337 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-12-08 14:54:41,337 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:41,481 WARN  [main] o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-12-08 14:54:41,589 INFO  [main] o.s.s.w.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@634f2233, org.springframework.security.web.context.SecurityContextPersistenceFilter@286288f6, org.springframework.security.web.header.HeaderWriterFilter@68ec78d3, org.springframework.security.web.authentication.logout.LogoutFilter@76c591dd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@55f2a973, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6869b935, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63487e0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a2a85df, org.springframework.security.web.session.SessionManagementFilter@5bee4a60, org.springframework.security.web.access.ExceptionTranslationFilter@77b6ffb0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@791ae86]
2024-12-08 14:54:41,606 INFO  [main] o.s.s.c.ThreadPoolTaskExecutor - Initializing ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:41,672 INFO  [main] o.a.c.h.Http11NioProtocol - Starting ProtocolHandler ["http-nio-auto-45"]
2024-12-08 14:54:41,674 INFO  [main] o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 34129 (http) with context path ''
2024-12-08 14:54:41,742 INFO  [main] o.a.m.s.b.ForkedBooter - Started ForkedBooter in 0.862 seconds (JVM running for 84.481)
2024-12-08 14:54:41,761 INFO  [http-nio-auto-45-exec-1] o.a.c.c.C.[.[.[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-12-08 14:54:41,761 INFO  [http-nio-auto-45-exec-1] o.s.w.s.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-12-08 14:54:41,763 INFO  [http-nio-auto-45-exec-1] o.s.w.s.DispatcherServlet - Completed initialization in 2 ms
2024-12-08 14:54:41,780 WARN  [http-nio-auto-45-exec-1] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='userDTO', description='uri=/register', fieldErrors=[{field='email', message='The value shall be in the format of an email address'}, {field='phone', message='Shall consist of a + sign, a country code, a region code (1-4 digits), and a number (6-7 digits)'}, {field='name', message='Only letters, whitespace, hyphen and apostrophe are allowed'}, {field='address', message='Special characters are not allowed'}, {field='password', message='Length shall be between 6 and 50 characters'}]}
2024-12-08 14:54:41,818 ERROR [http-nio-auto-45-exec-4] m.r.e.RestExceptionHandler - RestErrorResponse{message='Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalid]', entityName='null', description='uri=/customer/cart/delivery', fieldErrors=[]}
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'boolean'; nested exception is java.lang.IllegalArgumentException: Invalid boolean value [invalid]
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.IllegalArgumentException: Invalid boolean value [invalid]
	at org.springframework.beans.propertyeditors.CustomBooleanEditor.setAsText(CustomBooleanEditor.java:154)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:696)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 85 more
2024-12-08 14:54:41,837 ERROR [http-nio-auto-45-exec-5] m.r.e.RestExceptionHandler - RestErrorResponse{message='JSON parse error: null; nested exception is com.fasterxml.jackson.databind.JsonMappingException: N/A
 at [Source: (PushbackInputStream); line: 1, column: 16] (through reference chain: market.dto.CartItemDTO["productId"])', entityName='null', description='uri=/customer/cart', fieldErrors=[]}
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: null; nested exception is com.fasterxml.jackson.databind.JsonMappingException: N/A
 at [Source: (PushbackInputStream); line: 1, column: 16] (through reference chain: market.dto.CartItemDTO["productId"])
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:387)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:342)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:186)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:158)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:131)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:121)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:170)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:894)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1060)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:962)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:920)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:750)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:346)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:887)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1684)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: com.fasterxml.jackson.databind.JsonMappingException: N/A
 at [Source: (PushbackInputStream); line: 1, column: 16] (through reference chain: market.dto.CartItemDTO["productId"])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:281)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:623)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:611)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:143)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:371)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:164)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4526)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3521)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:376)
	... 89 more
Caused by: java.lang.NullPointerException
	at market.dto.CartItemDTO.setProductId(CartItemDTO.java:27)
	at jdk.internal.reflect.GeneratedMethodAccessor787.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:141)
	... 94 more
2024-12-08 14:54:41,855 WARN  [http-nio-auto-45-exec-6] m.r.e.RestExceptionHandler - RestErrorResponse{message='Requested entity doesn't exist', entityName='ProductDTO', description='uri=/products/9999', fieldErrors=[{field='id', message='No instance with this id'}]}
2024-12-08 14:54:42,001 WARN  [http-nio-auto-45-exec-8] m.r.e.RestExceptionHandler - RestErrorResponse{message='Argument validation error', entityName='creditCardDTO', description='uri=/customer/cart/pay', fieldErrors=[{field='ccNumber', message='Not a valid credit card number'}, {field='ccNumber', message='Card number shall consist of 13-16 digits'}]}
2024-12-08 14:54:42,011 INFO  [main] o.a.c.h.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-auto-45"]
2024-12-08 14:54:42,011 INFO  [main] o.a.c.c.StandardService - Stopping service [Tomcat]
2024-12-08 14:54:42,011 INFO  [main] o.a.c.c.C.[.[.[/] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2024-12-08 14:54:42,014 INFO  [main] o.a.c.h.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-auto-45"]
2024-12-08 14:54:42,018 INFO  [main] o.a.c.h.Http11NioProtocol - Destroying ProtocolHandler ["http-nio-auto-45"]
[[1;34mINFO[m] [1;32mTests run: [0;1;32m8[m, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.137 s - in market.[1mv3_gpt4o_run02_RestErrorResponseTest[m
2024-12-08 14:54:42,074 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,079 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,079 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,080 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,081 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,086 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,086 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,086 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,096 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,099 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,103 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,106 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,109 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,111 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,111 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,114 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,114 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,114 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,114 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,118 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,122 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,123 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,123 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,123 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,131 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,139 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,139 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,139 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,139 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,139 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,139 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,146 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,147 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,151 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,159 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,159 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,159 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,164 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,164 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,164 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,164 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,171 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,171 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,171 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,177 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,179 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,179 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,179 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,179 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,183 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,196 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,200 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,200 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,200 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,202 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,207 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,210 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,210 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,213 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,215 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,216 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,217 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,218 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,218 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,218 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,221 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,222 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,222 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,222 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,222 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,224 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,226 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,230 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,232 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,234 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,239 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,240 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,244 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,247 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,247 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,249 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,250 INFO  [SpringContextShutdownHook] o.s.s.c.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'
2024-12-08 14:54:42,251 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,256 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,257 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,264 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,270 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,271 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-43 - Shutdown initiated...
2024-12-08 14:54:42,272 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-8 - Shutdown initiated...
2024-12-08 14:54:42,272 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,279 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-16 - Shutdown initiated...
2024-12-08 14:54:42,279 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-30 - Shutdown initiated...
2024-12-08 14:54:42,279 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-35 - Shutdown initiated...
2024-12-08 14:54:42,279 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,279 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-36 - Shutdown initiated...
2024-12-08 14:54:42,280 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-18 - Shutdown initiated...
2024-12-08 14:54:42,280 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-3 - Shutdown initiated...
2024-12-08 14:54:42,280 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-14 - Shutdown initiated...
2024-12-08 14:54:42,280 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-24 - Shutdown initiated...
2024-12-08 14:54:42,281 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-39 - Shutdown initiated...
2024-12-08 14:54:42,282 INFO  [SpringContextShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-12-08 14:54:42,282 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-38 - Shutdown initiated...
2024-12-08 14:54:42,282 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-4 - Shutdown initiated...
2024-12-08 14:54:42,282 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-27 - Shutdown initiated...
2024-12-08 14:54:42,282 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-10 - Shutdown initiated...
2024-12-08 14:54:42,282 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-12 - Shutdown initiated...
2024-12-08 14:54:42,283 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-44 - Shutdown initiated...
2024-12-08 14:54:42,283 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-6 - Shutdown initiated...
2024-12-08 14:54:42,283 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-8 - Shutdown completed.
2024-12-08 14:54:42,283 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-45 - Shutdown initiated...
2024-12-08 14:54:42,284 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-17 - Shutdown initiated...
2024-12-08 14:54:42,284 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-21 - Shutdown initiated...
2024-12-08 14:54:42,284 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-2 - Shutdown initiated...
2024-12-08 14:54:42,284 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-7 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-20 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-33 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-25 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-29 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-31 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-11 - Shutdown initiated...
2024-12-08 14:54:42,285 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-5 - Shutdown initiated...
2024-12-08 14:54:42,286 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-12-08 14:54:42,286 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-22 - Shutdown initiated...
2024-12-08 14:54:42,286 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-42 - Shutdown initiated...
2024-12-08 14:54:42,286 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-40 - Shutdown initiated...
2024-12-08 14:54:42,286 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-34 - Shutdown initiated...
2024-12-08 14:54:42,287 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-23 - Shutdown initiated...
2024-12-08 14:54:42,287 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-41 - Shutdown initiated...
2024-12-08 14:54:42,287 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-32 - Shutdown initiated...
2024-12-08 14:54:42,288 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-15 - Shutdown initiated...
2024-12-08 14:54:42,288 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-19 - Shutdown initiated...
2024-12-08 14:54:42,289 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-26 - Shutdown initiated...
2024-12-08 14:54:42,289 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-28 - Shutdown initiated...
2024-12-08 14:54:42,289 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-9 - Shutdown initiated...
2024-12-08 14:54:42,289 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-37 - Shutdown initiated...
2024-12-08 14:54:42,289 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-13 - Shutdown initiated...
2024-12-08 14:54:42,297 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-18 - Shutdown completed.
2024-12-08 14:54:42,298 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-17 - Shutdown completed.
2024-12-08 14:54:42,298 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-27 - Shutdown completed.
2024-12-08 14:54:42,299 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-31 - Shutdown completed.
2024-12-08 14:54:42,299 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-22 - Shutdown completed.
2024-12-08 14:54:42,300 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-28 - Shutdown completed.
2024-12-08 14:54:42,300 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-4 - Shutdown completed.
2024-12-08 14:54:42,301 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-3 - Shutdown completed.
2024-12-08 14:54:42,302 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-30 - Shutdown completed.
2024-12-08 14:54:42,302 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-26 - Shutdown completed.
2024-12-08 14:54:42,302 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-9 - Shutdown completed.
2024-12-08 14:54:42,307 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-24 - Shutdown completed.
2024-12-08 14:54:42,307 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-14 - Shutdown completed.
2024-12-08 14:54:42,309 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-19 - Shutdown completed.
2024-12-08 14:54:42,310 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-15 - Shutdown completed.
2024-12-08 14:54:42,310 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-23 - Shutdown completed.
2024-12-08 14:54:42,311 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-12-08 14:54:42,311 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-11 - Shutdown completed.
2024-12-08 14:54:42,312 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-5 - Shutdown completed.
2024-12-08 14:54:42,312 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-29 - Shutdown completed.
2024-12-08 14:54:42,313 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-25 - Shutdown completed.
2024-12-08 14:54:42,313 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-20 - Shutdown completed.
2024-12-08 14:54:42,314 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-13 - Shutdown completed.
2024-12-08 14:54:42,314 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-7 - Shutdown completed.
2024-12-08 14:54:42,314 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-2 - Shutdown completed.
2024-12-08 14:54:42,315 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-21 - Shutdown completed.
2024-12-08 14:54:42,316 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-6 - Shutdown completed.
2024-12-08 14:54:42,318 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-12 - Shutdown completed.
2024-12-08 14:54:42,319 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-10 - Shutdown completed.
2024-12-08 14:54:42,305 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-16 - Shutdown completed.
2024-12-08 14:54:42,323 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-36 - Shutdown completed.
2024-12-08 14:54:42,323 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-44 - Shutdown completed.
2024-12-08 14:54:42,324 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-35 - Shutdown completed.
2024-12-08 14:54:42,325 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-39 - Shutdown completed.
2024-12-08 14:54:42,326 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-45 - Shutdown completed.
2024-12-08 14:54:42,326 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-40 - Shutdown completed.
2024-12-08 14:54:42,326 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-43 - Shutdown completed.
2024-12-08 14:54:42,326 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-33 - Shutdown completed.
2024-12-08 14:54:42,326 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-37 - Shutdown completed.
2024-12-08 14:54:42,328 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-38 - Shutdown completed.
2024-12-08 14:54:42,333 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-41 - Shutdown completed.
2024-12-08 14:54:42,333 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-34 - Shutdown completed.
2024-12-08 14:54:42,333 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-32 - Shutdown completed.
2024-12-08 14:54:42,333 INFO  [SpringContextShutdownHook] c.z.h.HikariDataSource - HikariPool-42 - Shutdown completed.
[[1;34mINFO[m] 
[[1;34mINFO[m] Results:
[[1;34mINFO[m] 
[[1;31mERROR[m] [1;31mFailures: [m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CartRestControllerTest.testAddItemToCart:92 1 expectation failed.
JSON path totalItems doesn't match.
Expected: <2>
  Actual: 1
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CartRestControllerTest.testPayByCard:166 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testGetContactsSuccess:65 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testSchemaValidation:168 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsInvalidInput:122 1 expectation failed.
Expected status code <400> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSchemaValidation:185 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_ContactsRestControllerTest.testUpdateContactsSuccess:90 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomer:66 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CustomerRestControllerTest.testCreateCustomerWithExistingEmail:81 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_CustomerRestControllerTest.testGetCustomerWithValidSession:104 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testAddItemToCart:85 1 expectation failed.
Expected status code <500> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testCreateCustomer:186 1 expectation failed.
Expected status code <500> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testPayByCard:116 1 expectation failed.
Expected status code <500> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestErrorResponseTest.testUpdateContacts:137 1 expectation failed.
Expected status code <500> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testAddItemToCart_InvalidProduct:94 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testCreateCustomer_Duplicate:148 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testGetCustomer_NotFound:70 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run01_RestExceptionHandlerTest.testGetProduct_Unauthorized:189 1 expectation failed.
Expected status code <401> but was <200>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testAddItem:81 1 expectation failed.
JSON path cartItems[0].productId doesn't match.
Expected: <1>
  Actual: 5
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testInternalServerError:139 1 expectation failed.
Expected status code <500> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testPayByCard:112 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ContactsRestControllerTest.testGetContacts:90->getAuthToken:160 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContacts:104->getAuthToken:160 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ContactsRestControllerTest.testUpdateContactsInvalidPhone:125->getAuthToken:160 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomer:69 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testCreateCustomerEmailExists:85 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testGetCustomer:107 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CustomerRestControllerTest.testSchemaValidation:158 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_ProductsRestControllerTest.testInternalServerErrorSimulation:109 1 expectation failed.
Expected status code <500> but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetContactsNotFound:125 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetCustomerNotFound:65 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetOrderNotFound:156 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testGetProductsUnauthorized:165 1 expectation failed.
Expected status code <401> but was <200>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testInternalServerError:195 1 expectation failed.
Expected status code <500> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_RestExceptionHandlerTest.testPayByCardWithoutAuth:115 1 expectation failed.
Expected status code <401> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testAddItemToCart:83 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidProduct:200 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testAddItemToCartInvalidQuantity:233 1 expectation failed.
Expected status code <400> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testClearCart:94 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testGetCart:65 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testPayByCard:123 1 expectation failed.
Expected status code <201> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testPayByCardEmptyCart:216 1 expectation failed.
Expected status code <500> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CartRestControllerTest.testSetDelivery:106 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomer:87 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CustomerRestControllerTest.testCreateCustomerEmailExists:111 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_CustomerRestControllerTest.testGetCustomerAfterRegistration:159 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_OrdersRestControllerTest.testGetOrder:84->getAccessToken:110 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_OrdersRestControllerTest.testGetOrders:69->getAccessToken:110 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_OrdersRestControllerTest.testInternalServerError:99->getAccessToken:110 1 expectation failed.
Expected status code <200> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testCreateProduct:120 1 expectation failed.
Expected status code <201> but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testCreateProductWithInvalidData:142 1 expectation failed.
Expected status code <400> but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerNotFound:80 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestErrorResponseTest.testGetCustomerValid:67 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestExceptionHandlerTest.testCreateCustomer:193 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestExceptionHandlerTest.testGetCartNotFound:87 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_RestExceptionHandlerTest.testGetCustomerNotFound:77 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_CartRestControllerTest.testPayByCardInvalidNumber:124 1 expectation failed.
JSON path message doesn't match.
Expected: a string containing "Not a valid credit card number"
  Actual: Argument validation error
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_CartRestControllerTest.testPayByCardValid:112 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_ContactsRestControllerTest.testForbiddenAccess:107 1 expectation failed.
Expected status code <403> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_ContactsRestControllerTest.testUpdateContacts_invalidPhoneResponse:93 1 expectation failed.
Expected status code <500> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_CustomerRestControllerTest.testCreateCustomer_ValidInput:78 1 expectation failed.
JSON path email doesn't match.
Expected: ivan.petrov@yandex.ru
  Actual: null
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_OrdersRestControllerTest.testGetOrderNotFound:76 1 expectation failed.
Expected status code <404> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_OrdersRestControllerTest.testGetOrdersServerError:103 1 expectation failed.
Expected status code (is <500> or is <503>) but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run01_ProductsRestControllerTest.testGetProduct_internalServerError:104 1 expectation failed.
Expected status code <400> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run02_CartRestControllerTest.testAddItemSuccess:74 1 expectation failed.
JSON path cartItems.productId doesn't match.
Expected: a collection containing <1>
  Actual: [5]
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run02_CartRestControllerTest.testPayByCardSuccess:101 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run02_CustomerRestControllerTest.testCreateCustomerExistingEmail:88 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run02_CustomerRestControllerTest.testCreateCustomerValid:69 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run02_OrdersRestControllerTest.testServerErrorSimulation:104 1 expectation failed.
Expected status code (is <500> or is <502> or is <503> or is <504>) but was <405>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run03_CartRestControllerTest.testInternalServerErrorOnAddItem:110 1 expectation failed.
Expected status code <500> but was <404>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run03_CartRestControllerTest.testPayByCardSuccess:100 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run03_CustomerRestControllerTest.testCreateCustomerExistingEmail:72 1 expectation failed.
Expected status code <201> but was <406>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run03_CustomerRestControllerTest.testCreateCustomerValidData:89 1 expectation failed.
Expected status code <201> but was <500>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run03_CustomerRestControllerTest.testGetCustomerAsAdmin:96 1 expectation failed.
Expected status code <200> but was <401>.
[m
[[1;31mERROR[m] [1;31m  v3_gpt4turbo_run03_RestErrorResponseTest.testValidResponse_for500InternalError_whenFieldError:72 expected: <true> but was: <false>[m
[[1;31mERROR[m] [1;31mErrors: [m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForAddItem:160 ¬ª IllegalArgument[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_CartRestControllerTest.testSchemaValidationForGetCart:148 ¬ª IllegalArgument[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_OrdersRestControllerTest.testGetOrder:82 ¬ª IllegalArgument Sche...[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run02_OrdersRestControllerTest.testGetOrders:68 ¬ª IllegalArgument Sch...[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetProducts:159 ¬ª IllegalArgument[m
[[1;31mERROR[m] [1;31m  v3_gpt4o_run03_ProductsRestControllerTest.testSchemaValidationGetSingleProduct:172 ¬ª IllegalArgument[m
[[1;34mINFO[m] 
[[1;31mERROR[m] [1;31mTests run: 279, Failures: 75, Errors: 6, Skipped: 0[m
[[1;34mINFO[m] 
[[1;31mERROR[m] There are test failures.

Please refer to /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/surefire-reports for the individual test results.
Please refer to dump files (if any exist) [date]-jvmRun[N].dump, [date].dumpstream and [date]-jvmRun[N].dumpstream.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mjacoco-maven-plugin:0.8.7:report[m [1m(report)[m @ [36mmarket-rest[0;1m ---[m
[[1;34mINFO[m] Loading execution data file /media/rincon/63999417195/eclipse-workspace/EMB-master/jdk_11_maven/cs/rest-gui/market/market-rest/target/jacoco.exec
[[1;34mINFO[m] Analyzed bundle 'market-rest' with 10 classes
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1;32mBUILD SUCCESS[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] Total time:  01:30 min
[[1;34mINFO[m] Finished at: 2024-12-08T14:54:43-03:00
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
Verificando relat√≥rios gerados pelo Maven...
Relat√≥rios de cobertura encontrados. Copiando para /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/model_combinations/gpt4turbo+gpt4o...
Relat√≥rios Surefire encontrados. Copiando para /home/rincon/ar_benchmark/artigo/estudos-prompts/market-test-set/gpt/v3/model_combinations/gpt4turbo+gpt4o...
Execu√ß√£o da combina√ß√£o gpt4turbo+gpt4o conclu√≠da com sucesso.
